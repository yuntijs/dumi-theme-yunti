!(function(){"use strict";var qm=Object.defineProperty;var eg=(Q,C,p)=>C in Q?qm(Q,C,{enumerable:!0,configurable:!0,writable:!0,value:p}):Q[C]=p;var $t=(Q,C,p)=>eg(Q,typeof C!="symbol"?C+"":C,p);var j=(Q,C,p)=>new Promise((g,k)=>{var S=v=>{try{O(p.next(v))}catch(I){k(I)}},M=v=>{try{O(p.throw(v))}catch(I){k(I)}},O=v=>v.done?g(v.value):Promise.resolve(v.value).then(S,M);O((p=p.apply(Q,C)).next())});(self.webpackChunkdumi_theme_yunti_example=self.webpackChunkdumi_theme_yunti_example||[]).push([[47465],{13305:function(Q,C,p){var g;g={value:!0},C.AU=C.Ts=void 0;const k=p(88748),S=p(161),M=p(18254);var O;(function(_){_.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:M.Event.None}),_.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:M.Event.None});function K(B){const Y=B;return Y&&(Y===_.None||Y===_.Cancelled||S.boolean(Y.isCancellationRequested)&&!!Y.onCancellationRequested)}_.is=K})(O||(C.Ts=O={}));const v=Object.freeze(function(_,K){const B=(0,k.default)().timer.setTimeout(_.bind(K),0);return{dispose(){B.dispose()}}});class I{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?v:(this._emitter||(this._emitter=new M.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class N{get token(){return this._token||(this._token=new I),this._token}cancel(){this._token?this._token.cancel():this._token=O.Cancelled}dispose(){this._token?this._token instanceof I&&this._token.dispose():this._token=O.None}}C.AU=N},18254:function(Q,C,p){Object.defineProperty(C,"__esModule",{value:!0}),C.Emitter=C.Event=void 0;const g=p(88748);var k;(function(O){const v={dispose(){}};O.None=function(){return v}})(k||(C.Event=k={}));class S{add(v,I=null,N){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(v),this._contexts.push(I),Array.isArray(N)&&N.push({dispose:()=>this.remove(v,I)})}remove(v,I=null){if(!this._callbacks)return;let N=!1;for(let _=0,K=this._callbacks.length;_<K;_++)if(this._callbacks[_]===v)if(this._contexts[_]===I){this._callbacks.splice(_,1),this._contexts.splice(_,1);return}else N=!0;if(N)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...v){if(!this._callbacks)return[];const I=[],N=this._callbacks.slice(0),_=this._contexts.slice(0);for(let K=0,B=N.length;K<B;K++)try{I.push(N[K].apply(_[K],v))}catch(Y){(0,g.default)().console.error(Y)}return I}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class M{constructor(v){this._options=v}get event(){return this._event||(this._event=(v,I,N)=>{this._callbacks||(this._callbacks=new S),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(v,I);const _={dispose:()=>{this._callbacks&&(this._callbacks.remove(v,I),_.dispose=M._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(N)&&N.push(_),_}),this._event}fire(v){this._callbacks&&this._callbacks.invoke.call(this._callbacks,v)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}C.Emitter=M,M._noop=function(){}},161:function(Q,C){Object.defineProperty(C,"__esModule",{value:!0}),C.stringArray=C.array=C.func=C.error=C.number=C.string=C.boolean=void 0;function p(I){return I===!0||I===!1}C.boolean=p;function g(I){return typeof I=="string"||I instanceof String}C.string=g;function k(I){return typeof I=="number"||I instanceof Number}C.number=k;function S(I){return I instanceof Error}C.error=S;function M(I){return typeof I=="function"}C.func=M;function O(I){return Array.isArray(I)}C.array=O;function v(I){return O(I)&&I.every(N=>g(N))}C.stringArray=v},88748:function(Q,C){Object.defineProperty(C,"__esModule",{value:!0});let p;function g(){if(p===void 0)throw new Error("No runtime abstraction layer installed");return p}(function(k){function S(M){if(M===void 0)throw new Error("No runtime abstraction layer provided");p=M}k.install=S})(g||(g={})),C.default=g},3747:function(Q,C,p){var v;p.d(C,{M:function(){return O}});var g=p(20998),k=p(5635),S=(v=class extends g.T7{constructor(){super(["info","showInfo"])}},(0,g.eW)(v,"InfoTokenBuilder"),v),M={parser:{TokenBuilder:(0,g.eW)(()=>new S,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function O(I=k.uZ){const N=(0,k.f3)((0,k.Jr)(I),g.GS),_=(0,k.f3)((0,k.Q)({shared:N}),g.F_,M);return N.ServiceRegistry.register(_),{shared:N,Info:_}}(0,g.eW)(O,"createInfoServices")},10844:function(Q,C,p){var I,N;p.d(C,{l:function(){return v}});var g=p(20998),k=p(5635),S=(I=class extends g.T7{constructor(){super(["pie","showData"])}},(0,g.eW)(I,"PieTokenBuilder"),I),M=(N=class extends g.kb{runCustomConverter(K,B,Y){if(K.name==="PIE_SECTION_LABEL")return B.replace(/"/g,"").trim()}},(0,g.eW)(N,"PieValueConverter"),N),O={parser:{TokenBuilder:(0,g.eW)(()=>new S,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new M,"ValueConverter")}};function v(_=k.uZ){const K=(0,k.f3)((0,k.Jr)(_),g.GS),B=(0,k.f3)((0,k.Q)({shared:K}),g.WH,O);return K.ServiceRegistry.register(B),{shared:K,Pie:B}}(0,g.eW)(v,"createPieServices")},30063:function(Q,C,p){var v;p.d(C,{g:function(){return O}});var g=p(20998),k=p(5635),S=(v=class extends g.T7{constructor(){super(["packet-beta"])}},(0,g.eW)(v,"PacketTokenBuilder"),v),M={parser:{TokenBuilder:(0,g.eW)(()=>new S,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function O(I=k.uZ){const N=(0,k.f3)((0,k.Jr)(I),g.GS),_=(0,k.f3)((0,k.Q)({shared:N}),g.bb,M);return N.ServiceRegistry.register(_),{shared:N,Packet:_}}(0,g.eW)(O,"createPacketServices")},75734:function(Q,C,p){var I,N;p.d(C,{i:function(){return v}});var g=p(20998),k=p(5635),S=(I=class extends g.T7{constructor(){super(["architecture"])}},(0,g.eW)(I,"ArchitectureTokenBuilder"),I),M=(N=class extends g.kb{runCustomConverter(K,B,Y){if(K.name==="ARCH_ICON")return B.replace(/[()]/g,"").trim();if(K.name==="ARCH_TEXT_ICON")return B.replace(/["()]/g,"");if(K.name==="ARCH_TITLE")return B.replace(/[[\]]/g,"").trim()}},(0,g.eW)(N,"ArchitectureValueConverter"),N),O={parser:{TokenBuilder:(0,g.eW)(()=>new S,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new M,"ValueConverter")}};function v(_=k.uZ){const K=(0,k.f3)((0,k.Jr)(_),g.GS),B=(0,k.f3)((0,k.Q)({shared:K}),g.Qr,O);return K.ServiceRegistry.register(B),{shared:K,Architecture:B}}(0,g.eW)(v,"createArchitectureServices")},57166:function(Q,C,p){var v;p.d(C,{z:function(){return O}});var g=p(20998),k=p(5635),S=(v=class extends g.T7{constructor(){super(["gitGraph"])}},(0,g.eW)(v,"GitGraphTokenBuilder"),v),M={parser:{TokenBuilder:(0,g.eW)(()=>new S,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function O(I=k.uZ){const N=(0,k.f3)((0,k.Jr)(I),g.GS),_=(0,k.f3)((0,k.Q)({shared:N}),g.vn,M);return N.ServiceRegistry.register(_),{shared:N,GitGraph:_}}(0,g.eW)(O,"createGitGraphServices")},20998:function(Q,C,p){var ot,Rt,ct,kt,lt;p.d(C,{F_:function(){return Jr},GS:function(){return As},Qr:function(){return Rn},T7:function(){return In},WH:function(){return Rs},bb:function(){return Yn},eW:function(){return S},kb:function(){return kn},nr:function(){return Cs},vn:function(){return ks}});var g=p(5635),k=Object.defineProperty,S=(ie,oe)=>k(ie,"name",{value:oe,configurable:!0}),M="Statement",O="Architecture";function v(ie){return Pe.isInstance(ie,O)}S(v,"isArchitecture");var I="Branch";function N(ie){return Pe.isInstance(ie,I)}S(N,"isBranch");var _="Checkout",K="CherryPicking",B="Commit";function Y(ie){return Pe.isInstance(ie,B)}S(Y,"isCommit");var z="Common";function X(ie){return Pe.isInstance(ie,z)}S(X,"isCommon");var fe="GitGraph";function ue(ie){return Pe.isInstance(ie,fe)}S(ue,"isGitGraph");var de="Info";function Et(ie){return Pe.isInstance(ie,de)}S(Et,"isInfo");var vt="Merge";function At(ie){return Pe.isInstance(ie,vt)}S(At,"isMerge");var Yt="Packet";function nt(ie){return Pe.isInstance(ie,Yt)}S(nt,"isPacket");var zr="PacketBlock";function Yr(ie){return Pe.isInstance(ie,zr)}S(Yr,"isPacketBlock");var jn="Pie";function ms(ie){return Pe.isInstance(ie,jn)}S(ms,"isPie");var Xr="PieSection";function Kn(ie){return Pe.isInstance(ie,Xr)}S(Kn,"isPieSection");var Vn="Direction",Hn=(ot=class extends g.$v{getAllTypes(){return["Architecture","Branch","Checkout","CherryPicking","Commit","Common","Direction","Edge","GitGraph","Group","Info","Junction","Merge","Packet","PacketBlock","Pie","PieSection","Service","Statement"]}computeIsSubtype(oe,Se){switch(oe){case I:case _:case K:case B:case vt:return this.isSubtype(M,Se);case Vn:return this.isSubtype(fe,Se);default:return!1}}getReferenceType(oe){const Se=`${oe.container.$type}:${oe.property}`;switch(Se){default:throw new Error(`${Se} is not a valid reference id.`)}}getTypeMetaData(oe){switch(oe){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:oe,properties:[]}}}},S(ot,"MermaidAstReflection"),ot),Pe=new Hn,Xt,gs=S(()=>Xt!=null?Xt:Xt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"InfoGrammar"),En,ys=S(()=>En!=null?En:En=(0,g.sC)(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","name":"Packet","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`),"PacketGrammar"),Jt,zn=S(()=>Jt!=null?Jt:Jt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","name":"Pie","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"PieGrammar"),bt,Qt=S(()=>bt!=null?bt:bt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","name":"Architecture","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","fragment":true,"definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LeftPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RightPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Arrow","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"ArchitectureGrammar"),vn,qt=S(()=>vn!=null?vn:vn=(0,g.sC)(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","name":"GitGraph","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`),"GitGraphGrammar"),Ts={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},en={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},Es={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},An={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},vs={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},As={AstReflection:S(()=>new Hn,"AstReflection")},Jr={Grammar:S(()=>gs(),"Grammar"),LanguageMetaData:S(()=>Ts,"LanguageMetaData"),parser:{}},Yn={Grammar:S(()=>ys(),"Grammar"),LanguageMetaData:S(()=>en,"LanguageMetaData"),parser:{}},Rs={Grammar:S(()=>zn(),"Grammar"),LanguageMetaData:S(()=>Es,"LanguageMetaData"),parser:{}},Rn={Grammar:S(()=>Qt(),"Grammar"),LanguageMetaData:S(()=>An,"LanguageMetaData"),parser:{}},ks={Grammar:S(()=>qt(),"Grammar"),LanguageMetaData:S(()=>vs,"LanguageMetaData"),parser:{}},Xn=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,Qr=/accTitle[\t ]*:([^\n\r]*)/,Jn=/title([\t ][^\n\r]*|)/,Is={ACC_DESCR:Xn,ACC_TITLE:Qr,TITLE:Jn},kn=(Rt=class extends g.tI{runConverter(oe,Se,rt){let Fe=this.runCommonConverter(oe,Se,rt);return Fe===void 0&&(Fe=this.runCustomConverter(oe,Se,rt)),Fe===void 0?super.runConverter(oe,Se,rt):Fe}runCommonConverter(oe,Se,rt){const Fe=Is[oe.name];if(Fe===void 0)return;const Ue=Fe.exec(Se);if(Ue!==null){if(Ue[1]!==void 0)return Ue[1].trim().replace(/[\t ]{2,}/gm," ");if(Ue[2]!==void 0)return Ue[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},S(Rt,"AbstractMermaidValueConverter"),Rt),Cs=(ct=class extends kn{runCustomConverter(oe,Se,rt){}},S(ct,"CommonValueConverter"),ct),In=(kt=class extends g.PH{constructor(oe){super(),this.keywords=new Set(oe)}buildKeywordTokens(oe,Se,rt){const Fe=super.buildKeywordTokens(oe,Se,rt);return Fe.forEach(Ue=>{this.keywords.has(Ue.name)&&Ue.PATTERN!==void 0&&(Ue.PATTERN=new RegExp(Ue.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),Fe}},S(kt,"AbstractMermaidTokenBuilder"),kt),Ss=(lt=class extends In{},S(lt,"CommonTokenBuilder"),lt)},47465:function(Q,C,p){var B;p.d(C,{Qc:function(){return _}});var g=p(57166),k=p(3747),S=p(30063),M=p(10844),O=p(75734),v=p(20998),I={},N={info:(0,v.eW)(()=>j(this,null,function*(){const{createInfoServices:Y}=yield p.e(72036).then(p.bind(p,72036)),z=Y().Info.parser.LangiumParser;I.info=z}),"info"),packet:(0,v.eW)(()=>j(this,null,function*(){const{createPacketServices:Y}=yield p.e(19961).then(p.bind(p,19961)),z=Y().Packet.parser.LangiumParser;I.packet=z}),"packet"),pie:(0,v.eW)(()=>j(this,null,function*(){const{createPieServices:Y}=yield p.e(31264).then(p.bind(p,31264)),z=Y().Pie.parser.LangiumParser;I.pie=z}),"pie"),architecture:(0,v.eW)(()=>j(this,null,function*(){const{createArchitectureServices:Y}=yield p.e(75371).then(p.bind(p,75371)),z=Y().Architecture.parser.LangiumParser;I.architecture=z}),"architecture"),gitGraph:(0,v.eW)(()=>j(this,null,function*(){const{createGitGraphServices:Y}=yield p.e(84987).then(p.bind(p,84987)),z=Y().GitGraph.parser.LangiumParser;I.gitGraph=z}),"gitGraph")};function _(Y,z){return j(this,null,function*(){const X=N[Y];if(!X)throw new Error(`Unknown diagram type: ${Y}`);I[Y]||(yield X());const ue=I[Y].parse(z);if(ue.lexerErrors.length>0||ue.parserErrors.length>0)throw new K(ue);return ue.value})}(0,v.eW)(_,"parse");var K=(B=class extends Error{constructor(z){const X=z.lexerErrors.map(ue=>ue.message).join(`
`),fe=z.parserErrors.map(ue=>ue.message).join(`
`);super(`Parsing failed: ${X} ${fe}`),this.result=z}},(0,v.eW)(B,"MermaidParseError"),B)},5635:function(Q,C,p){p.d(C,{$v:function(){return O},PH:function(){return ll},tI:function(){return ul},uZ:function(){return Dl},Q:function(){return wl},Jr:function(){return Ol},f3:function(){return fs},sC:function(){return Jm}});function g(n){return typeof n=="object"&&n!==null&&typeof n.$type=="string"}function k(n){return typeof n=="object"&&n!==null&&typeof n.$refText=="string"}function S(n){return typeof n=="object"&&n!==null&&typeof n.name=="string"&&typeof n.type=="string"&&typeof n.path=="string"}function M(n){return typeof n=="object"&&n!==null&&g(n.container)&&k(n.reference)&&typeof n.message=="string"}class O{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return g(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});const i=r[t];if(i!==void 0)return i;{const s=this.computeIsSubtype(e,t);return r[t]=s,s}}getAllSubTypes(e){const t=this.allSubtypes[e];if(t)return t;{const r=this.getAllTypes(),i=[];for(const s of r)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}}function v(n){return typeof n=="object"&&n!==null&&Array.isArray(n.content)}function I(n){return typeof n=="object"&&n!==null&&typeof n.tokenType=="object"}function N(n){return v(n)&&typeof n.fullText=="string"}class _{constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let t=0,r=e.next();for(;!r.done;)t++,r=e.next();return t}toArray(){const e=[],t=this.iterator();let r;do r=t.next(),r.value!==void 0&&e.push(r.value);while(!r.done);return e}toSet(){return new Set(this)}toMap(e,t){const r=this.map(i=>[e?e(i):i,t?t(i):i]);return new Map(r)}toString(){return this.join()}concat(e){const t=e[Symbol.iterator]();return new _(()=>({first:this.startFn(),firstDone:!1}),r=>{let i;if(!r.firstDone){do if(i=this.nextFn(r.first),!i.done)return i;while(!i.done);r.firstDone=!0}do if(i=t.next(),!i.done)return i;while(!i.done);return z})}join(e=","){const t=this.iterator();let r="",i,s=!1;do i=t.next(),i.done||(s&&(r+=e),r+=K(i.value)),s=!0;while(!i.done);return r}indexOf(e,t=0){const r=this.iterator();let i=0,s=r.next();for(;!s.done;){if(i>=t&&s.value===e)return i;s=r.next(),i++}return-1}every(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(!e(r.value))return!1;r=t.next()}return!0}some(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(e(r.value))return!0;r=t.next()}return!1}forEach(e){const t=this.iterator();let r=0,i=t.next();for(;!i.done;)e(i.value,r),i=t.next(),r++}map(e){return new _(this.startFn,t=>{const{done:r,value:i}=this.nextFn(t);return r?z:{done:!1,value:e(i)}})}filter(e){return new _(this.startFn,t=>{let r;do if(r=this.nextFn(t),!r.done&&e(r.value))return r;while(!r.done);return z})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,t){const r=this.iterator();let i=t,s=r.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=r.next();return i}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,r){const i=e.next();if(i.done)return r;const s=this.recursiveReduce(e,t,r);return s===void 0?i.value:t(s,i.value)}find(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(e(r.value))return r.value;r=t.next()}}findIndex(e){const t=this.iterator();let r=0,i=t.next();for(;!i.done;){if(e(i.value))return r;i=t.next(),r++}return-1}includes(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(r.value===e)return!0;r=t.next()}return!1}flatMap(e){return new _(()=>({this:this.startFn()}),t=>{do{if(t.iterator){const s=t.iterator.next();if(s.done)t.iterator=void 0;else return s}const{done:r,value:i}=this.nextFn(t.this);if(!r){const s=e(i);if(B(s))t.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(t.iterator);return z})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const t=e>1?this.flat(e-1):this;return new _(()=>({this:t.startFn()}),r=>{do{if(r.iterator){const a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}const{done:i,value:s}=t.nextFn(r.this);if(!i)if(B(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(r.iterator);return z})}head(){const t=this.iterator().next();if(!t.done)return t.value}tail(e=1){return new _(()=>{const t=this.startFn();for(let r=0;r<e;r++)if(this.nextFn(t).done)return t;return t},this.nextFn)}limit(e){return new _(()=>({size:0,state:this.startFn()}),t=>(t.size++,t.size>e?z:this.nextFn(t.state)))}distinct(e){const t=new Set;return this.filter(r=>{const i=e?e(r):r;return t.has(i)?!1:(t.add(i),!0)})}exclude(e,t){const r=new Set;for(const i of e){const s=t?t(i):i;r.add(s)}return this.filter(i=>{const s=t?t(i):i;return!r.has(s)})}}function K(n){return typeof n=="string"?n:typeof n=="undefined"?"undefined":typeof n.toString=="function"?n.toString():Object.prototype.toString.call(n)}function B(n){return!!n&&typeof n[Symbol.iterator]=="function"}const Y=new _(()=>{},()=>z),z=Object.freeze({done:!0,value:void 0});function X(...n){if(n.length===1){const e=n[0];if(e instanceof _)return e;if(B(e))return new _(()=>e[Symbol.iterator](),t=>t.next());if(typeof e.length=="number")return new _(()=>({index:0}),t=>t.index<e.length?{done:!1,value:e[t.index++]}:z)}return n.length>1?new _(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<n.length){const t=n[e.collIndex++];B(t)?e.iterator=t[Symbol.iterator]():t&&typeof t.length=="number"&&(e.array=t)}}while(e.iterator||e.array||e.collIndex<n.length);return z}):Y}class fe extends _{constructor(e,t,r){super(()=>({iterators:r!=null&&r.includeRoot?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const a=i.iterators[i.iterators.length-1].next();if(a.done)i.iterators.pop();else return i.iterators.push(t(a.value)[Symbol.iterator]()),a}return z})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var ue;(function(n){function e(s){return s.reduce((a,o)=>a+o,0)}n.sum=e;function t(s){return s.reduce((a,o)=>a*o,0)}n.product=t;function r(s){return s.reduce((a,o)=>Math.min(a,o))}n.min=r;function i(s){return s.reduce((a,o)=>Math.max(a,o))}n.max=i})(ue||(ue={}));function de(n){return new fe(n,e=>v(e)?e.content:[],{includeRoot:!0})}function Et(n){return de(n).filter(isLeafCstNode)}function vt(n,e){for(;n.container;)if(n=n.container,n===e)return!0;return!1}function At(n){return{start:{character:n.startColumn-1,line:n.startLine-1},end:{character:n.endColumn,line:n.endLine-1}}}function Yt(n){if(!n)return;const{offset:e,end:t,range:r}=n;return{range:r,offset:e,end:t,length:t-e}}var nt;(function(n){n[n.Before=0]="Before",n[n.After=1]="After",n[n.OverlapFront=2]="OverlapFront",n[n.OverlapBack=3]="OverlapBack",n[n.Inside=4]="Inside"})(nt||(nt={}));function zr(n,e){if(n.end.line<e.start.line||n.end.line===e.start.line&&n.end.character<n.start.character)return nt.Before;if(n.start.line>e.end.line||n.start.line===e.end.line&&n.start.character>e.end.character)return nt.After;const t=n.start.line>e.start.line||n.start.line===e.start.line&&n.start.character>=e.start.character,r=n.end.line<e.end.line||n.end.line===e.end.line&&n.end.character<=e.end.character;return t&&r?nt.Inside:t?nt.OverlapBack:nt.OverlapFront}function Yr(n,e){return zr(n,e)>nt.After}const jn=/^[\w\p{L}]$/u;function ms(n,e,t=jn){if(n){if(e>0){const r=e-n.offset,i=n.text.charAt(r);t.test(i)||e--}return Vn(n,e)}}function Xr(n,e){if(n){const t=Xt(n,!0);if(t&&Kn(t,e))return t;if(N(n)){const r=n.content.findIndex(i=>!i.hidden);for(let i=r-1;i>=0;i--){const s=n.content[i];if(Kn(s,e))return s}}}}function Kn(n,e){return I(n)&&e.includes(n.tokenType.name)}function Vn(n,e){if(isLeafCstNode(n))return n;if(isCompositeCstNode(n)){const t=Pe(n,e,!1);if(t)return Vn(t,e)}}function Hn(n,e){if(isLeafCstNode(n))return n;if(isCompositeCstNode(n)){const t=Pe(n,e,!0);if(t)return Hn(t,e)}}function Pe(n,e,t){let r=0,i=n.content.length-1,s;for(;r<=i;){const a=Math.floor((r+i)/2),o=n.content[a];if(o.offset<=e&&o.end>e)return o;o.end<=e?(s=t?o:void 0,r=a+1):i=a-1}return s}function Xt(n,e=!0){for(;n.container;){const t=n.container;let r=t.content.indexOf(n);for(;r>0;){r--;const i=t.content[r];if(e||!i.hidden)return i}n=t}}function gs(n,e=!0){for(;n.container;){const t=n.container;let r=t.content.indexOf(n);const i=t.content.length-1;for(;r<i;){r++;const s=t.content[r];if(e||!s.hidden)return s}n=t}}function En(n){if(n.range.start.character===0)return n;const e=n.range.start.line;let t=n,r;for(;n.container;){const i=n.container,s=r!=null?r:i.content.indexOf(n);if(s===0?(n=i,r=void 0):(r=s-1,n=i.content[r]),n.range.start.line!==e)break;t=n}return t}function ys(n,e){const t=Jt(n,e);return t?t.parent.content.slice(t.a+1,t.b):[]}function Jt(n,e){const t=zn(n),r=zn(e);let i;for(let s=0;s<t.length&&s<r.length;s++){const a=t[s],o=r[s];if(a.parent===o.parent)i={parent:a.parent,a:a.index,b:o.index};else break}return i}function zn(n){const e=[];for(;n.container;){const t=n.container,r=t.content.indexOf(n);e.push({parent:t,index:r}),n=t}return e.reverse()}class bt extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}function Qt(n){throw new Error("Error! The input value was not handled.")}const vn={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},qt="AbstractRule";function Ts(n){return U.isInstance(n,qt)}const en="AbstractType";function Es(n){return U.isInstance(n,en)}const An="Condition";function vs(n){return U.isInstance(n,An)}function As(n){return Jr(n)||n==="current"||n==="entry"||n==="extends"||n==="false"||n==="fragment"||n==="grammar"||n==="hidden"||n==="import"||n==="interface"||n==="returns"||n==="terminal"||n==="true"||n==="type"||n==="infer"||n==="infers"||n==="with"||typeof n=="string"&&/\^?[_a-zA-Z][\w_]*/.test(n)}function Jr(n){return n==="string"||n==="number"||n==="boolean"||n==="Date"||n==="bigint"}const Yn="TypeDefinition";function Rs(n){return U.isInstance(n,Yn)}const Rn="ValueLiteral";function ks(n){return U.isInstance(n,Rn)}const Xn="AbstractElement";function Qr(n){return U.isInstance(n,Xn)}const Jn="ArrayLiteral";function Is(n){return U.isInstance(n,Jn)}const kn="ArrayType";function Cs(n){return U.isInstance(n,kn)}const In="BooleanLiteral";function Ss(n){return U.isInstance(n,In)}const ot="Conjunction";function Rt(n){return U.isInstance(n,ot)}const ct="Disjunction";function kt(n){return U.isInstance(n,ct)}const lt="Grammar";function ie(n){return U.isInstance(n,lt)}const oe="GrammarImport";function Se(n){return U.isInstance(n,oe)}const rt="InferredType";function Fe(n){return U.isInstance(n,rt)}const Ue="Interface";function _s(n){return U.isInstance(n,Ue)}const Bl="NamedArgument";function tg(n){return U.isInstance(n,Bl)}const Ns="Negation";function Wl(n){return U.isInstance(n,Ns)}const xs="NumberLiteral";function ng(n){return U.isInstance(n,xs)}const Ls="Parameter";function rg(n){return U.isInstance(n,Ls)}const ws="ParameterReference";function jl(n){return U.isInstance(n,ws)}const Os="ParserRule";function He(n){return U.isInstance(n,Os)}const Ps="ReferenceType";function ig(n){return U.isInstance(n,Ps)}const Kl="ReturnType";function Vl(n){return U.isInstance(n,Kl)}const $s="SimpleType";function Hl(n){return U.isInstance(n,$s)}const bs="StringLiteral";function sg(n){return U.isInstance(n,bs)}const qr="TerminalRule";function Mt(n){return U.isInstance(n,qr)}const Ms="Type";function Ds(n){return U.isInstance(n,Ms)}const zl="TypeAttribute";function ag(n){return U.isInstance(n,zl)}const Zs="UnionType";function og(n){return U.isInstance(n,Zs)}const Fs="Action";function Qn(n){return U.isInstance(n,Fs)}const Us="Alternatives";function Gs(n){return U.isInstance(n,Us)}const Bs="Assignment";function Dt(n){return U.isInstance(n,Bs)}const Ws="CharacterRange";function Yl(n){return U.isInstance(n,Ws)}const js="CrossReference";function ei(n){return U.isInstance(n,js)}const Ks="EndOfFile";function Xl(n){return U.isInstance(n,Ks)}const Vs="Group";function ti(n){return U.isInstance(n,Vs)}const Hs="Keyword";function Zt(n){return U.isInstance(n,Hs)}const zs="NegatedToken";function Jl(n){return U.isInstance(n,zs)}const Ys="RegexToken";function Ql(n){return U.isInstance(n,Ys)}const Xs="RuleCall";function Ft(n){return U.isInstance(n,Xs)}const Js="TerminalAlternatives";function ql(n){return U.isInstance(n,Js)}const Qs="TerminalGroup";function eu(n){return U.isInstance(n,Qs)}const qs="TerminalRuleCall";function ea(n){return U.isInstance(n,qs)}const ta="UnorderedGroup";function na(n){return U.isInstance(n,ta)}const ra="UntilToken";function tu(n){return U.isInstance(n,ra)}const ia="Wildcard";function nu(n){return U.isInstance(n,ia)}class sa extends O{getAllTypes(){return["AbstractElement","AbstractRule","AbstractType","Action","Alternatives","ArrayLiteral","ArrayType","Assignment","BooleanLiteral","CharacterRange","Condition","Conjunction","CrossReference","Disjunction","EndOfFile","Grammar","GrammarImport","Group","InferredType","Interface","Keyword","NamedArgument","NegatedToken","Negation","NumberLiteral","Parameter","ParameterReference","ParserRule","ReferenceType","RegexToken","ReturnType","RuleCall","SimpleType","StringLiteral","TerminalAlternatives","TerminalGroup","TerminalRule","TerminalRuleCall","Type","TypeAttribute","TypeDefinition","UnionType","UnorderedGroup","UntilToken","ValueLiteral","Wildcard"]}computeIsSubtype(e,t){switch(e){case Fs:case Us:case Bs:case Ws:case js:case Ks:case Vs:case Hs:case zs:case Ys:case Xs:case Js:case Qs:case qs:case ta:case ra:case ia:return this.isSubtype(Xn,t);case Jn:case xs:case bs:return this.isSubtype(Rn,t);case kn:case Ps:case $s:case Zs:return this.isSubtype(Yn,t);case In:return this.isSubtype(An,t)||this.isSubtype(Rn,t);case ot:case ct:case Ns:case ws:return this.isSubtype(An,t);case rt:case Ue:case Ms:return this.isSubtype(en,t);case Os:return this.isSubtype(qt,t)||this.isSubtype(en,t);case qr:return this.isSubtype(qt,t);default:return!1}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return en;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return qt;case"Grammar:usedGrammars":return lt;case"NamedArgument:parameter":case"ParameterReference:parameter":return Ls;case"TerminalRuleCall:rule":return qr;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"AbstractElement":return{name:"AbstractElement",properties:[{name:"cardinality"},{name:"lookahead"}]};case"ArrayLiteral":return{name:"ArrayLiteral",properties:[{name:"elements",defaultValue:[]}]};case"ArrayType":return{name:"ArrayType",properties:[{name:"elementType"}]};case"BooleanLiteral":return{name:"BooleanLiteral",properties:[{name:"true",defaultValue:!1}]};case"Conjunction":return{name:"Conjunction",properties:[{name:"left"},{name:"right"}]};case"Disjunction":return{name:"Disjunction",properties:[{name:"left"},{name:"right"}]};case"Grammar":return{name:"Grammar",properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case"GrammarImport":return{name:"GrammarImport",properties:[{name:"path"}]};case"InferredType":return{name:"InferredType",properties:[{name:"name"}]};case"Interface":return{name:"Interface",properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case"NamedArgument":return{name:"NamedArgument",properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case"Negation":return{name:"Negation",properties:[{name:"value"}]};case"NumberLiteral":return{name:"NumberLiteral",properties:[{name:"value"}]};case"Parameter":return{name:"Parameter",properties:[{name:"name"}]};case"ParameterReference":return{name:"ParameterReference",properties:[{name:"parameter"}]};case"ParserRule":return{name:"ParserRule",properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case"ReferenceType":return{name:"ReferenceType",properties:[{name:"referenceType"}]};case"ReturnType":return{name:"ReturnType",properties:[{name:"name"}]};case"SimpleType":return{name:"SimpleType",properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case"StringLiteral":return{name:"StringLiteral",properties:[{name:"value"}]};case"TerminalRule":return{name:"TerminalRule",properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case"Type":return{name:"Type",properties:[{name:"name"},{name:"type"}]};case"TypeAttribute":return{name:"TypeAttribute",properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case"UnionType":return{name:"UnionType",properties:[{name:"types",defaultValue:[]}]};case"Action":return{name:"Action",properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case"Alternatives":return{name:"Alternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"Assignment":return{name:"Assignment",properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case"CharacterRange":return{name:"CharacterRange",properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case"CrossReference":return{name:"CrossReference",properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case"EndOfFile":return{name:"EndOfFile",properties:[{name:"cardinality"},{name:"lookahead"}]};case"Group":return{name:"Group",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case"Keyword":return{name:"Keyword",properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case"NegatedToken":return{name:"NegatedToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"RegexToken":return{name:"RegexToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case"RuleCall":return{name:"RuleCall",properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"TerminalAlternatives":return{name:"TerminalAlternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalGroup":return{name:"TerminalGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalRuleCall":return{name:"TerminalRuleCall",properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"UnorderedGroup":return{name:"UnorderedGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"UntilToken":return{name:"UntilToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"Wildcard":return{name:"Wildcard",properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}const U=new sa;function aa(n){for(const[e,t]of Object.entries(n))e.startsWith("$")||(Array.isArray(t)?t.forEach((r,i)=>{g(r)&&(r.$container=n,r.$containerProperty=e,r.$containerIndex=i)}):g(t)&&(t.$container=n,t.$containerProperty=e))}function qn(n,e){let t=n;for(;t;){if(e(t))return t;t=t.$container}}function cg(n,e){let t=n;for(;t;){if(e(t))return!0;t=t.$container}return!1}function Xe(n){const t=ru(n).$document;if(!t)throw new Error("AST node has no document.");return t}function ru(n){for(;n.$container;)n=n.$container;return n}function ni(n,e){if(!n)throw new Error("Node must be an AstNode.");const t=e==null?void 0:e.range;return new _(()=>({keys:Object.keys(n),keyIndex:0,arrayIndex:0}),r=>{for(;r.keyIndex<r.keys.length;){const i=r.keys[r.keyIndex];if(!i.startsWith("$")){const s=n[i];if(g(s)){if(r.keyIndex++,ri(s,t))return{done:!1,value:s}}else if(Array.isArray(s)){for(;r.arrayIndex<s.length;){const a=r.arrayIndex++,o=s[a];if(g(o)&&ri(o,t))return{done:!1,value:o}}r.arrayIndex=0}}r.keyIndex++}return z})}function Cn(n,e){if(!n)throw new Error("Root node must be an AstNode.");return new fe(n,t=>ni(t,e))}function Ut(n,e){if(n){if(e!=null&&e.range&&!ri(n,e.range))return new fe(n,()=>[])}else throw new Error("Root node must be an AstNode.");return new fe(n,t=>ni(t,e),{includeRoot:!0})}function ri(n,e){var t;if(!e)return!0;const r=(t=n.$cstNode)===null||t===void 0?void 0:t.range;return r?Yr(r,e):!1}function ii(n){return new _(()=>({keys:Object.keys(n),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const t=e.keys[e.keyIndex];if(!t.startsWith("$")){const r=n[t];if(k(r))return e.keyIndex++,{done:!1,value:{reference:r,container:n,property:t}};if(Array.isArray(r)){for(;e.arrayIndex<r.length;){const i=e.arrayIndex++,s=r[i];if(k(s))return{done:!1,value:{reference:s,container:n,property:t,index:i}}}e.arrayIndex=0}}e.keyIndex++}return z})}function lg(n,e=Xe(n).parseResult.value){const t=[];return Ut(e).forEach(r=>{ii(r).forEach(i=>{i.reference.ref===n&&t.push(i.reference)})}),stream(t)}function iu(n,e){const t=n.getTypeMetaData(e.$type),r=e;for(const i of t.properties)i.defaultValue!==void 0&&r[i.name]===void 0&&(r[i.name]=oa(i.defaultValue))}function oa(n){return Array.isArray(n)?[...n.map(oa)]:n}function ca(n,e){const t={$type:n.$type};for(const[r,i]of Object.entries(n))if(!r.startsWith("$"))if(isAstNode(i))t[r]=ca(i,e);else if(isReference(i))t[r]=e(t,r,i.$refNode,i.$refText);else if(Array.isArray(i)){const s=[];for(const a of i)isAstNode(a)?s.push(ca(a,e)):isReference(a)?s.push(e(t,r,a.$refNode,a.$refText)):s.push(a);t[r]=s}else t[r]=i;return aa(t),t}function F(n){return n.charCodeAt(0)}function si(n,e){Array.isArray(n)?n.forEach(function(t){e.push(t)}):e.push(n)}function Sn(n,e){if(n[e]===!0)throw"duplicate flag "+e;const t=n[e];n[e]=!0}function tn(n){if(n===void 0)throw Error("Internal Error - Should never get here!");return!0}function er(){throw Error("Internal Error - Should never get here!")}function la(n){return n.type==="Character"}const tr=[];for(let n=F("0");n<=F("9");n++)tr.push(n);const nr=[F("_")].concat(tr);for(let n=F("a");n<=F("z");n++)nr.push(n);for(let n=F("A");n<=F("Z");n++)nr.push(n);const ua=[F(" "),F("\f"),F(`
`),F("\r"),F("	"),F("\v"),F("	"),F("\xA0"),F("\u1680"),F("\u2000"),F("\u2001"),F("\u2002"),F("\u2003"),F("\u2004"),F("\u2005"),F("\u2006"),F("\u2007"),F("\u2008"),F("\u2009"),F("\u200A"),F("\u2028"),F("\u2029"),F("\u202F"),F("\u205F"),F("\u3000"),F("\uFEFF")],su=/[0-9a-fA-F]/,rr=/[0-9]/,au=/[1-9]/;class da{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Sn(r,"global");break;case"i":Sn(r,"ignoreCase");break;case"m":Sn(r,"multiLine");break;case"u":Sn(r,"unicode");break;case"y":Sn(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}tn(t);const r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return er()}quantifier(e=!1){let t;const r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),t={atLeast:i,atMost:s}):t={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;tn(t);break}if(!(e===!0&&t===void 0)&&tn(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),tn(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):er()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[F(`
`),F("\r"),F("\u2028"),F("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=tr;break;case"D":e=tr,t=!0;break;case"s":e=ua;break;case"S":e=ua,t=!0;break;case"w":e=nr;break;case"W":e=nr,t=!0;break}return tn(e)?{type:"Set",value:e,complement:t}:er()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=F("\f");break;case"n":e=F(`
`);break;case"r":e=F("\r");break;case"t":e=F("	");break;case"v":e=F("\v");break}return tn(e)?{type:"Character",value:e}:er()}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:F("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:F(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:F(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const r=this.classAtom(),i=r.type==="Character";if(la(r)&&this.isRangeDash()){this.consumeChar("-");const s=this.classAtom(),a=s.type==="Character";if(la(s)){if(s.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:s.value})}else si(r.value,e),e.push(F("-")),si(s.value,e)}else si(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:F("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(au.test(e)===!1)throw Error("Expecting a positive integer");for(;rr.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(rr.test(e)===!1)throw Error("Expecting an integer");for(;rr.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:F(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return rr.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch(t){return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let i=0;i<e;i++){const s=this.popChar();if(su.test(s)===!1)throw Error("Expecting a HexDecimal digits");t+=s}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class ir{visitChildren(e){for(const t in e){const r=e[t];e.hasOwnProperty(t)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const ou=/\r?\n/gm,fa=new da;class cu extends ir{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const t=String.fromCharCode(e.value);if(!this.multiline&&t===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=sr(t);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitSet(e){if(!this.multiline){const t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=!!`
`.match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}}const Gt=new cu;function ug(n){try{typeof n!="string"&&(n=n.source),n=`/${n}/`;const e=fa.pattern(n),t=[];for(const r of e.value.value)Gt.reset(n),Gt.visit(r),t.push({start:Gt.startRegexp,end:Gt.endRegex});return t}catch(e){return[]}}function lu(n){try{return typeof n=="string"&&(n=new RegExp(n)),n=n.toString(),Gt.reset(n),Gt.visit(fa.pattern(n)),Gt.multiline}catch(e){return!1}}function ha(n){return(typeof n=="string"?new RegExp(n):n).test(" ")}function sr(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uu(n){return Array.prototype.map.call(n,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:sr(e)).join("")}function du(n,e){const t=fu(n),r=e.match(t);return!!r&&r[0].length>0}function fu(n){typeof n=="string"&&(n=new RegExp(n));const e=n,t=n.source;let r=0;function i(){let s="",a;function o(l){s+=t.substr(r,l),r+=l}function c(l){s+="(?:"+t.substr(r,l)+"|$)",r+=l}for(;r<t.length;)switch(t[r]){case"\\":switch(t[r+1]){case"c":c(3);break;case"x":c(4);break;case"u":e.unicode?t[r+2]==="{"?c(t.indexOf("}",r)-r+1):c(6):c(2);break;case"p":case"P":e.unicode?c(t.indexOf("}",r)-r+1):c(2);break;case"k":c(t.indexOf(">",r)-r+1);break;default:c(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=r,a=a.exec(t)||[],c(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=r,a=a.exec(t),a?o(a[0].length):c(1);break;case"(":if(t[r+1]==="?")switch(t[r+2]){case":":s+="(?:",r+=3,s+=i()+"|$)";break;case"=":s+="(?=",r+=3,s+=i()+")";break;case"!":a=r,r+=3,i(),s+=t.substr(a,r-a);break;case"<":switch(t[r+3]){case"=":case"!":a=r,r+=4,i(),s+=t.substr(a,r-a);break;default:o(t.indexOf(">",r)-r+1),s+=i()+"|$)";break}break}else o(1),s+=i()+"|$)";break;case")":return++r,s;default:c(1);break}return s}return new RegExp(i(),n.flags)}function hu(n){return n.rules.find(e=>He(e)&&e.entry)}function pu(n){return n.rules.filter(e=>Mt(e)&&e.hidden)}function pa(n,e){const t=new Set,r=hu(n);if(!r)return new Set(n.rules);const i=[r].concat(pu(n));for(const a of i)ma(a,t,e);const s=new Set;for(const a of n.rules)(t.has(a.name)||Mt(a)&&a.hidden)&&s.add(a);return s}function ma(n,e,t){e.add(n.name),Cn(n).forEach(r=>{if(Ft(r)||t&&ea(r)){const i=r.rule.ref;i&&!e.has(i.name)&&ma(i,e,t)}})}function mu(n){if(n.terminal)return n.terminal;if(n.type.ref){const e=Ta(n.type.ref);return e==null?void 0:e.terminal}}function gu(n){return n.hidden&&!li(n).test(" ")}function yu(n,e){return!n||!e?[]:ai(n,e,n.astNode,!0)}function ga(n,e,t){if(!n||!e)return;const r=ai(n,e,n.astNode,!0);if(r.length!==0)return t!==void 0?t=Math.max(0,Math.min(t,r.length-1)):t=0,r[t]}function ai(n,e,t,r){if(!r){const i=qn(n.grammarSource,Dt);if(i&&i.feature===e)return[n]}return v(n)&&n.astNode===t?n.content.flatMap(i=>ai(i,e,t,!1)):[]}function dg(n,e){return n?ya(n,e,n==null?void 0:n.astNode):[]}function Tu(n,e,t){if(!n)return;const r=ya(n,e,n==null?void 0:n.astNode);if(r.length!==0)return t!==void 0?t=Math.max(0,Math.min(t,r.length-1)):t=0,r[t]}function ya(n,e,t){if(n.astNode!==t)return[];if(Zt(n.grammarSource)&&n.grammarSource.value===e)return[n];const r=de(n).iterator();let i;const s=[];do if(i=r.next(),!i.done){const a=i.value;a.astNode===t?Zt(a.grammarSource)&&a.grammarSource.value===e&&s.push(a):r.prune()}while(!i.done);return s}function Eu(n){var e;const t=n.astNode;for(;t===((e=n.container)===null||e===void 0?void 0:e.astNode);){const r=qn(n.grammarSource,Dt);if(r)return r;n=n.container}}function Ta(n){let e=n;return Fe(e)&&(Qn(e.$container)?e=e.$container.$container:He(e.$container)?e=e.$container:Qt(e.$container)),Ea(n,e,new Map)}function Ea(n,e,t){var r;function i(s,a){let o;return qn(s,Dt)||(o=Ea(a,a,t)),t.set(n,o),o}if(t.has(n))return t.get(n);t.set(n,void 0);for(const s of Cn(e)){if(Dt(s)&&s.feature.toLowerCase()==="name")return t.set(n,s),s;if(Ft(s)&&He(s.rule.ref))return i(s,s.rule.ref);if(Hl(s)&&(!((r=s.typeRef)===null||r===void 0)&&r.ref))return i(s,s.typeRef.ref)}}function vu(n){const e=n.$container;if(ast.isGroup(e)){const t=e.elements,r=t.indexOf(n);for(let i=r-1;i>=0;i--){const s=t[i];if(ast.isAction(s))return s;{const a=streamAllContents(t[i]).find(ast.isAction);if(a)return a}}}if(ast.isAbstractElement(e))return vu(e)}function fg(n,e){return n==="?"||n==="*"||ast.isGroup(e)&&!!e.guardCondition}function hg(n){return n==="*"||n==="+"}function pg(n){return n==="+="}function oi(n){return va(n,new Set)}function va(n,e){if(e.has(n))return!0;e.add(n);for(const t of Cn(n))if(Ft(t)){if(!t.rule.ref||He(t.rule.ref)&&!va(t.rule.ref,e))return!1}else{if(Dt(t))return!1;if(Qn(t))return!1}return!!n.definition}function mg(n){return ci(n.type,new Set)}function ci(n,e){if(e.has(n))return!0;if(e.add(n),ast.isArrayType(n))return!1;if(ast.isReferenceType(n))return!1;if(ast.isUnionType(n))return n.types.every(t=>ci(t,e));if(ast.isSimpleType(n)){if(n.primitiveType!==void 0)return!0;if(n.stringType!==void 0)return!0;if(n.typeRef!==void 0){const t=n.typeRef.ref;return ast.isType(t)?ci(t.type,e):!1}else return!1}else return!1}function Aa(n){if(n.inferredType)return n.inferredType.name;if(n.dataType)return n.dataType;if(n.returnType){const e=n.returnType.ref;if(e){if(He(e))return e.name;if(_s(e)||Ds(e))return e.name}}}function ar(n){var e;if(He(n))return oi(n)?n.name:(e=Aa(n))!==null&&e!==void 0?e:n.name;if(_s(n)||Ds(n)||Vl(n))return n.name;if(Qn(n)){const t=Au(n);if(t)return t}else if(Fe(n))return n.name;throw new Error("Cannot get name of Unknown Type")}function Au(n){var e;if(n.inferredType)return n.inferredType.name;if(!((e=n.type)===null||e===void 0)&&e.ref)return ar(n.type.ref)}function Ru(n){var e,t,r;return Mt(n)?(t=(e=n.type)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:"string":oi(n)?n.name:(r=Aa(n))!==null&&r!==void 0?r:n.name}function li(n){const e={s:!1,i:!1,u:!1},t=nn(n.definition,e),r=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(t,r)}const ui=/[\s\S]/.source;function nn(n,e){if(ql(n))return ku(n);if(eu(n))return Iu(n);if(Yl(n))return _u(n);if(ea(n)){const t=n.rule.ref;if(!t)throw new Error("Missing rule reference.");return ut(nn(t.definition),{cardinality:n.cardinality,lookahead:n.lookahead})}else{if(Jl(n))return Su(n);if(tu(n))return Cu(n);if(Ql(n)){const t=n.regex.lastIndexOf("/"),r=n.regex.substring(1,t),i=n.regex.substring(t+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),ut(r,{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1})}else{if(nu(n))return ut(ui,{cardinality:n.cardinality,lookahead:n.lookahead});throw new Error(`Invalid terminal element: ${n==null?void 0:n.$type}`)}}}function ku(n){return ut(n.elements.map(e=>nn(e)).join("|"),{cardinality:n.cardinality,lookahead:n.lookahead})}function Iu(n){return ut(n.elements.map(e=>nn(e)).join(""),{cardinality:n.cardinality,lookahead:n.lookahead})}function Cu(n){return ut(`${ui}*?${nn(n.terminal)}`,{cardinality:n.cardinality,lookahead:n.lookahead})}function Su(n){return ut(`(?!${nn(n.terminal)})${ui}*?`,{cardinality:n.cardinality,lookahead:n.lookahead})}function _u(n){return n.right?ut(`[${di(n.left)}-${di(n.right)}]`,{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1}):ut(di(n.left),{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1})}function di(n){return sr(n.value)}function ut(n,e){var t;return(e.wrap!==!1||e.lookahead)&&(n=`(${(t=e.lookahead)!==null&&t!==void 0?t:""}${n})`),e.cardinality?`${n}${e.cardinality}`:n}function Nu(n){const e=[],t=n.Grammar;for(const r of t.rules)Mt(r)&&gu(r)&&lu(li(r))&&e.push(r.name);return{multilineCommentRules:e,nameRegexp:jn}}var D=p(14164),pe=p(96995),te=p(59316),$=p(72725),Z=p(57879),Ee=p(81263);function Ra(n){function e(){}e.prototype=n;const t=new e;function r(){return typeof t.bar}return r(),r(),n;(0,eval)(n)}var ka=p(74780),or=p(43119);function xu(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:(0,or.Z)(e),(0,ka.Z)(n,e<0?0:e,r)):[]}var ve=xu,$e=p(98013),Lu=p(69092),wu=p(12042),Ou=p(8884),Ia=p(66059),Pu=p(96953),rn=p(13127),$u=Object.prototype,bu=$u.hasOwnProperty,Mu=(0,Ou.Z)(function(n,e){if((0,Pu.Z)(e)||(0,Ia.Z)(e)){(0,wu.Z)(e,(0,rn.Z)(e),n);return}for(var t in e)bu.call(e,t)&&(0,Lu.Z)(n,t,e[t])}),Ge=Mu,Ca=p(70731),sn=p(44065),Du=p(5669),Zu=p(49161);function Fu(n,e){if(n==null)return{};var t=(0,Ca.Z)((0,Zu.Z)(n),function(r){return[r]});return e=(0,sn.Z)(e),(0,Du.Z)(n,t,function(r,i){return e(r,i[0])})}var Je=Fu,Uu=p(12689),Gu=p(56070),Bu="[object RegExp]";function Wu(n){return(0,Gu.Z)(n)&&(0,Uu.Z)(n)==Bu}var ju=Wu,Sa=p(95235),_a=p(56996),Na=_a.Z&&_a.Z.isRegExp,Ku=Na?(0,Sa.Z)(Na):ju,dt=Ku;function Vu(n){return Hu(n)?n.LABEL:n.name}function Hu(n){return(0,$e.Z)(n.LABEL)&&n.LABEL!==""}class it{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),(0,D.Z)(this.definition,t=>{t.accept(e)})}}class _e extends it{constructor(e){super([]),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class an extends it{constructor(e){super(e.definition),this.orgText="",Ge(this,Je(e,t=>t!==void 0))}}class be extends it{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Ge(this,Je(e,t=>t!==void 0))}}class Ae extends it{constructor(e){super(e.definition),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}}class Be extends it{constructor(e){super(e.definition),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}}class We extends it{constructor(e){super(e.definition),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}}class ce extends it{constructor(e){super(e.definition),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}}class Me extends it{constructor(e){super(e.definition),this.idx=1,Ge(this,Je(e,t=>t!==void 0))}}class De extends it{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Ge(this,Je(e,t=>t!==void 0))}}class ne{constructor(e){this.idx=1,Ge(this,Je(e,t=>t!==void 0))}accept(e){e.visit(this)}}function zu(n){return(0,$.Z)(n,cr)}function cr(n){function e(t){return(0,$.Z)(t,cr)}if(n instanceof _e){const t={type:"NonTerminal",name:n.nonTerminalName,idx:n.idx};return(0,$e.Z)(n.label)&&(t.label=n.label),t}else{if(n instanceof be)return{type:"Alternative",definition:e(n.definition)};if(n instanceof Ae)return{type:"Option",idx:n.idx,definition:e(n.definition)};if(n instanceof Be)return{type:"RepetitionMandatory",idx:n.idx,definition:e(n.definition)};if(n instanceof We)return{type:"RepetitionMandatoryWithSeparator",idx:n.idx,separator:cr(new ne({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof Me)return{type:"RepetitionWithSeparator",idx:n.idx,separator:cr(new ne({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof ce)return{type:"Repetition",idx:n.idx,definition:e(n.definition)};if(n instanceof De)return{type:"Alternation",idx:n.idx,definition:e(n.definition)};if(n instanceof ne){const t={type:"Terminal",name:n.terminalType.name,label:Vu(n.terminalType),idx:n.idx};(0,$e.Z)(n.label)&&(t.terminalLabel=n.label);const r=n.terminalType.PATTERN;return n.terminalType.PATTERN&&(t.pattern=dt(r)?r.source:r),t}else{if(n instanceof an)return{type:"Rule",name:n.name,orgText:n.orgText,definition:e(n.definition)};throw Error("non exhaustive match")}}}class lr{walk(e,t=[]){(0,D.Z)(e.definition,(r,i)=>{const s=ve(e.definition,i+1);if(r instanceof _e)this.walkProdRef(r,s,t);else if(r instanceof ne)this.walkTerminal(r,s,t);else if(r instanceof be)this.walkFlat(r,s,t);else if(r instanceof Ae)this.walkOption(r,s,t);else if(r instanceof Be)this.walkAtLeastOne(r,s,t);else if(r instanceof We)this.walkAtLeastOneSep(r,s,t);else if(r instanceof Me)this.walkManySep(r,s,t);else if(r instanceof ce)this.walkMany(r,s,t);else if(r instanceof De)this.walkOr(r,s,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){const i=t.concat(r);this.walk(e,i)}walkOption(e,t,r){const i=t.concat(r);this.walk(e,i)}walkAtLeastOne(e,t,r){const i=[new Ae({definition:e.definition})].concat(t,r);this.walk(e,i)}walkAtLeastOneSep(e,t,r){const i=xa(e,t,r);this.walk(e,i)}walkMany(e,t,r){const i=[new Ae({definition:e.definition})].concat(t,r);this.walk(e,i)}walkManySep(e,t,r){const i=xa(e,t,r);this.walk(e,i)}walkOr(e,t,r){const i=t.concat(r);(0,D.Z)(e.definition,s=>{const a=new be({definition:[s]});this.walk(a,i)})}}function xa(n,e,t){return[new Ae({definition:[new ne({terminalType:n.separator})].concat(n.definition)})].concat(e,t)}var fi=p(92450),ze=p(911),Yu=p(98074),hi=p(70363);function Xu(n,e){var t;return(0,hi.Z)(n,function(r,i,s){return t=e(r,i,s),!t}),!!t}var Ju=Xu,Re=p(49069),La=p(16160);function Qu(n,e,t){var r=(0,Re.Z)(n)?Yu.Z:Ju;return t&&(0,La.Z)(n,e,t)&&(e=void 0),r(n,(0,sn.Z)(e,3))}var wa=Qu,Oa=p(74057),qu=Math.max;function ed(n,e,t,r){n=(0,Ia.Z)(n)?n:(0,pe.Z)(n),t=t&&!r?(0,or.Z)(t):0;var i=n.length;return t<0&&(t=qu(i+t,0)),(0,$e.Z)(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&(0,Oa.Z)(n,e,t)>-1}var Ne=ed;function td(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}var nd=td;function rd(n,e){var t=!0;return(0,hi.Z)(n,function(r,i,s){return t=!!e(r,i,s),t}),t}var id=rd;function sd(n,e,t){var r=(0,Re.Z)(n)?nd:id;return t&&(0,La.Z)(n,e,t)&&(e=void 0),r(n,(0,sn.Z)(e,3))}var Qe=sd;function ad(n){return n instanceof be||n instanceof Ae||n instanceof ce||n instanceof Be||n instanceof We||n instanceof Me||n instanceof ne||n instanceof an}function ur(n,e=[]){return n instanceof Ae||n instanceof ce||n instanceof Me?!0:n instanceof De?wa(n.definition,r=>ur(r,e)):n instanceof _e&&Ne(e,n)?!1:n instanceof it?(n instanceof _e&&e.push(n),Qe(n.definition,r=>ur(r,e))):!1}function od(n){return n instanceof De}function st(n){if(n instanceof _e)return"SUBRULE";if(n instanceof Ae)return"OPTION";if(n instanceof De)return"OR";if(n instanceof Be)return"AT_LEAST_ONE";if(n instanceof We)return"AT_LEAST_ONE_SEP";if(n instanceof Me)return"MANY_SEP";if(n instanceof ce)return"MANY";if(n instanceof ne)return"CONSUME";throw Error("non exhaustive match")}function _n(n){if(n instanceof _e)return _n(n.referencedRule);if(n instanceof ne)return ud(n);if(ad(n))return cd(n);if(od(n))return ld(n);throw Error("non exhaustive match")}function cd(n){let e=[];const t=n.definition;let r=0,i=t.length>r,s,a=!0;for(;i&&a;)s=t[r],a=ur(s),e=e.concat(_n(s)),r=r+1,i=t.length>r;return(0,fi.Z)(e)}function ld(n){const e=(0,$.Z)(n.definition,t=>_n(t));return(0,fi.Z)((0,ze.Z)(e))}function ud(n){return[n.terminalType]}const Pa="_~IN~_";class dd extends lr{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){const i=hd(e.referencedRule,e.idx)+this.topProd.name,s=t.concat(r),a=new be({definition:s}),o=_n(a);this.follows[i]=o}}function fd(n){const e={};return(0,D.Z)(n,t=>{const r=new dd(t).startWalking();Ge(e,r)}),e}function hd(n,e){return n.name+e+Pa}function gg(n){return n.terminalType.name+n.idx+IN}var ft=p(78757),pi=p(47509),pd=p(74020),md=p(17376),gd="Expected a function";function yd(n){if(typeof n!="function")throw new TypeError(gd);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}var Td=yd;function Ed(n,e){var t=(0,Re.Z)(n)?pd.Z:md.Z;return t(n,Td((0,sn.Z)(e,3)))}var dr=Ed,Bt=p(38348),vd=Math.max;function Ad(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:(0,or.Z)(t);return i<0&&(i=vd(r+i,0)),(0,Oa.Z)(n,e,i)}var $a=Ad,xe=p(95982),je=p(19478),Rd=p(28629),kd=p(93346),Id=p(84699),Cd=p(72808),Sd=200;function _d(n,e,t,r){var i=-1,s=kd.Z,a=!0,o=n.length,c=[],l=e.length;if(!o)return c;t&&(e=(0,Ca.Z)(e,(0,Sa.Z)(t))),r?(s=Id.Z,a=!1):e.length>=Sd&&(s=Cd.Z,a=!1,e=new Rd.Z(e));e:for(;++i<o;){var u=n[i],d=t==null?u:t(u);if(u=r||u!==0?u:0,a&&d===d){for(var h=l;h--;)if(e[h]===d)continue e;c.push(u)}else s(e,d,r)||c.push(u)}return c}var Nd=_d,ba=p(63600),xd=p(70290),Ma=p(74179),Ld=(0,xd.Z)(function(n,e){return(0,Ma.Z)(n)?Nd(n,(0,ba.Z)(e,1,Ma.Z,!0)):[]}),fr=Ld;function wd(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var s=n[e];s&&(i[r++]=s)}return i}var Nn=wd;function Od(n){return n&&n.length?n[0]:void 0}var qe=Od,on=p(25013);function mi(n){console&&console.error&&console.error(`Error: ${n}`)}function Da(n){console&&console.warn&&console.warn(`Warning: ${n}`)}let hr={};const Pd=new da;function pr(n){const e=n.toString();if(hr.hasOwnProperty(e))return hr[e];{const t=Pd.pattern(e);return hr[e]=t,t}}function $d(){hr={}}const Za="Complement Sets are not supported for first char optimization",mr=`Unable to use "first char" lexer optimizations:
`;function bd(n,e=!1){try{const t=pr(n);return gi(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Za)e&&Da(`${mr}	Unable to optimize: < ${n.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),mi(`${mr}
	Failed parsing: < ${n.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function gi(n,e,t){switch(n.type){case"Disjunction":for(let i=0;i<n.value.length;i++)gi(n.value[i],e,t);break;case"Alternative":const r=n.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":gr(a.value,e,t);break;case"Set":if(a.complement===!0)throw Error(Za);(0,D.Z)(a.value,c=>{if(typeof c=="number")gr(c,e,t);else{const l=c;if(t===!0)for(let u=l.from;u<=l.to;u++)gr(u,e,t);else{for(let u=l.from;u<=l.to&&u<Ln;u++)gr(u,e,t);if(l.to>=Ln){const u=l.from>=Ln?l.from:Ln,d=l.to,h=It(u),f=It(d);for(let y=h;y<=f;y++)e[y]=y}}}});break;case"Group":gi(a.value,e,t);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&yi(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return(0,pe.Z)(e)}function gr(n,e,t){const r=It(n);e[r]=r,t===!0&&Md(n,e)}function Md(n,e){const t=String.fromCharCode(n),r=t.toUpperCase();if(r!==t){const i=It(r.charCodeAt(0));e[i]=i}else{const i=t.toLowerCase();if(i!==t){const s=It(i.charCodeAt(0));e[s]=s}}}function Fa(n,e){return(0,on.Z)(n.value,t=>{if(typeof t=="number")return Ne(e,t);{const r=t;return(0,on.Z)(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function yi(n){const e=n.quantifier;return e&&e.atLeast===0?!0:n.value?(0,Re.Z)(n.value)?Qe(n.value,yi):yi(n.value):!1}class Dd extends ir{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Ne(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Fa(e,this.targetCharCodes)===void 0&&(this.found=!0):Fa(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Ti(n,e){if(e instanceof RegExp){const t=pr(e),r=new Dd(n);return r.visit(t),r.found}else return(0,on.Z)(e,t=>Ne(n,t.charCodeAt(0)))!==void 0}const Wt="PATTERN",xn="defaultMode",yr="modes";let Tr=typeof new RegExp("(?:)").sticky=="boolean";function yg(){Tr=!1}function Tg(){Tr=!0}function Zd(n,e){e=(0,pi.Z)(e,{useSticky:Tr,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(x,A)=>A()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{cf()});let r;t("Reject Lexer.NA",()=>{r=dr(n,x=>x[Wt]===Ze.NA)});let i=!1,s;t("Transform Patterns",()=>{i=!1,s=(0,$.Z)(r,x=>{const A=x[Wt];if(dt(A)){const V=A.source;return V.length===1&&V!=="^"&&V!=="$"&&V!=="."&&!A.ignoreCase?V:V.length===2&&V[0]==="\\"&&!Ne(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],V[1])?V[1]:e.useSticky?Ga(A):Ua(A)}else{if((0,Bt.Z)(A))return i=!0,{exec:A};if(typeof A=="object")return i=!0,A;if(typeof A=="string"){if(A.length===1)return A;{const V=A.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),H=new RegExp(V);return e.useSticky?Ga(H):Ua(H)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;t("misc mapping",()=>{a=(0,$.Z)(r,x=>x.tokenTypeIdx),o=(0,$.Z)(r,x=>{const A=x.GROUP;if(A!==Ze.SKIPPED){if((0,$e.Z)(A))return A;if((0,ft.Z)(A))return!1;throw Error("non exhaustive match")}}),c=(0,$.Z)(r,x=>{const A=x.LONGER_ALT;if(A)return(0,Re.Z)(A)?(0,$.Z)(A,H=>$a(r,H)):[$a(r,A)]}),l=(0,$.Z)(r,x=>x.PUSH_MODE),u=(0,$.Z)(r,x=>(0,Z.Z)(x,"POP_MODE"))});let d;t("Line Terminator Handling",()=>{const x=ja(e.lineTerminatorCharacters);d=(0,$.Z)(r,A=>!1),e.positionTracking!=="onlyOffset"&&(d=(0,$.Z)(r,A=>(0,Z.Z)(A,"LINE_BREAKS")?!!A.LINE_BREAKS:Wa(A,x)===!1&&Ti(x,A.PATTERN)))});let h,f,y,T;t("Misc Mapping #2",()=>{h=(0,$.Z)(r,Ba),f=(0,$.Z)(s,sf),y=(0,xe.Z)(r,(x,A)=>{const V=A.GROUP;return(0,$e.Z)(V)&&V!==Ze.SKIPPED&&(x[V]=[]),x},{}),T=(0,$.Z)(s,(x,A)=>({pattern:s[A],longerAlt:c[A],canLineTerminator:d[A],isCustom:h[A],short:f[A],group:o[A],push:l[A],pop:u[A],tokenTypeIdx:a[A],tokenType:r[A]}))});let w=!0,R=[];return e.safeMode||t("First Char Optimization",()=>{R=(0,xe.Z)(r,(x,A,V)=>{if(typeof A.PATTERN=="string"){const H=A.PATTERN.charCodeAt(0),Te=It(H);Ei(x,Te,T[V])}else if((0,Re.Z)(A.START_CHARS_HINT)){let H;(0,D.Z)(A.START_CHARS_HINT,Te=>{const yn=typeof Te=="string"?Te.charCodeAt(0):Te,Ie=It(yn);H!==Ie&&(H=Ie,Ei(x,Ie,T[V]))})}else if(dt(A.PATTERN))if(A.PATTERN.unicode)w=!1,e.ensureOptimizations&&mi(`${mr}	Unable to analyze < ${A.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const H=bd(A.PATTERN,e.ensureOptimizations);(0,te.Z)(H)&&(w=!1),(0,D.Z)(H,Te=>{Ei(x,Te,T[V])})}else e.ensureOptimizations&&mi(`${mr}	TokenType: <${A.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),w=!1;return x},[])}),{emptyGroups:y,patternIdxToConfig:T,charCodeToPatternIdxToConfig:R,hasCustom:i,canBeOptimized:w}}function Fd(n,e){let t=[];const r=Gd(n);t=t.concat(r.errors);const i=Bd(r.valid),s=i.valid;return t=t.concat(i.errors),t=t.concat(Ud(s)),t=t.concat(Xd(s)),t=t.concat(Jd(s,e)),t=t.concat(Qd(s)),t}function Ud(n){let e=[];const t=(0,je.Z)(n,r=>dt(r[Wt]));return e=e.concat(jd(t)),e=e.concat(Hd(t)),e=e.concat(zd(t)),e=e.concat(Yd(t)),e=e.concat(Kd(t)),e}function Gd(n){const e=(0,je.Z)(n,i=>!(0,Z.Z)(i,Wt)),t=(0,$.Z)(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:le.MISSING_PATTERN,tokenTypes:[i]})),r=fr(n,e);return{errors:t,valid:r}}function Bd(n){const e=(0,je.Z)(n,i=>{const s=i[Wt];return!dt(s)&&!(0,Bt.Z)(s)&&!(0,Z.Z)(s,"exec")&&!(0,$e.Z)(s)}),t=(0,$.Z)(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:le.INVALID_PATTERN,tokenTypes:[i]})),r=fr(n,e);return{errors:t,valid:r}}const Wd=/[^\\][$]/;function jd(n){class e extends ir{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const t=(0,je.Z)(n,i=>{const s=i.PATTERN;try{const a=pr(s),o=new e;return o.visit(a),o.found}catch(a){return Wd.test(s.source)}});return(0,$.Z)(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:le.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Kd(n){const e=(0,je.Z)(n,r=>r.PATTERN.test(""));return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:le.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const Vd=/[^\\[][\^]|^\^/;function Hd(n){class e extends ir{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const t=(0,je.Z)(n,i=>{const s=i.PATTERN;try{const a=pr(s),o=new e;return o.visit(a),o.found}catch(a){return Vd.test(s.source)}});return(0,$.Z)(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:le.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function zd(n){const e=(0,je.Z)(n,r=>{const i=r[Wt];return i instanceof RegExp&&(i.multiline||i.global)});return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:le.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Yd(n){const e=[];let t=(0,$.Z)(n,s=>(0,xe.Z)(n,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Ne(e,o)&&o.PATTERN!==Ze.NA&&(e.push(o),a.push(o)),a),[]));t=Nn(t);const r=(0,je.Z)(t,s=>s.length>1);return(0,$.Z)(r,s=>{const a=(0,$.Z)(s,c=>c.name);return{message:`The same RegExp pattern ->${qe(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:le.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Xd(n){const e=(0,je.Z)(n,r=>{if(!(0,Z.Z)(r,"GROUP"))return!1;const i=r.GROUP;return i!==Ze.SKIPPED&&i!==Ze.NA&&!(0,$e.Z)(i)});return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:le.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Jd(n,e){const t=(0,je.Z)(n,i=>i.PUSH_MODE!==void 0&&!Ne(e,i.PUSH_MODE));return(0,$.Z)(t,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:le.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Qd(n){const e=[],t=(0,xe.Z)(n,(r,i,s)=>{const a=i.PATTERN;return a===Ze.NA||((0,$e.Z)(a)?r.push({str:a,idx:s,tokenType:i}):dt(a)&&ef(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return(0,D.Z)(n,(r,i)=>{(0,D.Z)(t,({str:s,idx:a,tokenType:o})=>{if(i<a&&qd(s,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:le.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function qd(n,e){if(dt(e)){const t=e.exec(n);return t!==null&&t.index===0}else{if((0,Bt.Z)(e))return e(n,0,[],{});if((0,Z.Z)(e,"exec"))return e.exec(n,0,[],{});if(typeof e=="string")return e===n;throw Error("non exhaustive match")}}function ef(n){const e=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return(0,on.Z)(e,t=>n.source.indexOf(t)!==-1)===void 0}function Ua(n){const e=n.ignoreCase?"i":"";return new RegExp(`^(?:${n.source})`,e)}function Ga(n){const e=n.ignoreCase?"iy":"y";return new RegExp(`${n.source}`,e)}function tf(n,e,t){const r=[];return(0,Z.Z)(n,xn)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+xn+`> property in its definition
`,type:le.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,Z.Z)(n,yr)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+yr+`> property in its definition
`,type:le.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,Z.Z)(n,yr)&&(0,Z.Z)(n,xn)&&!(0,Z.Z)(n.modes,n.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${xn}: <${n.defaultMode}>which does not exist
`,type:le.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,Z.Z)(n,yr)&&(0,D.Z)(n.modes,(i,s)=>{(0,D.Z)(i,(a,o)=>{if((0,ft.Z)(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:le.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if((0,Z.Z)(a,"LONGER_ALT")){const c=(0,Re.Z)(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];(0,D.Z)(c,l=>{!(0,ft.Z)(l)&&!Ne(i,l)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:le.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function nf(n,e,t){const r=[];let i=!1;const s=Nn((0,ze.Z)((0,pe.Z)(n.modes))),a=dr(s,c=>c[Wt]===Ze.NA),o=ja(t);return e&&(0,D.Z)(a,c=>{const l=Wa(c,o);if(l!==!1){const d={message:of(c,l),type:l.issue,tokenType:c};r.push(d)}else(0,Z.Z)(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Ti(o,c.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:le.NO_LINE_BREAKS_FLAGS}),r}function rf(n){const e={},t=(0,rn.Z)(n);return(0,D.Z)(t,r=>{const i=n[r];if((0,Re.Z)(i))e[r]=[];else throw Error("non exhaustive match")}),e}function Ba(n){const e=n.PATTERN;if(dt(e))return!1;if((0,Bt.Z)(e))return!0;if((0,Z.Z)(e,"exec"))return!0;if((0,$e.Z)(e))return!1;throw Error("non exhaustive match")}function sf(n){return(0,$e.Z)(n)&&n.length===1?n.charCodeAt(0):!1}const af={test:function(n){const e=n.length;for(let t=this.lastIndex;t<e;t++){const r=n.charCodeAt(t);if(r===10)return this.lastIndex=t+1,!0;if(r===13)return n.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function Wa(n,e){if((0,Z.Z)(n,"LINE_BREAKS"))return!1;if(dt(n.PATTERN)){try{Ti(e,n.PATTERN)}catch(t){return{issue:le.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if((0,$e.Z)(n.PATTERN))return!1;if(Ba(n))return{issue:le.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function of(n,e){if(e.issue===le.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${n.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===le.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${n.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function ja(n){return(0,$.Z)(n,t=>(0,$e.Z)(t)?t.charCodeAt(0):t)}function Ei(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}const Ln=256;let Er=[];function It(n){return n<Ln?n:Er[n]}function cf(){if((0,te.Z)(Er)){Er=new Array(65536);for(let n=0;n<65536;n++)Er[n]=n>255?255+~~(n/255):n}}var Ka=p(13211),me=p(35510),cn=p(63479);function Va(n){const e=new Date().getTime(),t=n();return{time:new Date().getTime()-e,value:t}}function wn(n,e){const t=n.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function vr(n,e){return n.tokenTypeIdx===e.tokenTypeIdx}let Ha=1;const za={};function On(n){const e=lf(n);uf(e),ff(e),df(e),(0,D.Z)(e,t=>{t.isParent=t.categoryMatches.length>0})}function lf(n){let e=(0,Ee.Z)(n),t=n,r=!0;for(;r;){t=Nn((0,ze.Z)((0,$.Z)(t,s=>s.CATEGORIES)));const i=fr(t,e);e=e.concat(i),(0,te.Z)(i)?r=!1:t=i}return e}function uf(n){(0,D.Z)(n,e=>{Xa(e)||(za[Ha]=e,e.tokenTypeIdx=Ha++),Ja(e)&&!(0,Re.Z)(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Ja(e)||(e.CATEGORIES=[]),hf(e)||(e.categoryMatches=[]),pf(e)||(e.categoryMatchesMap={})})}function df(n){(0,D.Z)(n,e=>{e.categoryMatches=[],(0,D.Z)(e.categoryMatchesMap,(t,r)=>{e.categoryMatches.push(za[r].tokenTypeIdx)})})}function ff(n){(0,D.Z)(n,e=>{Ya([],e)})}function Ya(n,e){(0,D.Z)(n,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),(0,D.Z)(e.CATEGORIES,t=>{const r=n.concat(e);Ne(r,t)||Ya(r,t)})}function Xa(n){return(0,Z.Z)(n,"tokenTypeIdx")}function Ja(n){return(0,Z.Z)(n,"CATEGORIES")}function hf(n){return(0,Z.Z)(n,"categoryMatches")}function pf(n){return(0,Z.Z)(n,"categoryMatchesMap")}function mf(n){return(0,Z.Z)(n,"tokenTypeIdx")}const gf={buildUnableToPopLexerModeMessage(n){return`Unable to pop Lexer Mode after encountering Token ->${n.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(n,e,t,r,i){return`unexpected character: ->${n.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var le;(function(n){n[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",n[n.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(le||(le={}));const Pn={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:gf,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Pn);class Ze{constructor(e,t=Pn){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=Va(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Ge({},Pn,t);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Pn.lineTerminatorsPattern)this.config.lineTerminatorsPattern=af;else if(this.config.lineTerminatorCharacters===Pn.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),(0,Re.Z)(e)?i={modes:{defaultMode:(0,Ee.Z)(e)},defaultMode:xn}:(s=!1,i=(0,Ee.Z)(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(tf(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(nf(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},(0,D.Z)(i.modes,(o,c)=>{i.modes[c]=dr(o,l=>(0,ft.Z)(l))});const a=(0,rn.Z)(i.modes);if((0,D.Z)(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Fd(o,a))}),(0,te.Z)(this.lexerDefinitionErrors)){On(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Zd(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=Ge({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!(0,te.Z)(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=(0,$.Z)(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}(0,D.Z)(this.lexerDefinitionWarning,o=>{Da(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Tr?(this.chopInput=Ka.Z,this.match=this.matchWithTest):(this.updateLastIndex=me.Z,this.match=this.matchWithExec),s&&(this.handleModes=me.Z),this.trackStartLines===!1&&(this.computeNewColumn=Ka.Z),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=me.Z),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=(0,xe.Z)(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(t.ensureOptimizations&&!(0,te.Z)(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{$d()}),this.TRACE_INIT("toFastProperties",()=>{Ra(this)})})}tokenize(e,t=this.defaultMode){if(!(0,te.Z)(this.lexerDefinitionErrors)){const i=(0,$.Z)(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,i,s,a,o,c,l,u,d,h,f,y,T,w,R,x;const A=e,V=A.length;let H=0,Te=0;const yn=this.hasCustom?0:Math.floor(e.length/10),Ie=new Array(yn),Ot=[];let gt=this.trackStartLines?1:void 0,L=this.trackStartLines?1:void 0;const E=rf(this.emptyGroups),P=this.trackStartLines,b=this.config.lineTerminatorsPattern;let q=0,W=[],G=[];const we=[],Oe=[];Object.freeze(Oe);let re;function Ht(){return W}function Zl(Ce){const Ye=It(Ce),Tn=G[Ye];return Tn===void 0?Oe:Tn}const Qm=Ce=>{if(we.length===1&&Ce.tokenType.PUSH_MODE===void 0){const Ye=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Ce);Ot.push({offset:Ce.startOffset,line:Ce.startLine,column:Ce.startColumn,length:Ce.image.length,message:Ye})}else{we.pop();const Ye=(0,cn.Z)(we);W=this.patternIdxToConfig[Ye],G=this.charCodeToPatternIdxToConfig[Ye],q=W.length;const Tn=this.canModeBeOptimized[Ye]&&this.config.safeMode===!1;G&&Tn?re=Zl:re=Ht}};function Fl(Ce){we.push(Ce),G=this.charCodeToPatternIdxToConfig[Ce],W=this.patternIdxToConfig[Ce],q=W.length,q=W.length;const Ye=this.canModeBeOptimized[Ce]&&this.config.safeMode===!1;G&&Ye?re=Zl:re=Ht}Fl.call(this,t);let tt;const Ul=this.config.recoveryEnabled;for(;H<V;){c=null;const Ce=A.charCodeAt(H),Ye=re(Ce),Tn=Ye.length;for(r=0;r<Tn;r++){tt=Ye[r];const Ve=tt.pattern;l=null;const yt=tt.short;if(yt!==!1?Ce===yt&&(c=Ve):tt.isCustom===!0?(x=Ve.exec(A,H,Ie,E),x!==null?(c=x[0],x.payload!==void 0&&(l=x.payload)):c=null):(this.updateLastIndex(Ve,H),c=this.match(Ve,e,H)),c!==null){if(o=tt.longerAlt,o!==void 0){const Pt=o.length;for(s=0;s<Pt;s++){const Tt=W[o[s]],zt=Tt.pattern;if(u=null,Tt.isCustom===!0?(x=zt.exec(A,H,Ie,E),x!==null?(a=x[0],x.payload!==void 0&&(u=x.payload)):a=null):(this.updateLastIndex(zt,H),a=this.match(zt,e,H)),a&&a.length>c.length){c=a,l=u,tt=Tt;break}}}break}}if(c!==null){if(d=c.length,h=tt.group,h!==void 0&&(f=tt.tokenTypeIdx,y=this.createTokenInstance(c,H,f,tt.tokenType,gt,L,d),this.handlePayload(y,l),h===!1?Te=this.addToken(Ie,Te,y):E[h].push(y)),e=this.chopInput(e,d),H=H+d,L=this.computeNewColumn(L,d),P===!0&&tt.canLineTerminator===!0){let Ve=0,yt,Pt;b.lastIndex=0;do yt=b.test(c),yt===!0&&(Pt=b.lastIndex-1,Ve++);while(yt===!0);Ve!==0&&(gt=gt+Ve,L=d-Pt,this.updateTokenEndLineColumnLocation(y,h,Pt,Ve,gt,L,d))}this.handleModes(tt,Qm,Fl,y)}else{const Ve=H,yt=gt,Pt=L;let Tt=Ul===!1;for(;Tt===!1&&H<V;)for(e=this.chopInput(e,1),H++,i=0;i<q;i++){const zt=W[i],ps=zt.pattern,Gl=zt.short;if(Gl!==!1?A.charCodeAt(H)===Gl&&(Tt=!0):zt.isCustom===!0?Tt=ps.exec(A,H,Ie,E)!==null:(this.updateLastIndex(ps,H),Tt=ps.exec(e)!==null),Tt===!0)break}if(T=H-Ve,L=this.computeNewColumn(L,T),R=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(A,Ve,T,yt,Pt),Ot.push({offset:Ve,line:yt,column:Pt,length:T,message:R}),Ul===!1)break}}return this.hasCustom||(Ie.length=Te),{tokens:Ie,groups:E,errors:Ot}}handleModes(e,t,r,i){if(e.pop===!0){const s=e.push;t(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,i,s,a,o){let c,l;t!==void 0&&(c=r===o-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,i){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,t,r,i,s,a){return{image:e,startOffset:t,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,t,r,i,s,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,r){return e.test(t)===!0?t.substring(r,e.lastIndex):null}matchWithExec(e,t){const r=e.exec(t);return r!==null?r[0]:null}}Ze.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Ze.NA=/NOT_APPLICABLE/;function ln(n){return Qa(n)?n.LABEL:n.name}function Eg(n){return n.name}function Qa(n){return(0,$e.Z)(n.LABEL)&&n.LABEL!==""}const yf="parent",qa="categories",eo="label",to="group",no="push_mode",ro="pop_mode",io="longer_alt",so="line_breaks",ao="start_chars_hint";function oo(n){return Tf(n)}function Tf(n){const e=n.pattern,t={};if(t.name=n.name,(0,ft.Z)(e)||(t.PATTERN=e),(0,Z.Z)(n,yf))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return(0,Z.Z)(n,qa)&&(t.CATEGORIES=n[qa]),On([t]),(0,Z.Z)(n,eo)&&(t.LABEL=n[eo]),(0,Z.Z)(n,to)&&(t.GROUP=n[to]),(0,Z.Z)(n,ro)&&(t.POP_MODE=n[ro]),(0,Z.Z)(n,no)&&(t.PUSH_MODE=n[no]),(0,Z.Z)(n,io)&&(t.LONGER_ALT=n[io]),(0,Z.Z)(n,so)&&(t.LINE_BREAKS=n[so]),(0,Z.Z)(n,ao)&&(t.START_CHARS_HINT=n[ao]),t}const Ct=oo({name:"EOF",pattern:Ze.NA});On([Ct]);function vi(n,e,t,r,i,s,a,o){return{image:e,startOffset:t,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:n.tokenTypeIdx,tokenType:n}}function co(n,e){return wn(n,e)}const un={buildMismatchTokenMessage({expected:n,actual:e,previous:t,ruleName:r}){return`Expecting ${Qa(n)?`--> ${ln(n)} <--`:`token of type --> ${n.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:n,ruleName:e}){return"Redundant input, expecting EOF but found: "+n.image},buildNoViableAltMessage({expectedPathsPerAlt:n,actual:e,previous:t,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+qe(e).image+"'";if(r)return s+r+o;{const c=(0,xe.Z)(n,(h,f)=>h.concat(f),[]),l=(0,$.Z)(c,h=>`[${(0,$.Z)(h,f=>ln(f)).join(", ")}]`),d=`one of these possible Token sequences:
${(0,$.Z)(l,(h,f)=>`  ${f+1}. ${h}`).join(`
`)}`;return s+d+o}},buildEarlyExitMessage({expectedIterationPaths:n,actual:e,customUserDescription:t,ruleName:r}){const i="Expecting: ",a=`
but found: '`+qe(e).image+"'";if(t)return i+t+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${(0,$.Z)(n,l=>`[${(0,$.Z)(l,u=>ln(u)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(un);const Ef={buildRuleNotFoundError(n,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+n.name+"<-"}},jt={buildDuplicateFoundError(n,e){function t(u){return u instanceof ne?u.terminalType.name:u instanceof _e?u.nonTerminalName:""}const r=n.name,i=qe(e),s=i.idx,a=st(i),o=t(i),c=s>0;let l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(n){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${n.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;return`Ambiguous alternatives: <${n.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;let r=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(n){let e=st(n.repetition);return n.repetition.idx!==0&&(e+=n.repetition.idx),`The repetition <${e}> within Rule <${n.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(n){return"deprecated"},buildEmptyAlternationError(n){return`Ambiguous empty alternative: <${n.emptyChoiceIdx+1}> in <OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(n){return`An Alternation cannot have more than 256 alternatives:
<OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
 has ${n.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(n){const e=n.topLevelRule.name,t=(0,$.Z)(n.leftRecursionPath,s=>s.name),r=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(n){return"deprecated"},buildDuplicateRuleNameError(n){let e;return n.topLevelRule instanceof an?e=n.topLevelRule.name:e=n.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${n.grammarName}<-`}};class dn{visit(e){const t=e;switch(t.constructor){case _e:return this.visitNonTerminal(t);case be:return this.visitAlternative(t);case Ae:return this.visitOption(t);case Be:return this.visitRepetitionMandatory(t);case We:return this.visitRepetitionMandatoryWithSeparator(t);case Me:return this.visitRepetitionWithSeparator(t);case ce:return this.visitRepetition(t);case De:return this.visitAlternation(t);case ne:return this.visitTerminal(t);case an:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function vf(n,e){const t=new Af(n,e);return t.resolveRefs(),t.errors}class Af extends dn{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){(0,D.Z)((0,pe.Z)(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:Le.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}function Rf(n,e){return(0,ba.Z)((0,$.Z)(n,e),1)}var Ke=Rf,kf=p(25158);function If(n,e,t,r){for(var i=-1,s=n==null?0:n.length;++i<s;){var a=n[i];e(r,a,t(a),n)}return r}var Cf=If;function Sf(n,e,t,r){return(0,hi.Z)(n,function(i,s,a){e(r,i,t(i),a)}),r}var _f=Sf;function Nf(n,e){return function(t,r){var i=(0,Re.Z)(t)?Cf:_f,s=e?e():{};return i(t,n,(0,sn.Z)(r,2),s)}}var xf=Nf,Lf=Object.prototype,wf=Lf.hasOwnProperty,Of=xf(function(n,e,t){wf.call(n,t)?n[t].push(e):(0,kf.Z)(n,t,[e])}),Pf=Of;function $f(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:(0,or.Z)(e),e=r-e,(0,ka.Z)(n,0,e<0?0:e)):[]}var $n=$f;class bf extends lr{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,Ee.Z)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,Ee.Z)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){(0,te.Z)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Mf extends bf{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=t.concat(r),s=new be({definition:i});this.possibleTokTypes=_n(s),this.found=!0}}}class Ar extends lr{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Df extends Ar{walkMany(e,t,r){if(e.idx===this.occurrence){const i=qe(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ne&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,t,r)}}class lo extends Ar{walkManySep(e,t,r){if(e.idx===this.occurrence){const i=qe(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ne&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,t,r)}}class Zf extends Ar{walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){const i=qe(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ne&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,t,r)}}class uo extends Ar{walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){const i=qe(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ne&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,t,r)}}function Ai(n,e,t=[]){t=(0,Ee.Z)(t);let r=[],i=0;function s(o){return o.concat(ve(n,i+1))}function a(o){const c=Ai(s(o),e,t);return r.concat(c)}for(;t.length<e&&i<n.length;){const o=n[i];if(o instanceof be)return a(o.definition);if(o instanceof _e)return a(o.definition);if(o instanceof Ae)r=a(o.definition);else if(o instanceof Be){const c=o.definition.concat([new ce({definition:o.definition})]);return a(c)}else if(o instanceof We){const c=[new be({definition:o.definition}),new ce({definition:[new ne({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof Me){const c=o.definition.concat([new ce({definition:[new ne({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof ce){const c=o.definition.concat([new ce({definition:o.definition})]);r=a(c)}else{if(o instanceof De)return(0,D.Z)(o.definition,c=>{(0,te.Z)(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof ne)t.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:t,suffixDef:ve(n,i)}),r}function fo(n,e,t,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-r-1,u=[],d=[];for(d.push({idx:-1,def:n,ruleStack:[],occurrenceStack:[]});!(0,te.Z)(d);){const h=d.pop();if(h===a){o&&(0,cn.Z)(d).idx<=l&&d.pop();continue}const f=h.def,y=h.idx,T=h.ruleStack,w=h.occurrenceStack;if((0,te.Z)(f))continue;const R=f[0];if(R===i){const x={idx:y,def:ve(f),ruleStack:$n(T),occurrenceStack:$n(w)};d.push(x)}else if(R instanceof ne)if(y<c-1){const x=y+1,A=e[x];if(t(A,R.terminalType)){const V={idx:x,def:ve(f),ruleStack:T,occurrenceStack:w};d.push(V)}}else if(y===c-1)u.push({nextTokenType:R.terminalType,nextTokenOccurrence:R.idx,ruleStack:T,occurrenceStack:w}),o=!0;else throw Error("non exhaustive match");else if(R instanceof _e){const x=(0,Ee.Z)(T);x.push(R.nonTerminalName);const A=(0,Ee.Z)(w);A.push(R.idx);const V={idx:y,def:R.definition.concat(s,ve(f)),ruleStack:x,occurrenceStack:A};d.push(V)}else if(R instanceof Ae){const x={idx:y,def:ve(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const A={idx:y,def:R.definition.concat(ve(f)),ruleStack:T,occurrenceStack:w};d.push(A)}else if(R instanceof Be){const x=new ce({definition:R.definition,idx:R.idx}),A=R.definition.concat([x],ve(f)),V={idx:y,def:A,ruleStack:T,occurrenceStack:w};d.push(V)}else if(R instanceof We){const x=new ne({terminalType:R.separator}),A=new ce({definition:[x].concat(R.definition),idx:R.idx}),V=R.definition.concat([A],ve(f)),H={idx:y,def:V,ruleStack:T,occurrenceStack:w};d.push(H)}else if(R instanceof Me){const x={idx:y,def:ve(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const A=new ne({terminalType:R.separator}),V=new ce({definition:[A].concat(R.definition),idx:R.idx}),H=R.definition.concat([V],ve(f)),Te={idx:y,def:H,ruleStack:T,occurrenceStack:w};d.push(Te)}else if(R instanceof ce){const x={idx:y,def:ve(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const A=new ce({definition:R.definition,idx:R.idx}),V=R.definition.concat([A],ve(f)),H={idx:y,def:V,ruleStack:T,occurrenceStack:w};d.push(H)}else if(R instanceof De)for(let x=R.definition.length-1;x>=0;x--){const A=R.definition[x],V={idx:y,def:A.definition.concat(ve(f)),ruleStack:T,occurrenceStack:w};d.push(V),d.push(a)}else if(R instanceof be)d.push({idx:y,def:R.definition.concat(ve(f)),ruleStack:T,occurrenceStack:w});else if(R instanceof an)d.push(Ff(R,y,T,w));else throw Error("non exhaustive match")}return u}function Ff(n,e,t,r){const i=(0,Ee.Z)(t);i.push(n.name);const s=(0,Ee.Z)(r);return s.push(1),{idx:e,def:n.definition,ruleStack:i,occurrenceStack:s}}var ae;(function(n){n[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION"})(ae||(ae={}));function Ri(n){if(n instanceof Ae||n==="Option")return ae.OPTION;if(n instanceof ce||n==="Repetition")return ae.REPETITION;if(n instanceof Be||n==="RepetitionMandatory")return ae.REPETITION_MANDATORY;if(n instanceof We||n==="RepetitionMandatoryWithSeparator")return ae.REPETITION_MANDATORY_WITH_SEPARATOR;if(n instanceof Me||n==="RepetitionWithSeparator")return ae.REPETITION_WITH_SEPARATOR;if(n instanceof De||n==="Alternation")return ae.ALTERNATION;throw Error("non exhaustive match")}function ho(n){const{occurrence:e,rule:t,prodType:r,maxLookahead:i}=n,s=Ri(r);return s===ae.ALTERNATION?Rr(e,t,i):kr(e,t,s,i)}function Uf(n,e,t,r,i,s){const a=Rr(n,e,t),o=yo(a)?vr:wn;return s(a,r,o,i)}function Gf(n,e,t,r,i,s){const a=kr(n,e,i,t),o=yo(a)?vr:wn;return s(a[0],o,r)}function Bf(n,e,t,r){const i=n.length,s=Qe(n,a=>Qe(a,o=>o.length===1));if(e)return function(a){const o=(0,$.Z)(a,c=>c.GATE);for(let c=0;c<i;c++){const l=n[c],u=l.length,d=o[c];if(!(d!==void 0&&d.call(this)===!1))e:for(let h=0;h<u;h++){const f=l[h],y=f.length;for(let T=0;T<y;T++){const w=this.LA(T+1);if(t(w,f[T])===!1)continue e}return c}}};if(s&&!r){const a=(0,$.Z)(n,c=>(0,ze.Z)(c)),o=(0,xe.Z)(a,(c,l,u)=>((0,D.Z)(l,d=>{(0,Z.Z)(c,d.tokenTypeIdx)||(c[d.tokenTypeIdx]=u),(0,D.Z)(d.categoryMatches,h=>{(0,Z.Z)(c,h)||(c[h]=u)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=n[a],c=o.length;e:for(let l=0;l<c;l++){const u=o[l],d=u.length;for(let h=0;h<d;h++){const f=this.LA(h+1);if(t(f,u[h])===!1)continue e}return a}}}}function Wf(n,e,t){const r=Qe(n,s=>s.length===1),i=n.length;if(r&&!t){const s=(0,ze.Z)(n);if(s.length===1&&(0,te.Z)(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=(0,xe.Z)(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,(0,D.Z)(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=n[s],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class jf extends lr{constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=r.concat(i),!0):!1}walkOption(e,t,r){this.checkIsTarget(e,ae.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,ae.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,ae.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,ae.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,ae.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}}class po extends dn{constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,ae.OPTION)}visitRepetition(e){this.checkIsTarget(e,ae.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,ae.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,ae.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,ae.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,ae.ALTERNATION)}}function mo(n){const e=new Array(n);for(let t=0;t<n;t++)e[t]=[];return e}function ki(n){let e=[""];for(let t=0;t<n.length;t++){const r=n[t],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];i.push(a+c)}}e=i}return e}function Kf(n,e,t){for(let r=0;r<n.length;r++){if(r===t)continue;const i=n[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}function go(n,e){const t=(0,$.Z)(n,a=>Ai([a],1)),r=mo(t.length),i=(0,$.Z)(t,a=>{const o={};return(0,D.Z)(a,c=>{const l=ki(c.partialPath);(0,D.Z)(l,u=>{o[u]=!0})}),o});let s=t;for(let a=1;a<=e;a++){const o=s;s=mo(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let u=0;u<l.length;u++){const d=l[u].partialPath,h=l[u].suffixDef,f=ki(d);if(Kf(i,f,c)||(0,te.Z)(h)||d.length===e){const T=r[c];if(Ii(T,d)===!1){T.push(d);for(let w=0;w<f.length;w++){const R=f[w];i[c][R]=!0}}}else{const T=Ai(h,a+1,d);s[c]=s[c].concat(T),(0,D.Z)(T,w=>{const R=ki(w.partialPath);(0,D.Z)(R,x=>{i[c][x]=!0})})}}}}return r}function Rr(n,e,t,r){const i=new po(n,ae.ALTERNATION,r);return e.accept(i),go(i.result,t)}function kr(n,e,t,r){const i=new po(n,t);e.accept(i);const s=i.result,o=new jf(e,n,t).startWalking(),c=new be({definition:s}),l=new be({definition:o});return go([c,l],r)}function Ii(n,e){e:for(let t=0;t<n.length;t++){const r=n[t];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Vf(n,e){return n.length<e.length&&Qe(n,(t,r)=>{const i=e[r];return t===i||i.categoryMatchesMap[t.tokenTypeIdx]})}function yo(n){return Qe(n,e=>Qe(e,t=>Qe(t,r=>(0,te.Z)(r.categoryMatches))))}function Hf(n){const e=n.lookaheadStrategy.validate({rules:n.rules,tokenTypes:n.tokenTypes,grammarName:n.grammarName});return(0,$.Z)(e,t=>Object.assign({type:Le.CUSTOM_LOOKAHEAD_VALIDATION},t))}function zf(n,e,t,r){const i=Ke(n,c=>Yf(c,t)),s=oh(n,e,t),a=Ke(n,c=>rh(c,t)),o=Ke(n,c=>Qf(c,n,r,t));return i.concat(s,a,o)}function Yf(n,e){const t=new Jf;n.accept(t);const r=t.allProductions,i=Pf(r,Xf),s=Je(i,o=>o.length>1);return(0,$.Z)((0,pe.Z)(s),o=>{const c=qe(o),l=e.buildDuplicateFoundError(n,o),u=st(c),d={message:l,type:Le.DUPLICATE_PRODUCTIONS,ruleName:n.name,dslName:u,occurrence:c.idx},h=To(c);return h&&(d.parameter=h),d})}function Xf(n){return`${st(n)}_#_${n.idx}_#_${To(n)}`}function To(n){return n instanceof ne?n.terminalType.name:n instanceof _e?n.nonTerminalName:""}class Jf extends dn{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Qf(n,e,t,r){const i=[];if((0,xe.Z)(e,(a,o)=>o.name===n.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:n,grammarName:t});i.push({message:a,type:Le.DUPLICATE_RULE_NAME,ruleName:n.name})}return i}function qf(n,e,t){const r=[];let i;return Ne(e,n)||(i=`Invalid rule override, rule: ->${n}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,r.push({message:i,type:Le.INVALID_RULE_OVERRIDE,ruleName:n})),r}function Eo(n,e,t,r=[]){const i=[],s=Ir(e.definition);if((0,te.Z)(s))return[];{const a=n.name;Ne(s,n)&&i.push({message:t.buildLeftRecursionError({topLevelRule:n,leftRecursionPath:r}),type:Le.LEFT_RECURSION,ruleName:a});const c=fr(s,r.concat([n])),l=Ke(c,u=>{const d=(0,Ee.Z)(r);return d.push(u),Eo(n,u,t,d)});return i.concat(l)}}function Ir(n){let e=[];if((0,te.Z)(n))return e;const t=qe(n);if(t instanceof _e)e.push(t.referencedRule);else if(t instanceof be||t instanceof Ae||t instanceof Be||t instanceof We||t instanceof Me||t instanceof ce)e=e.concat(Ir(t.definition));else if(t instanceof De)e=(0,ze.Z)((0,$.Z)(t.definition,s=>Ir(s.definition)));else if(!(t instanceof ne))throw Error("non exhaustive match");const r=ur(t),i=n.length>1;if(r&&i){const s=ve(n);return e.concat(Ir(s))}else return e}class Ci extends dn{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function eh(n,e){const t=new Ci;n.accept(t);const r=t.alternations;return Ke(r,s=>{const a=$n(s.definition);return Ke(a,(o,c)=>{const l=fo([o],[],wn,1);return(0,te.Z)(l)?[{message:e.buildEmptyAlternationError({topLevelRule:n,alternation:s,emptyChoiceIdx:c}),type:Le.NONE_LAST_EMPTY_ALT,ruleName:n.name,occurrence:s.idx,alternative:c+1}]:[]})})}function th(n,e,t){const r=new Ci;n.accept(r);let i=r.alternations;return i=dr(i,a=>a.ignoreAmbiguities===!0),Ke(i,a=>{const o=a.idx,c=a.maxLookahead||e,l=Rr(o,n,c,a),u=sh(l,a,n,t),d=ah(l,a,n,t);return u.concat(d)})}class nh extends dn{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function rh(n,e){const t=new Ci;n.accept(t);const r=t.alternations;return Ke(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:n,alternation:s}),type:Le.TOO_MANY_ALTS,ruleName:n.name,occurrence:s.idx}]:[])}function ih(n,e,t){const r=[];return(0,D.Z)(n,i=>{const s=new nh;i.accept(s);const a=s.allProductions;(0,D.Z)(a,o=>{const c=Ri(o),l=o.maxLookahead||e,u=o.idx,h=kr(u,i,c,l)[0];if((0,te.Z)((0,ze.Z)(h))){const f=t.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:f,type:Le.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function sh(n,e,t,r){const i=[],s=(0,xe.Z)(n,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||(0,D.Z)(c,u=>{const d=[l];(0,D.Z)(n,(h,f)=>{l!==f&&Ii(h,u)&&e.definition[f].ignoreAmbiguities!==!0&&d.push(f)}),d.length>1&&!Ii(i,u)&&(i.push(u),o.push({alts:d,path:u}))}),o),[]);return(0,$.Z)(s,o=>{const c=(0,$.Z)(o.alts,u=>u+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:Le.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:o.alts}})}function ah(n,e,t,r){const i=(0,xe.Z)(n,(a,o,c)=>{const l=(0,$.Z)(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return Nn(Ke(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,u=(0,je.Z)(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<c&&Vf(h.path,l));return(0,$.Z)(u,h=>{const f=[h.idx+1,c+1],y=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:f,prefixPath:h.path}),type:Le.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:y,alternatives:f}})}))}function oh(n,e,t){const r=[],i=(0,$.Z)(e,s=>s.name);return(0,D.Z)(n,s=>{const a=s.name;if(Ne(i,a)){const o=t.buildNamespaceConflictError(s);r.push({message:o,type:Le.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function ch(n){const e=(0,pi.Z)(n,{errMsgProvider:Ef}),t={};return(0,D.Z)(n.rules,r=>{t[r.name]=r}),vf(t,e.errMsgProvider)}function lh(n){return n=(0,pi.Z)(n,{errMsgProvider:jt}),zf(n.rules,n.tokenTypes,n.errMsgProvider,n.grammarName)}const vo="MismatchedTokenException",Ao="NoViableAltException",Ro="EarlyExitException",ko="NotAllInputParsedException",Io=[vo,Ao,Ro,ko];Object.freeze(Io);function Cr(n){return Ne(Io,n.name)}class Sr extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Co extends Sr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=vo}}class uh extends Sr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Ao}}class dh extends Sr{constructor(e,t){super(e,t),this.name=ko}}class fh extends Sr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Ro}}const Si={},So="InRuleRecoveryException";class hh extends Error{constructor(e){super(e),this.name=So}}class ph{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,Z.Z)(e,"recoveryEnabled")?e.recoveryEnabled:at.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=mh)}getTokenToInsert(e){const t=vi(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const d=()=>{const h=this.LA(0),f=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:h,ruleName:this.getCurrRuleFullName()}),y=new Co(f,l,this.LA(0));y.resyncedTokens=$n(o),this.SAVE_ERROR(y)};for(;!c;)if(this.tokenMatcher(u,i)){d();return}else if(r.call(this)){d(),e.apply(this,t);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new hh("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||(0,te.Z)(t))return!1;const r=this.LA(1);return(0,on.Z)(t,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return Ne(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),r=2;for(;;){const i=(0,on.Z)(e,s=>co(t,s));if(i!==void 0)return i;t=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Si;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return(0,$.Z)(e,(r,i)=>i===0?Si:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=(0,$.Z)(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return(0,ze.Z)(e)}getFollowSetFromFollowKey(e){if(e===Si)return[Ct];const t=e.ruleName+e.idxInCallingRule+Pa+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Ct)||t.push(e),t}reSyncTo(e){const t=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return $n(t)}attemptInRepetitionRecovery(e,t,r,i,s,a,o){}getCurrentGrammarPath(e,t){const r=this.getHumanReadableRuleStack(),i=(0,Ee.Z)(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return(0,$.Z)(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function mh(n,e,t,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[o];if(c===void 0){const h=this.getCurrRuleFullName(),f=this.getGAstProductions()[h];c=new s(f,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence;const d=c.isEndOfRule;this.RULE_STACK.length===1&&d&&l===void 0&&(l=Ct,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(n,e,t,l)}const gh=4,St=8,vg=12,yh=8,_o=1<<St,No=2<<St,_i=3<<St,Ni=4<<St,xi=5<<St,_r=6<<St;function Li(n,e,t){return t|e|n}const Ag=32-yh;class wi{constructor(e){var t;this.maxLookahead=(t=e==null?void 0:e.maxLookahead)!==null&&t!==void 0?t:at.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if((0,te.Z)(t)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...i,...s]}return t}validateNoLeftRecursion(e){return Ke(e,t=>Eo(t,t,jt))}validateEmptyOrAlternatives(e){return Ke(e,t=>eh(t,jt))}validateAmbiguousAlternationAlternatives(e,t){return Ke(e,r=>th(r,t,jt))}validateSomeNonEmptyLookaheadPath(e,t){return ih(e,t,jt)}buildLookaheadForAlternation(e){return Uf(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Bf)}buildLookaheadForOptional(e){return Gf(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ri(e.prodType),Wf)}}class Th{initLooksAhead(e){this.dynamicTokensEnabled=(0,Z.Z)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:at.dynamicTokensEnabled,this.maxLookahead=(0,Z.Z)(e,"maxLookahead")?e.maxLookahead:at.maxLookahead,this.lookaheadStrategy=(0,Z.Z)(e,"lookaheadStrategy")?e.lookaheadStrategy:new wi({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){(0,D.Z)(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=vh(t);(0,D.Z)(r,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${st(l)}${u}`,()=>{const d=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:t,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=Li(this.fullRuleNameToShort[t.name],_o,l.idx);this.setLaFuncCache(h,d)})}),(0,D.Z)(i,l=>{this.computeLookaheadFunc(t,l.idx,_i,"Repetition",l.maxLookahead,st(l))}),(0,D.Z)(s,l=>{this.computeLookaheadFunc(t,l.idx,No,"Option",l.maxLookahead,st(l))}),(0,D.Z)(a,l=>{this.computeLookaheadFunc(t,l.idx,Ni,"RepetitionMandatory",l.maxLookahead,st(l))}),(0,D.Z)(o,l=>{this.computeLookaheadFunc(t,l.idx,_r,"RepetitionMandatoryWithSeparator",l.maxLookahead,st(l))}),(0,D.Z)(c,l=>{this.computeLookaheadFunc(t,l.idx,xi,"RepetitionWithSeparator",l.maxLookahead,st(l))})})})}computeLookaheadFunc(e,t,r,i,s,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=Li(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,t){const r=this.getLastExplicitRuleShortName();return Li(r,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class Eh extends dn{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Nr=new Eh;function vh(n){Nr.reset(),n.accept(Nr);const e=Nr.dslMethods;return Nr.reset(),e}function xo(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.endOffset=e.endOffset):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset)}function Lo(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.startColumn=e.startColumn,n.startLine=e.startLine,n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine)}function Ah(n,e,t){n.children[t]===void 0?n.children[t]=[e]:n.children[t].push(e)}function Rh(n,e,t){n.children[e]===void 0?n.children[e]=[t]:n.children[e].push(t)}const kh="name";function wo(n,e){Object.defineProperty(n,kh,{enumerable:!1,configurable:!0,writable:!1,value:e})}function Ih(n,e){const t=(0,rn.Z)(n),r=t.length;for(let i=0;i<r;i++){const s=t[i],a=n[s],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function Ch(n,e){const t=function(){};wo(t,n+"BaseSemantics");const r={visit:function(i,s){if((0,Re.Z)(i)&&(i=i[0]),!(0,ft.Z)(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=_h(this,e);if(!(0,te.Z)(i)){const s=(0,$.Z)(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=r,t.prototype.constructor=t,t._RULE_NAMES=e,t}function Sh(n,e,t){const r=function(){};wo(r,n+"BaseSemanticsWithDefaults");const i=Object.create(t.prototype);return(0,D.Z)(e,s=>{i[s]=Ih}),r.prototype=i,r.prototype.constructor=r,r}var Oi;(function(n){n[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD"})(Oi||(Oi={}));function _h(n,e){return Nh(n,e)}function Nh(n,e){const t=(0,je.Z)(e,i=>(0,Bt.Z)(n[i])===!1),r=(0,$.Z)(t,i=>({msg:`Missing visitor method: <${i}> on ${n.constructor.name} CST Visitor.`,type:Oi.MISSING_METHOD,methodName:i}));return Nn(r)}class xh{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,Z.Z)(e,"nodeLocationTracking")?e.nodeLocationTracking:at.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=me.Z,this.cstFinallyStateUpdate=me.Z,this.cstPostTerminal=me.Z,this.cstPostNonTerminal=me.Z,this.cstPostRule=me.Z;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Lo,this.setNodeLocationFromNode=Lo,this.cstPostRule=me.Z,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=me.Z,this.setNodeLocationFromNode=me.Z,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=xo,this.setNodeLocationFromNode=xo,this.cstPostRule=me.Z,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=me.Z,this.setNodeLocationFromNode=me.Z,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=me.Z,this.setNodeLocationFromNode=me.Z,this.cstPostRule=me.Z,this.setInitialNodeLocation=me.Z;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Ah(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Rh(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if((0,ft.Z)(this.baseCstVisitorConstructor)){const e=Ch(this.className,(0,rn.Z)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if((0,ft.Z)(this.baseCstVisitorWithDefaultsConstructor)){const e=Sh(this.className,(0,rn.Z)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class Lh{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):wr}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?wr:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class wh{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=Or){if(Ne(this.definedRulesNames,e)){const a={message:jt.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Le.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,t,r);return this[e]=i,i}OVERRIDE_RULE(e,t,r=Or){const i=qf(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,t,r);return this[e]=s,s}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,t),!0}catch(i){if(Cr(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return zu((0,pe.Z)(this.gastProductionsCache))}}var Oh=p(99702);class Ph{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=vr,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,Z.Z)(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if((0,Re.Z)(e)){if((0,te.Z)(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if((0,Re.Z)(e))this.tokensMap=(0,xe.Z)(e,(s,a)=>(s[a.name]=a,s),{});else if((0,Z.Z)(e,"modes")&&Qe((0,ze.Z)((0,pe.Z)(e.modes)),mf)){const s=(0,ze.Z)((0,pe.Z)(e.modes)),a=(0,fi.Z)(s);this.tokensMap=(0,xe.Z)(a,(o,c)=>(o[c.name]=c,o),{})}else if((0,Oh.Z)(e))this.tokensMap=(0,Ee.Z)(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ct;const r=(0,Z.Z)(e,"modes")?(0,ze.Z)((0,pe.Z)(e.modes)):(0,pe.Z)(e),i=Qe(r,s=>(0,te.Z)(s.categoryMatches));this.tokenMatcher=i?vr:wn,On((0,pe.Z)(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=(0,Z.Z)(r,"resyncEnabled")?r.resyncEnabled:Or.resyncEnabled,s=(0,Z.Z)(r,"recoveryValueFunc")?r.recoveryValueFunc:Or.recoveryValueFunc,a=this.ruleShortNameIdx<<gh+St;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u);const d=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(d),d}catch(d){return this.invokeRuleCatch(d,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u)}catch(d){return this.invokeRuleCatch(d,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){const i=this.RULE_STACK.length===1,s=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Cr(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,t){const r=this.getKeyForAutomaticLookahead(No,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,t){const r=this.getKeyForAutomaticLookahead(Ni,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof t!="function"){s=t.DEF;const a=t.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=t;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,ae.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,Ni,e,Zf)}atLeastOneSepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(_r,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){const i=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,uo],o,_r,e,uo)}else throw this.raiseEarlyExitException(e,ae.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const r=this.getKeyForAutomaticLookahead(_i,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof t!="function"){s=t.DEF;const o=t.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else s=t;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,_i,e,Df,a)}manySepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(xi,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){const i=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,lo],o,xi,e,lo)}}repetitionSepSecondInternal(e,t,r,i,s){for(;r();)this.CONSUME(t),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,i,s],r,_r,e,s)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const r=this.getKeyForAutomaticLookahead(_o,t),i=(0,Re.Z)(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new dh(t,e))}}subruleInternal(e,t,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=t,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,t,r){throw Cr(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,t,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,t,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Co(i,t,s))}consumeInternalRecovery(e,t,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===So?r:s}}else throw r}saveRecogState(){const e=this.errors,t=(0,Ee.Z)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Ct)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class $h{initErrorHandler(e){this._errors=[],this.errorMessageProvider=(0,Z.Z)(e,"errorMessageProvider")?e.errorMessageProvider:at.errorMessageProvider}SAVE_ERROR(e){if(Cr(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,Ee.Z)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return(0,Ee.Z)(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=kr(e,s,t,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new fh(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Rr(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new uh(c,this.LA(1),o))}}class bh{initContentAssist(){}computeContentAssist(e,t){const r=this.gastProductionsCache[e];if((0,ft.Z)(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return fo([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=qe(e.ruleStack),i=this.getGAstProductions()[t];return new Mf(i,e).startWalking()}}const xr={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(xr);const Oo=!0,Po=Math.pow(2,St)-1,$o=oo({name:"RECORDING_PHASE_TOKEN",pattern:Ze.NA});On([$o]);const bo=vi($o,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(bo);const Mh={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class Dh{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${t}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${t}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${t}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${t}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${t}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${t}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${t}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return wr}topLevelRuleRecord(e,t){try{const r=new an({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch(i){throw r}throw r}}optionInternalRecord(e,t){return bn.call(this,Ae,e,t)}atLeastOneInternalRecord(e,t){bn.call(this,Be,t,e)}atLeastOneSepFirstInternalRecord(e,t){bn.call(this,We,t,e,Oo)}manyInternalRecord(e,t){bn.call(this,ce,t,e)}manySepFirstInternalRecord(e,t){bn.call(this,Me,t,e,Oo)}orInternalRecord(e,t){return Zh.call(this,e,t)}subruleInternalRecord(e,t,r){if(Lr(t),!e||(0,Z.Z)(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Mo(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=(0,cn.Z)(this.recordingProdStack),s=e.ruleName,a=new _e({idx:t,nonTerminalName:s,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Mh:xr}consumeInternalRecord(e,t,r){if(Lr(t),!Xa(e)){const a=new Error(`<CONSUME${Mo(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=(0,cn.Z)(this.recordingProdStack),s=new ne({idx:t,terminalType:e,label:r==null?void 0:r.LABEL});return i.definition.push(s),bo}}function bn(n,e,t,r=!1){Lr(t);const i=(0,cn.Z)(this.recordingProdStack),s=(0,Bt.Z)(e)?e:e.DEF,a=new n({definition:[],idx:t});return r&&(a.separator=e.SEP),(0,Z.Z)(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),xr}function Zh(n,e){Lr(e);const t=(0,cn.Z)(this.recordingProdStack),r=(0,Re.Z)(n)===!1,i=r===!1?n:n.DEF,s=new De({definition:[],idx:e,ignoreAmbiguities:r&&n.IGNORE_AMBIGUITIES===!0});(0,Z.Z)(n,"MAX_LOOKAHEAD")&&(s.maxLookahead=n.MAX_LOOKAHEAD);const a=wa(i,o=>(0,Bt.Z)(o.GATE));return s.hasPredicates=a,t.definition.push(s),(0,D.Z)(i,o=>{const c=new be({definition:[]});s.definition.push(c),(0,Z.Z)(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:(0,Z.Z)(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),xr}function Mo(n){return n===0?"":`${n}`}function Lr(n){if(n<0||n>Po){const e=new Error(`Invalid DSL Method idx value: <${n}>
	Idx value must be a none negative value smaller than ${Po+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class Fh{initPerformanceTracer(e){if((0,Z.Z)(e,"traceInitPerf")){const t=e.traceInitPerf,r=typeof t=="number";this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=at.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=Va(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return t()}}function Uh(n,e){e.forEach(t=>{const r=t.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(n.prototype,i,s):n.prototype[i]=t.prototype[i]})})}const wr=vi(Ct,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(wr);const at=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:un,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Or=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var Le;(function(n){n[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",n[n.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Le||(Le={}));function Do(n=void 0){return function(){return n}}class Mn{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Ra(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),(0,D.Z)(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=ch({rules:(0,pe.Z)(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if((0,te.Z)(r)&&this.skipValidations===!1){const i=lh({rules:(0,pe.Z)(this.gastProductionsCache),tokenTypes:(0,pe.Z)(this.tokensMap),errMsgProvider:jt,grammarName:t}),s=Hf({lookaheadStrategy:this.lookaheadStrategy,rules:(0,pe.Z)(this.gastProductionsCache),tokenTypes:(0,pe.Z)(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(i,s)}}),(0,te.Z)(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=fd((0,pe.Z)(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:(0,pe.Z)(this.gastProductionsCache)}),this.preComputeLookaheadFunctions((0,pe.Z)(this.gastProductionsCache))})),!Mn.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,te.Z)(this.definitionErrors))throw e=(0,$.Z)(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(t),r.initLexerAdapter(),r.initLooksAhead(t),r.initRecognizerEngine(e,t),r.initRecoverable(t),r.initTreeBuilder(t),r.initContentAssist(),r.initGastRecorder(t),r.initPerformanceTracer(t),(0,Z.Z)(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=(0,Z.Z)(t,"skipValidations")?t.skipValidations:at.skipValidations}}Mn.DEFER_DEFINITION_ERRORS_HANDLING=!1,Uh(Mn,[ph,Th,xh,Lh,Ph,wh,$h,bh,Dh,Fh]);class Rg extends null{constructor(e,t=at){const r=clone(t);r.outputCst=!0,super(e,r)}}class Gh extends Mn{constructor(e,t=at){const r=(0,Ee.Z)(t);r.outputCst=!1,super(e,r)}}const Bh={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function kg(n,e){const t=Object.assign(Object.assign({},Bh),e),r=buildModel(n);return genDts(r,t)}function Ig(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}class Cg{constructor(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}}function fn(n,e,t){return`${n.name}_${e}_${t}`}const Sg=0,_t=1,Wh=2,Zo=4,Fo=5,_g=6,Dn=7,jh=8,Kh=9,Vh=10,Hh=11,Uo=12;class Pi{constructor(e){this.target=e}isEpsilon(){return!1}}class $i extends Pi{constructor(e,t){super(e),this.tokenType=t}}class Go extends Pi{constructor(e){super(e)}isEpsilon(){return!0}}class bi extends Pi{constructor(e,t,r){super(e),this.rule=t,this.followState=r}isEpsilon(){return!0}}function zh(n){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};Yh(e,n);const t=n.length;for(let r=0;r<t;r++){const i=n[r],s=Kt(e,i,i);s!==void 0&&ap(e,i,s)}return e}function Yh(n,e){const t=e.length;for(let r=0;r<t;r++){const i=e[r],s=ge(n,i,void 0,{type:Wh}),a=ge(n,i,void 0,{type:Dn});s.stop=a,n.ruleToStartState.set(i,s),n.ruleToStopState.set(i,a)}}function Bo(n,e,t){return t instanceof ne?Mi(n,e,t.terminalType,t):t instanceof _e?sp(n,e,t):t instanceof De?ep(n,e,t):t instanceof Ae?tp(n,e,t):t instanceof ce?Xh(n,e,t):t instanceof Me?Jh(n,e,t):t instanceof Be?Qh(n,e,t):t instanceof We?qh(n,e,t):Kt(n,e,t)}function Xh(n,e,t){const r=ge(n,e,t,{type:Fo});Nt(n,r);const i=hn(n,e,r,t,Kt(n,e,t));return jo(n,e,t,i)}function Jh(n,e,t){const r=ge(n,e,t,{type:Fo});Nt(n,r);const i=hn(n,e,r,t,Kt(n,e,t)),s=Mi(n,e,t.separator,t);return jo(n,e,t,i,s)}function Qh(n,e,t){const r=ge(n,e,t,{type:Zo});Nt(n,r);const i=hn(n,e,r,t,Kt(n,e,t));return Wo(n,e,t,i)}function qh(n,e,t){const r=ge(n,e,t,{type:Zo});Nt(n,r);const i=hn(n,e,r,t,Kt(n,e,t)),s=Mi(n,e,t.separator,t);return Wo(n,e,t,i,s)}function ep(n,e,t){const r=ge(n,e,t,{type:_t});Nt(n,r);const i=(0,$.Z)(t.definition,a=>Bo(n,e,a));return hn(n,e,r,t,...i)}function tp(n,e,t){const r=ge(n,e,t,{type:_t});Nt(n,r);const i=hn(n,e,r,t,Kt(n,e,t));return np(n,e,t,i)}function Kt(n,e,t){const r=(0,je.Z)((0,$.Z)(t.definition,i=>Bo(n,e,i)),i=>i!==void 0);return r.length===1?r[0]:r.length===0?void 0:ip(n,r)}function Wo(n,e,t,r,i){const s=r.left,a=r.right,o=ge(n,e,t,{type:Hh});Nt(n,o);const c=ge(n,e,t,{type:Uo});return s.loopback=o,c.loopback=o,n.decisionMap[fn(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",t.idx)]=o,he(a,o),i===void 0?(he(o,s),he(o,c)):(he(o,c),he(o,i.left),he(i.right,s)),{left:s,right:c}}function jo(n,e,t,r,i){const s=r.left,a=r.right,o=ge(n,e,t,{type:Vh});Nt(n,o);const c=ge(n,e,t,{type:Uo}),l=ge(n,e,t,{type:Kh});return o.loopback=l,c.loopback=l,he(o,s),he(o,c),he(a,l),i!==void 0?(he(l,c),he(l,i.left),he(i.right,s)):he(l,o),n.decisionMap[fn(e,i?"RepetitionWithSeparator":"Repetition",t.idx)]=o,{left:o,right:c}}function np(n,e,t,r){const i=r.left,s=r.right;return he(i,s),n.decisionMap[fn(e,"Option",t.idx)]=i,r}function Nt(n,e){return n.decisionStates.push(e),e.decision=n.decisionStates.length-1,e.decision}function hn(n,e,t,r,...i){const s=ge(n,e,r,{type:jh,start:t});t.end=s;for(const o of i)o!==void 0?(he(t,o.left),he(o.right,s)):he(t,s);const a={left:t,right:s};return n.decisionMap[fn(e,rp(r),r.idx)]=t,a}function rp(n){if(n instanceof De)return"Alternation";if(n instanceof Ae)return"Option";if(n instanceof ce)return"Repetition";if(n instanceof Me)return"RepetitionWithSeparator";if(n instanceof Be)return"RepetitionMandatory";if(n instanceof We)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function ip(n,e){const t=e.length;for(let s=0;s<t-1;s++){const a=e[s];let o;a.left.transitions.length===1&&(o=a.left.transitions[0]);const c=o instanceof bi,l=o,u=e[s+1].left;a.left.type===_t&&a.right.type===_t&&o!==void 0&&(c&&l.followState===a.right||o.target===a.right)?(c?l.followState=u:o.target=u,op(n,a.right)):he(a.right,u)}const r=e[0],i=e[t-1];return{left:r.left,right:i.right}}function Mi(n,e,t,r){const i=ge(n,e,r,{type:_t}),s=ge(n,e,r,{type:_t});return Di(i,new $i(s,t)),{left:i,right:s}}function sp(n,e,t){const r=t.referencedRule,i=n.ruleToStartState.get(r),s=ge(n,e,t,{type:_t}),a=ge(n,e,t,{type:_t}),o=new bi(i,r,a);return Di(s,o),{left:s,right:a}}function ap(n,e,t){const r=n.ruleToStartState.get(e);he(r,t.left);const i=n.ruleToStopState.get(e);return he(t.right,i),{left:r,right:i}}function he(n,e){const t=new Go(e);Di(n,t)}function ge(n,e,t,r){const i=Object.assign({atn:n,production:t,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:n.states.length},r);return n.states.push(i),i}function Di(n,e){n.transitions.length===0&&(n.epsilonOnlyTransitions=e.isEpsilon()),n.transitions.push(e)}function op(n,e){n.states.splice(n.states.indexOf(e),1)}const Pr={};class Zi{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=Ko(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return(0,$.Z)(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map)e+=t+":";return e}}function Ko(n,e=!0){return`${e?`a${n.alt}`:""}s${n.state.stateNumber}:${n.stack.map(t=>t.stateNumber.toString()).join("_")}`}var cp=p(81282),lp=p(4903);function up(n,e){return n&&n.length?(0,lp.Z)(n,(0,sn.Z)(e,2)):[]}var dp=up;function fp(n,e){const t={};return r=>{const i=r.toString();let s=t[i];return s!==void 0||(s={atnStartState:n,decision:e,states:{}},t[i]=s),s}}class Vo{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let r=0;r<t;r++)e+=this.predicates[r]===!0?"1":"0";return e}}const Ho=new Vo;class hp extends wi{constructor(e){var t;super(),this.logging=(t=e==null?void 0:e.logging)!==null&&t!==void 0?t:r=>console.log(r)}initialize(e){this.atn=zh(e.rules),this.dfas=pp(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:t,rule:r,hasPredicates:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=fn(r,"Alternation",t),u=this.atn.decisionMap[c].decision,d=(0,$.Z)(ho({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:r}),h=>(0,$.Z)(h,f=>f[0]));if(zo(d,!1)&&!s){const h=(0,xe.Z)(d,(f,y,T)=>((0,D.Z)(y,w=>{w&&(f[w.tokenTypeIdx]=T,(0,D.Z)(w.categoryMatches,R=>{f[R]=T}))}),f),{});return i?function(f){var y;const T=this.LA(1),w=h[T.tokenTypeIdx];if(f!==void 0&&w!==void 0){const R=(y=f[w])===null||y===void 0?void 0:y.GATE;if(R!==void 0&&R.call(this)===!1)return}return w}:function(){const f=this.LA(1);return h[f.tokenTypeIdx]}}else return i?function(h){const f=new Vo,y=h===void 0?0:h.length;for(let w=0;w<y;w++){const R=h==null?void 0:h[w].GATE;f.set(w,R===void 0||R.call(this))}const T=Fi.call(this,a,u,f,o);return typeof T=="number"?T:void 0}:function(){const h=Fi.call(this,a,u,Ho,o);return typeof h=="number"?h:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:t,rule:r,prodType:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=fn(r,i,t),u=this.atn.decisionMap[c].decision,d=(0,$.Z)(ho({maxLookahead:1,occurrence:t,prodType:i,rule:r}),h=>(0,$.Z)(h,f=>f[0]));if(zo(d)&&d[0][0]&&!s){const h=d[0],f=(0,ze.Z)(h);if(f.length===1&&(0,te.Z)(f[0].categoryMatches)){const T=f[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===T}}else{const y=(0,xe.Z)(f,(T,w)=>(w!==void 0&&(T[w.tokenTypeIdx]=!0,(0,D.Z)(w.categoryMatches,R=>{T[R]=!0})),T),{});return function(){const T=this.LA(1);return y[T.tokenTypeIdx]===!0}}}return function(){const h=Fi.call(this,a,u,Ho,o);return typeof h=="object"?!1:h===0}}}function zo(n,e=!0){const t=new Set;for(const r of n){const i=new Set;for(const s of r){if(s===void 0){if(e)break;return!1}const a=[s.tokenTypeIdx].concat(s.categoryMatches);for(const o of a)if(t.has(o)){if(!i.has(o))return!1}else t.add(o),i.add(o)}}return!0}function pp(n){const e=n.decisionStates.length,t=Array(e);for(let r=0;r<e;r++)t[r]=fp(n.decisionStates[r],r);return t}function Fi(n,e,t,r){const i=n[e](t);let s=i.start;if(s===void 0){const o=Cp(i.atnStartState);s=Jo(i,Yo(o)),i.start=s}return mp.apply(this,[i,s,t,r])}function mp(n,e,t,r){let i=e,s=1;const a=[];let o=this.LA(s++);for(;;){let c=Ap(i,o);if(c===void 0&&(c=gp.apply(this,[n,i,o,s,t,r])),c===Pr)return vp(a,i,o);if(c.isAcceptState===!0)return c.prediction;i=c,a.push(o),o=this.LA(s++)}}function gp(n,e,t,r,i,s){const a=Rp(e.configs,t,i);if(a.size===0)return Xo(n,e,t,Pr),Pr;let o=Yo(a);const c=Ip(a,i);if(c!==void 0)o.isAcceptState=!0,o.prediction=c,o.configs.uniqueAlt=c;else if(xp(a)){const l=(0,cp.Z)(a.alts);o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l,yp.apply(this,[n,r,a.alts,s])}return o=Xo(n,e,t,o),o}function yp(n,e,t,r){const i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);const s=n.atnStartState,a=s.rule,o=s.production,c=Tp({topLevelRule:a,ambiguityIndices:t,production:o,prefixPath:i});r(c)}function Tp(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.production.idx===0?"":n.production.idx;let r=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(", ")}> in <${Ep(n.production)}${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r}function Ep(n){if(n instanceof _e)return"SUBRULE";if(n instanceof Ae)return"OPTION";if(n instanceof De)return"OR";if(n instanceof Be)return"AT_LEAST_ONE";if(n instanceof We)return"AT_LEAST_ONE_SEP";if(n instanceof Me)return"MANY_SEP";if(n instanceof ce)return"MANY";if(n instanceof ne)return"CONSUME";throw Error("non exhaustive match")}function vp(n,e,t){const r=Ke(e.configs.elements,s=>s.state.transitions),i=dp(r.filter(s=>s instanceof $i).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:t,possibleTokenTypes:i,tokenPath:n}}function Ap(n,e){return n.edges[e.tokenTypeIdx]}function Rp(n,e,t){const r=new Zi,i=[];for(const a of n.elements){if(t.is(a.alt)===!1)continue;if(a.state.type===Dn){i.push(a);continue}const o=a.state.transitions.length;for(let c=0;c<o;c++){const l=a.state.transitions[c],u=kp(l,e);u!==void 0&&r.add({state:u,alt:a.alt,stack:a.stack})}}let s;if(i.length===0&&r.size===1&&(s=r),s===void 0){s=new Zi;for(const a of r.elements)$r(a,s)}if(i.length>0&&!_p(s))for(const a of i)s.add(a);return s}function kp(n,e){if(n instanceof $i&&co(e,n.tokenType))return n.target}function Ip(n,e){let t;for(const r of n.elements)if(e.is(r.alt)===!0){if(t===void 0)t=r.alt;else if(t!==r.alt)return}return t}function Yo(n){return{configs:n,edges:{},isAcceptState:!1,prediction:-1}}function Xo(n,e,t,r){return r=Jo(n,r),e.edges[t.tokenTypeIdx]=r,r}function Jo(n,e){if(e===Pr)return e;const t=e.configs.key,r=n.states[t];return r!==void 0?r:(e.configs.finalize(),n.states[t]=e,e)}function Cp(n){const e=new Zi,t=n.transitions.length;for(let r=0;r<t;r++){const s={state:n.transitions[r].target,alt:r,stack:[]};$r(s,e)}return e}function $r(n,e){const t=n.state;if(t.type===Dn){if(n.stack.length>0){const i=[...n.stack],a={state:i.pop(),alt:n.alt,stack:i};$r(a,e)}else e.add(n);return}t.epsilonOnlyTransitions||e.add(n);const r=t.transitions.length;for(let i=0;i<r;i++){const s=t.transitions[i],a=Sp(n,s);a!==void 0&&$r(a,e)}}function Sp(n,e){if(e instanceof Go)return{state:e.target,alt:n.alt,stack:n.stack};if(e instanceof bi){const t=[...n.stack,e.followState];return{state:e.target,alt:n.alt,stack:t}}}function _p(n){for(const e of n.elements)if(e.state.type===Dn)return!0;return!1}function Np(n){for(const e of n.elements)if(e.state.type!==Dn)return!1;return!0}function xp(n){if(Np(n))return!0;const e=Lp(n.elements);return wp(e)&&!Op(e)}function Lp(n){const e=new Map;for(const t of n){const r=Ko(t,!1);let i=e.get(r);i===void 0&&(i={},e.set(r,i)),i[t.alt]=!0}return e}function wp(n){for(const e of Array.from(n.values()))if(Object.keys(e).length>1)return!0;return!1}function Op(n){for(const e of Array.from(n.values()))if(Object.keys(e).length===1)return!0;return!1}var Qo;(function(n){function e(t){return typeof t=="string"}n.is=e})(Qo||(Qo={}));var Ui;(function(n){function e(t){return typeof t=="string"}n.is=e})(Ui||(Ui={}));var qo;(function(n){n.MIN_VALUE=-2147483648,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(qo||(qo={}));var br;(function(n){n.MIN_VALUE=0,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(br||(br={}));var ee;(function(n){function e(r,i){return r===Number.MAX_VALUE&&(r=br.MAX_VALUE),i===Number.MAX_VALUE&&(i=br.MAX_VALUE),{line:r,character:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&m.uinteger(i.line)&&m.uinteger(i.character)}n.is=t})(ee||(ee={}));var J;(function(n){function e(r,i,s,a){if(m.uinteger(r)&&m.uinteger(i)&&m.uinteger(s)&&m.uinteger(a))return{start:ee.create(r,i),end:ee.create(s,a)};if(ee.is(r)&&ee.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${s}, ${a}]`)}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&ee.is(i.start)&&ee.is(i.end)}n.is=t})(J||(J={}));var Mr;(function(n){function e(r,i){return{uri:r,range:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&J.is(i.range)&&(m.string(i.uri)||m.undefined(i.uri))}n.is=t})(Mr||(Mr={}));var ec;(function(n){function e(r,i,s,a){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:a}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&J.is(i.targetRange)&&m.string(i.targetUri)&&J.is(i.targetSelectionRange)&&(J.is(i.originSelectionRange)||m.undefined(i.originSelectionRange))}n.is=t})(ec||(ec={}));var Gi;(function(n){function e(r,i,s,a){return{red:r,green:i,blue:s,alpha:a}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.numberRange(i.red,0,1)&&m.numberRange(i.green,0,1)&&m.numberRange(i.blue,0,1)&&m.numberRange(i.alpha,0,1)}n.is=t})(Gi||(Gi={}));var tc;(function(n){function e(r,i){return{range:r,color:i}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&J.is(i.range)&&Gi.is(i.color)}n.is=t})(tc||(tc={}));var nc;(function(n){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.string(i.label)&&(m.undefined(i.textEdit)||ht.is(i))&&(m.undefined(i.additionalTextEdits)||m.typedArray(i.additionalTextEdits,ht.is))}n.is=t})(nc||(nc={}));var rc;(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(rc||(rc={}));var ic;(function(n){function e(r,i,s,a,o,c){const l={startLine:r,endLine:i};return m.defined(s)&&(l.startCharacter=s),m.defined(a)&&(l.endCharacter=a),m.defined(o)&&(l.kind=o),m.defined(c)&&(l.collapsedText=c),l}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.uinteger(i.startLine)&&m.uinteger(i.startLine)&&(m.undefined(i.startCharacter)||m.uinteger(i.startCharacter))&&(m.undefined(i.endCharacter)||m.uinteger(i.endCharacter))&&(m.undefined(i.kind)||m.string(i.kind))}n.is=t})(ic||(ic={}));var Bi;(function(n){function e(r,i){return{location:r,message:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&Mr.is(i.location)&&m.string(i.message)}n.is=t})(Bi||(Bi={}));var sc;(function(n){n.Error=1,n.Warning=2,n.Information=3,n.Hint=4})(sc||(sc={}));var ac;(function(n){n.Unnecessary=1,n.Deprecated=2})(ac||(ac={}));var oc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&m.string(r.href)}n.is=e})(oc||(oc={}));var Dr;(function(n){function e(r,i,s,a,o,c){let l={range:r,message:i};return m.defined(s)&&(l.severity=s),m.defined(a)&&(l.code=a),m.defined(o)&&(l.source=o),m.defined(c)&&(l.relatedInformation=c),l}n.create=e;function t(r){var i;let s=r;return m.defined(s)&&J.is(s.range)&&m.string(s.message)&&(m.number(s.severity)||m.undefined(s.severity))&&(m.integer(s.code)||m.string(s.code)||m.undefined(s.code))&&(m.undefined(s.codeDescription)||m.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(m.string(s.source)||m.undefined(s.source))&&(m.undefined(s.relatedInformation)||m.typedArray(s.relatedInformation,Bi.is))}n.is=t})(Dr||(Dr={}));var pn;(function(n){function e(r,i,...s){let a={title:r,command:i};return m.defined(s)&&s.length>0&&(a.arguments=s),a}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.title)&&m.string(i.command)}n.is=t})(pn||(pn={}));var ht;(function(n){function e(s,a){return{range:s,newText:a}}n.replace=e;function t(s,a){return{range:{start:s,end:s},newText:a}}n.insert=t;function r(s){return{range:s,newText:""}}n.del=r;function i(s){const a=s;return m.objectLiteral(a)&&m.string(a.newText)&&J.is(a.range)}n.is=i})(ht||(ht={}));var mn;(function(n){function e(r,i,s){const a={label:r};return i!==void 0&&(a.needsConfirmation=i),s!==void 0&&(a.description=s),a}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.string(i.label)&&(m.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(m.string(i.description)||i.description===void 0)}n.is=t})(mn||(mn={}));var ke;(function(n){function e(t){const r=t;return m.string(r)}n.is=e})(ke||(ke={}));var xt;(function(n){function e(s,a,o){return{range:s,newText:a,annotationId:o}}n.replace=e;function t(s,a,o){return{range:{start:s,end:s},newText:a,annotationId:o}}n.insert=t;function r(s,a){return{range:s,newText:"",annotationId:a}}n.del=r;function i(s){const a=s;return ht.is(a)&&(mn.is(a.annotationId)||ke.is(a.annotationId))}n.is=i})(xt||(xt={}));var Zr;(function(n){function e(r,i){return{textDocument:r,edits:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&Ur.is(i.textDocument)&&Array.isArray(i.edits)}n.is=t})(Zr||(Zr={}));var Zn;(function(n){function e(r,i,s){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){let i=r;return i&&i.kind==="create"&&m.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}n.is=t})(Zn||(Zn={}));var Fn;(function(n){function e(r,i,s,a){let o={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(o.options=s),a!==void 0&&(o.annotationId=a),o}n.create=e;function t(r){let i=r;return i&&i.kind==="rename"&&m.string(i.oldUri)&&m.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}n.is=t})(Fn||(Fn={}));var Un;(function(n){function e(r,i,s){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){let i=r;return i&&i.kind==="delete"&&m.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||m.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||m.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ke.is(i.annotationId))}n.is=t})(Un||(Un={}));var Wi;(function(n){function e(t){let r=t;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>m.string(i.kind)?Zn.is(i)||Fn.is(i)||Un.is(i):Zr.is(i)))}n.is=e})(Wi||(Wi={}));class Fr{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,r){let i,s;if(r===void 0?i=ht.insert(e,t):ke.is(r)?(s=r,i=xt.insert(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=xt.insert(e,t,s)),this.edits.push(i),s!==void 0)return s}replace(e,t,r){let i,s;if(r===void 0?i=ht.replace(e,t):ke.is(r)?(s=r,i=xt.replace(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=xt.replace(e,t,s)),this.edits.push(i),s!==void 0)return s}delete(e,t){let r,i;if(t===void 0?r=ht.del(e):ke.is(t)?(i=t,r=xt.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),r=xt.del(e,i)),this.edits.push(r),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}}class cc{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let r;if(ke.is(e)?r=e:(r=this.nextId(),t=e),this._annotations[r]!==void 0)throw new Error(`Id ${r} is already in use.`);if(t===void 0)throw new Error(`No annotation provided for id ${r}`);return this._annotations[r]=t,this._size++,r}nextId(){return this._counter++,this._counter.toString()}}class Ng{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new cc(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(t=>{if(Zr.is(t)){const r=new Fr(t.edits,this._changeAnnotations);this._textEditChanges[t.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(t=>{const r=new Fr(e.changes[t]);this._textEditChanges[t]=r})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(Ur.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let r=this._textEditChanges[t.uri];if(!r){const i=[],s={textDocument:t,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Fr(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let r=[];this._workspaceEdit.changes[e]=r,t=new Fr(r),this._textEditChanges[e]=t}return t}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new cc,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;mn.is(t)||ke.is(t)?i=t:r=t;let s,a;if(i===void 0?s=Zn.create(e,r):(a=ke.is(i)?i:this._changeAnnotations.manage(i),s=Zn.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}renameFile(e,t,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let s;mn.is(r)||ke.is(r)?s=r:i=r;let a,o;if(s===void 0?a=Fn.create(e,t,i):(o=ke.is(s)?s:this._changeAnnotations.manage(s),a=Fn.create(e,t,i,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o}deleteFile(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;mn.is(t)||ke.is(t)?i=t:r=t;let s,a;if(i===void 0?s=Un.create(e,r):(a=ke.is(i)?i:this._changeAnnotations.manage(i),s=Un.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}}var lc;(function(n){function e(r){return{uri:r}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)}n.is=t})(lc||(lc={}));var uc;(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&m.integer(i.version)}n.is=t})(uc||(uc={}));var Ur;(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&(i.version===null||m.integer(i.version))}n.is=t})(Ur||(Ur={}));var dc;(function(n){function e(r,i,s,a){return{uri:r,languageId:i,version:s,text:a}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&m.string(i.languageId)&&m.integer(i.version)&&m.string(i.text)}n.is=t})(dc||(dc={}));var ji;(function(n){n.PlainText="plaintext",n.Markdown="markdown";function e(t){const r=t;return r===n.PlainText||r===n.Markdown}n.is=e})(ji||(ji={}));var Gn;(function(n){function e(t){const r=t;return m.objectLiteral(t)&&ji.is(r.kind)&&m.string(r.value)}n.is=e})(Gn||(Gn={}));var fc;(function(n){n.Text=1,n.Method=2,n.Function=3,n.Constructor=4,n.Field=5,n.Variable=6,n.Class=7,n.Interface=8,n.Module=9,n.Property=10,n.Unit=11,n.Value=12,n.Enum=13,n.Keyword=14,n.Snippet=15,n.Color=16,n.File=17,n.Reference=18,n.Folder=19,n.EnumMember=20,n.Constant=21,n.Struct=22,n.Event=23,n.Operator=24,n.TypeParameter=25})(fc||(fc={}));var hc;(function(n){n.PlainText=1,n.Snippet=2})(hc||(hc={}));var pc;(function(n){n.Deprecated=1})(pc||(pc={}));var mc;(function(n){function e(r,i,s){return{newText:r,insert:i,replace:s}}n.create=e;function t(r){const i=r;return i&&m.string(i.newText)&&J.is(i.insert)&&J.is(i.replace)}n.is=t})(mc||(mc={}));var gc;(function(n){n.asIs=1,n.adjustIndentation=2})(gc||(gc={}));var yc;(function(n){function e(t){const r=t;return r&&(m.string(r.detail)||r.detail===void 0)&&(m.string(r.description)||r.description===void 0)}n.is=e})(yc||(yc={}));var Tc;(function(n){function e(t){return{label:t}}n.create=e})(Tc||(Tc={}));var Ec;(function(n){function e(t,r){return{items:t||[],isIncomplete:!!r}}n.create=e})(Ec||(Ec={}));var Gr;(function(n){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=e;function t(r){const i=r;return m.string(i)||m.objectLiteral(i)&&m.string(i.language)&&m.string(i.value)}n.is=t})(Gr||(Gr={}));var vc;(function(n){function e(t){let r=t;return!!r&&m.objectLiteral(r)&&(Gn.is(r.contents)||Gr.is(r.contents)||m.typedArray(r.contents,Gr.is))&&(t.range===void 0||J.is(t.range))}n.is=e})(vc||(vc={}));var Ac;(function(n){function e(t,r){return r?{label:t,documentation:r}:{label:t}}n.create=e})(Ac||(Ac={}));var Rc;(function(n){function e(t,r,...i){let s={label:t};return m.defined(r)&&(s.documentation=r),m.defined(i)?s.parameters=i:s.parameters=[],s}n.create=e})(Rc||(Rc={}));var kc;(function(n){n.Text=1,n.Read=2,n.Write=3})(kc||(kc={}));var Ic;(function(n){function e(t,r){let i={range:t};return m.number(r)&&(i.kind=r),i}n.create=e})(Ic||(Ic={}));var Cc;(function(n){n.File=1,n.Module=2,n.Namespace=3,n.Package=4,n.Class=5,n.Method=6,n.Property=7,n.Field=8,n.Constructor=9,n.Enum=10,n.Interface=11,n.Function=12,n.Variable=13,n.Constant=14,n.String=15,n.Number=16,n.Boolean=17,n.Array=18,n.Object=19,n.Key=20,n.Null=21,n.EnumMember=22,n.Struct=23,n.Event=24,n.Operator=25,n.TypeParameter=26})(Cc||(Cc={}));var Sc;(function(n){n.Deprecated=1})(Sc||(Sc={}));var _c;(function(n){function e(t,r,i,s,a){let o={name:t,kind:r,location:{uri:s,range:i}};return a&&(o.containerName=a),o}n.create=e})(_c||(_c={}));var Nc;(function(n){function e(t,r,i,s){return s!==void 0?{name:t,kind:r,location:{uri:i,range:s}}:{name:t,kind:r,location:{uri:i}}}n.create=e})(Nc||(Nc={}));var xc;(function(n){function e(r,i,s,a,o,c){let l={name:r,detail:i,kind:s,range:a,selectionRange:o};return c!==void 0&&(l.children=c),l}n.create=e;function t(r){let i=r;return i&&m.string(i.name)&&m.number(i.kind)&&J.is(i.range)&&J.is(i.selectionRange)&&(i.detail===void 0||m.string(i.detail))&&(i.deprecated===void 0||m.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}n.is=t})(xc||(xc={}));var Lc;(function(n){n.Empty="",n.QuickFix="quickfix",n.Refactor="refactor",n.RefactorExtract="refactor.extract",n.RefactorInline="refactor.inline",n.RefactorRewrite="refactor.rewrite",n.Source="source",n.SourceOrganizeImports="source.organizeImports",n.SourceFixAll="source.fixAll"})(Lc||(Lc={}));var Br;(function(n){n.Invoked=1,n.Automatic=2})(Br||(Br={}));var wc;(function(n){function e(r,i,s){let a={diagnostics:r};return i!=null&&(a.only=i),s!=null&&(a.triggerKind=s),a}n.create=e;function t(r){let i=r;return m.defined(i)&&m.typedArray(i.diagnostics,Dr.is)&&(i.only===void 0||m.typedArray(i.only,m.string))&&(i.triggerKind===void 0||i.triggerKind===Br.Invoked||i.triggerKind===Br.Automatic)}n.is=t})(wc||(wc={}));var Oc;(function(n){function e(r,i,s){let a={title:r},o=!0;return typeof i=="string"?(o=!1,a.kind=i):pn.is(i)?a.command=i:a.edit=i,o&&s!==void 0&&(a.kind=s),a}n.create=e;function t(r){let i=r;return i&&m.string(i.title)&&(i.diagnostics===void 0||m.typedArray(i.diagnostics,Dr.is))&&(i.kind===void 0||m.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||pn.is(i.command))&&(i.isPreferred===void 0||m.boolean(i.isPreferred))&&(i.edit===void 0||Wi.is(i.edit))}n.is=t})(Oc||(Oc={}));var Pc;(function(n){function e(r,i){let s={range:r};return m.defined(i)&&(s.data=i),s}n.create=e;function t(r){let i=r;return m.defined(i)&&J.is(i.range)&&(m.undefined(i.command)||pn.is(i.command))}n.is=t})(Pc||(Pc={}));var $c;(function(n){function e(r,i){return{tabSize:r,insertSpaces:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.uinteger(i.tabSize)&&m.boolean(i.insertSpaces)}n.is=t})($c||($c={}));var bc;(function(n){function e(r,i,s){return{range:r,target:i,data:s}}n.create=e;function t(r){let i=r;return m.defined(i)&&J.is(i.range)&&(m.undefined(i.target)||m.string(i.target))}n.is=t})(bc||(bc={}));var Mc;(function(n){function e(r,i){return{range:r,parent:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&J.is(i.range)&&(i.parent===void 0||n.is(i.parent))}n.is=t})(Mc||(Mc={}));var Dc;(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",n.decorator="decorator"})(Dc||(Dc={}));var Zc;(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(Zc||(Zc={}));var Fc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(Fc||(Fc={}));var Uc;(function(n){function e(r,i){return{range:r,text:i}}n.create=e;function t(r){const i=r;return i!=null&&J.is(i.range)&&m.string(i.text)}n.is=t})(Uc||(Uc={}));var Gc;(function(n){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}n.create=e;function t(r){const i=r;return i!=null&&J.is(i.range)&&m.boolean(i.caseSensitiveLookup)&&(m.string(i.variableName)||i.variableName===void 0)}n.is=t})(Gc||(Gc={}));var Bc;(function(n){function e(r,i){return{range:r,expression:i}}n.create=e;function t(r){const i=r;return i!=null&&J.is(i.range)&&(m.string(i.expression)||i.expression===void 0)}n.is=t})(Bc||(Bc={}));var Wc;(function(n){function e(r,i){return{frameId:r,stoppedLocation:i}}n.create=e;function t(r){const i=r;return m.defined(i)&&J.is(r.stoppedLocation)}n.is=t})(Wc||(Wc={}));var Ki;(function(n){n.Type=1,n.Parameter=2;function e(t){return t===1||t===2}n.is=e})(Ki||(Ki={}));var Vi;(function(n){function e(r){return{value:r}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&(i.tooltip===void 0||m.string(i.tooltip)||Gn.is(i.tooltip))&&(i.location===void 0||Mr.is(i.location))&&(i.command===void 0||pn.is(i.command))}n.is=t})(Vi||(Vi={}));var jc;(function(n){function e(r,i,s){const a={position:r,label:i};return s!==void 0&&(a.kind=s),a}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&ee.is(i.position)&&(m.string(i.label)||m.typedArray(i.label,Vi.is))&&(i.kind===void 0||Ki.is(i.kind))&&i.textEdits===void 0||m.typedArray(i.textEdits,ht.is)&&(i.tooltip===void 0||m.string(i.tooltip)||Gn.is(i.tooltip))&&(i.paddingLeft===void 0||m.boolean(i.paddingLeft))&&(i.paddingRight===void 0||m.boolean(i.paddingRight))}n.is=t})(jc||(jc={}));var Kc;(function(n){function e(t){return{kind:"snippet",value:t}}n.createSnippet=e})(Kc||(Kc={}));var Vc;(function(n){function e(t,r,i,s){return{insertText:t,filterText:r,range:i,command:s}}n.create=e})(Vc||(Vc={}));var Hc;(function(n){function e(t){return{items:t}}n.create=e})(Hc||(Hc={}));var zc;(function(n){n.Invoked=0,n.Automatic=1})(zc||(zc={}));var Yc;(function(n){function e(t,r){return{range:t,text:r}}n.create=e})(Yc||(Yc={}));var Xc;(function(n){function e(t,r){return{triggerKind:t,selectedCompletionInfo:r}}n.create=e})(Xc||(Xc={}));var Jc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&Ui.is(r.uri)&&m.string(r.name)}n.is=e})(Jc||(Jc={}));const xg=null;var Qc;(function(n){function e(s,a,o,c){return new Pp(s,a,o,c)}n.create=e;function t(s){let a=s;return!!(m.defined(a)&&m.string(a.uri)&&(m.undefined(a.languageId)||m.string(a.languageId))&&m.uinteger(a.lineCount)&&m.func(a.getText)&&m.func(a.positionAt)&&m.func(a.offsetAt))}n.is=t;function r(s,a){let o=s.getText(),c=i(a,(u,d)=>{let h=u.range.start.line-d.range.start.line;return h===0?u.range.start.character-d.range.start.character:h}),l=o.length;for(let u=c.length-1;u>=0;u--){let d=c[u],h=s.offsetAt(d.range.start),f=s.offsetAt(d.range.end);if(f<=l)o=o.substring(0,h)+d.newText+o.substring(f,o.length);else throw new Error("Overlapping edit");l=h}return o}n.applyEdits=r;function i(s,a){if(s.length<=1)return s;const o=s.length/2|0,c=s.slice(0,o),l=s.slice(o);i(c,a),i(l,a);let u=0,d=0,h=0;for(;u<c.length&&d<l.length;)a(c[u],l[d])<=0?s[h++]=c[u++]:s[h++]=l[d++];for(;u<c.length;)s[h++]=c[u++];for(;d<l.length;)s[h++]=l[d++];return s}})(Qc||(Qc={}));class Pp{constructor(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,r=!0;for(let i=0;i<t.length;i++){r&&(e.push(i),r=!1);let s=t.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,i=t.length;if(i===0)return ee.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);t[a]>e?i=a:r=a+1}let s=r-1;return ee.create(s,e-t[s])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}var m;(function(n){const e=Object.prototype.toString;function t(f){return typeof f!="undefined"}n.defined=t;function r(f){return typeof f=="undefined"}n.undefined=r;function i(f){return f===!0||f===!1}n.boolean=i;function s(f){return e.call(f)==="[object String]"}n.string=s;function a(f){return e.call(f)==="[object Number]"}n.number=a;function o(f,y,T){return e.call(f)==="[object Number]"&&y<=f&&f<=T}n.numberRange=o;function c(f){return e.call(f)==="[object Number]"&&-2147483648<=f&&f<=2147483647}n.integer=c;function l(f){return e.call(f)==="[object Number]"&&0<=f&&f<=2147483647}n.uinteger=l;function u(f){return e.call(f)==="[object Function]"}n.func=u;function d(f){return f!==null&&typeof f=="object"}n.objectLiteral=d;function h(f,y){return Array.isArray(f)&&f.every(y)}n.typedArray=h})(m||(m={}));class $p{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){return this.rootNode=new el(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const t=new zi;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){const r=new Hi(e.startOffset,e.image.length,At(e),e.tokenType,!1);return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){const t=e.container;if(t){const r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}construct(e){const t=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=t;const r=this.nodeStack.pop();(r==null?void 0:r.content.length)===0&&this.removeNode(r)}addHiddenTokens(e){for(const t of e){const r=new Hi(t.startOffset,t.image.length,At(t),t.tokenType,!0);r.root=this.rootNode,this.addHiddenToken(this.rootNode,r)}}addHiddenToken(e,t){const{offset:r,end:i}=t;for(let s=0;s<e.content.length;s++){const a=e.content[s],{offset:o,end:c}=a;if(v(a)&&r>o&&i<c){this.addHiddenToken(a,t);return}else if(i<=o){e.content.splice(s,0,t);return}}e.content.push(t)}}class qc{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(t=this.container)===null||t===void 0?void 0:t.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class Hi extends qc{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=t,this._range=r}}class zi extends qc{constructor(){super(...arguments),this.content=new Yi(this)}get children(){return this.content}get offset(){var e,t;return(t=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&t!==void 0?t:0}get length(){return this.end-this.offset}get end(){var e,t;return(t=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&t!==void 0?t:0}get range(){const e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(this._rangeCache===void 0){const{range:r}=e,{range:i}=t;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}else return{start:ee.create(0,0),end:ee.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}}class Yi extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,Yi.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...r){return this.addParents(r),super.splice(e,t,...r)}addParents(e){for(const t of e)t.container=this.parent}}class el extends zi{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e!=null?e:""}}const Xi=Symbol("Datatype");function Ji(n){return n.$type===Xi}const tl="\u200B",nl=n=>n.endsWith(tl)?n:n+tl;class rl{constructor(e){this._unorderedGroups=new Map,this.lexer=e.parser.Lexer;const t=this.lexer.definition;this.wrapper=new Fp(t,Object.assign(Object.assign({},e.parser.ParserConfig),{errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class bp extends rl{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new $p,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){const r=e.fragment?void 0:oi(e)?Xi:ar(e),i=this.wrapper.DEFINE_RULE(nl(e.name),this.startImplementation(r,t).bind(this));return e.entry&&(this.mainRule=i),i}parse(e){this.nodeBuilder.buildRootNode(e);const t=this.lexer.tokenize(e);this.wrapper.input=t.tokens;const r=this.mainRule.call(this.wrapper,{});return this.nodeBuilder.addHiddenTokens(t.hidden),this.unorderedGroups.clear(),{value:r,lexerErrors:t.errors,parserErrors:this.wrapper.errors}}startImplementation(e,t){return r=>{if(!this.isRecording()){const s={$type:e};this.stack.push(s),e===Xi&&(s.value="")}let i;try{i=t(r)}catch(s){i=void 0}return!this.isRecording()&&i===void 0&&(i=this.construct()),i}}consume(e,t,r){const i=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(i)){const s=this.nodeBuilder.buildLeafNode(i,r),{assignment:a,isCrossRef:o}=this.getAssignment(r),c=this.current;if(a){const l=Zt(r)?i.image:this.converter.convert(i.image,s);this.assign(a.operator,a.feature,l,s,o)}else if(Ji(c)){let l=i.image;Zt(r)||(l=this.converter.convert(l,s).toString()),c.value+=l}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,t,r,i){let s;this.isRecording()||(s=this.nodeBuilder.buildCompositeNode(r));const a=this.wrapper.wrapSubrule(e,t,i);!this.isRecording()&&s&&s.length>0&&this.performSubruleAssignment(a,r,s)}performSubruleAssignment(e,t,r){const{assignment:i,isCrossRef:s}=this.getAssignment(t);if(i)this.assign(i.operator,i.feature,e,r,s);else if(!i){const a=this.current;if(Ji(a))a.value+=e.toString();else if(typeof e=="object"&&e){const o=e.$type,c=this.assignWithoutOverride(e,a);o&&(c.$type=o);const l=c;this.stack.pop(),this.stack.push(l)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(!r.$cstNode&&t.feature&&t.operator){r=this.construct(!1);const s=r.$cstNode.feature;this.nodeBuilder.buildCompositeNode(s)}const i={$type:e};this.stack.pop(),this.stack.push(i),t.feature&&t.operator&&this.assign(t.operator,t.feature,r,r.$cstNode,!1)}}construct(e=!0){if(this.isRecording())return;const t=this.current;return aa(t),this.nodeBuilder.construct(t),e&&this.stack.pop(),Ji(t)?this.converter.convert(t.value,t.$cstNode):(iu(this.astReflection,t),t)}getAssignment(e){if(!this.assignmentMap.has(e)){const t=qn(e,Dt);this.assignmentMap.set(e,{assignment:t,isCrossRef:t?ei(t.terminal):!1})}return this.assignmentMap.get(e)}assign(e,t,r,i,s){const a=this.current;let o;switch(s&&typeof r=="string"?o=this.linker.buildReference(a,t,i,r):o=r,e){case"=":{a[t]=o;break}case"?=":{a[t]=!0;break}case"+=":Array.isArray(a[t])||(a[t]=[]),a[t].push(o)}}assignWithoutOverride(e,t){for(const[r,i]of Object.entries(t)){const s=e[r];s===void 0?e[r]=i:Array.isArray(s)&&Array.isArray(i)&&(i.push(...s),e[r]=i)}return e}get definitionErrors(){return this.wrapper.definitionErrors}}class Mp{buildMismatchTokenMessage(e){return un.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return un.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return un.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return un.buildEarlyExitMessage(e)}}class il extends Mp{buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class Dp extends rl{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const t=this.lexer.tokenize(e);return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){const r=this.wrapper.DEFINE_RULE(nl(e.name),this.startImplementation(t).bind(this));return e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{const r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,r,i){this.before(r),this.wrapper.wrapSubrule(e,t,i),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}}const Zp={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new il};class Fp extends Gh{constructor(e,t){const r=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},Zp),{lookaheadStrategy:r?new wi({maxLookahead:t.maxLookahead}):new hp}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function sl(n,e,t){return Up({parser:e,tokens:t,rules:new Map,ruleNames:new Map},n),e}function Up(n,e){const t=pa(e,!1),r=X(e.rules).filter(He).filter(i=>t.has(i));for(const i of r){const s=Object.assign(Object.assign({},n),{consume:1,optional:1,subrule:1,many:1,or:1});s.rules.set(i.name,n.parser.rule(i,Vt(s,i.definition)))}}function Vt(n,e,t=!1){let r;if(Zt(e))r=Hp(n,e);else if(Qn(e))r=Gp(n,e);else if(Dt(e))r=Vt(n,e.terminal);else if(ei(e))r=al(n,e);else if(Ft(e))r=Bp(n,e);else if(Gs(e))r=jp(n,e);else if(na(e))r=Kp(n,e);else if(ti(e))r=Vp(n,e);else if(Xl(e)){const i=n.consume++;r=()=>n.parser.consume(i,Ct,e)}else throw new bt(e.$cstNode,`Unexpected element type: ${e.$type}`);return ol(n,t?void 0:Wr(e),r,e.cardinality)}function Gp(n,e){const t=ar(e);return()=>n.parser.action(t,e)}function Bp(n,e){const t=e.rule.ref;if(He(t)){const r=n.subrule++,i=e.arguments.length>0?Wp(t,e.arguments):()=>({});return s=>n.parser.subrule(r,cl(n,t),e,i(s))}else if(Mt(t)){const r=n.consume++,i=Qi(n,t.name);return()=>n.parser.consume(r,i,e)}else if(t)Qt(t);else throw new bt(e.$cstNode,`Undefined rule type: ${e.$type}`)}function Wp(n,e){const t=e.map(r=>pt(r.value));return r=>{const i={};for(let s=0;s<t.length;s++){const a=n.parameters[s],o=t[s];i[a.name]=o(r)}return i}}function pt(n){if(kt(n)){const e=pt(n.left),t=pt(n.right);return r=>e(r)||t(r)}else if(Rt(n)){const e=pt(n.left),t=pt(n.right);return r=>e(r)&&t(r)}else if(Wl(n)){const e=pt(n.value);return t=>!e(t)}else if(jl(n)){const e=n.parameter.ref.name;return t=>t!==void 0&&t[e]===!0}else if(Ss(n)){const e=!!n.true;return()=>e}Qt(n)}function jp(n,e){if(e.elements.length===1)return Vt(n,e.elements[0]);{const t=[];for(const i of e.elements){const s={ALT:Vt(n,i,!0)},a=Wr(i);a&&(s.GATE=pt(a)),t.push(s)}const r=n.or++;return i=>n.parser.alternatives(r,t.map(s=>{const a={ALT:()=>s.ALT(i)},o=s.GATE;return o&&(a.GATE=()=>o(i)),a}))}}function Kp(n,e){if(e.elements.length===1)return Vt(n,e.elements[0]);const t=[];for(const o of e.elements){const c={ALT:Vt(n,o,!0)},l=Wr(o);l&&(c.GATE=pt(l)),t.push(c)}const r=n.or++,i=(o,c)=>{const l=c.getRuleStack().join("-");return`uGroup_${o}_${l}`},s=o=>n.parser.alternatives(r,t.map((c,l)=>{const u={ALT:()=>!0},d=n.parser;u.ALT=()=>{if(c.ALT(o),!d.isRecording()){const f=i(r,d);d.unorderedGroups.get(f)||d.unorderedGroups.set(f,[]);const y=d.unorderedGroups.get(f);typeof(y==null?void 0:y[l])=="undefined"&&(y[l]=!0)}};const h=c.GATE;return h?u.GATE=()=>h(o):u.GATE=()=>{const f=d.unorderedGroups.get(i(r,d));return!(f!=null&&f[l])},u})),a=ol(n,Wr(e),s,"*");return o=>{a(o),n.parser.isRecording()||n.parser.unorderedGroups.delete(i(r,n.parser))}}function Vp(n,e){const t=e.elements.map(r=>Vt(n,r));return r=>t.forEach(i=>i(r))}function Wr(n){if(ti(n))return n.guardCondition}function al(n,e,t=e.terminal){if(t)if(Ft(t)&&He(t.rule.ref)){const r=n.subrule++;return i=>n.parser.subrule(r,cl(n,t.rule.ref),e,i)}else if(Ft(t)&&Mt(t.rule.ref)){const r=n.consume++,i=Qi(n,t.rule.ref.name);return()=>n.parser.consume(r,i,e)}else if(Zt(t)){const r=n.consume++,i=Qi(n,t.value);return()=>n.parser.consume(r,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const r=Ta(e.type.ref),i=r==null?void 0:r.terminal;if(!i)throw new Error("Could not find name assignment for type: "+ar(e.type.ref));return al(n,e,i)}}function Hp(n,e){const t=n.consume++,r=n.tokens[e.value];if(!r)throw new Error("Could not find token for keyword: "+e.value);return()=>n.parser.consume(t,r,e)}function ol(n,e,t,r){const i=e&&pt(e);if(!r)if(i){const s=n.or++;return a=>n.parser.alternatives(s,[{ALT:()=>t(a),GATE:()=>i(a)},{ALT:Do(),GATE:()=>!i(a)}])}else return t;if(r==="*"){const s=n.many++;return a=>n.parser.many(s,{DEF:()=>t(a),GATE:i?()=>i(a):void 0})}else if(r==="+"){const s=n.many++;if(i){const a=n.or++;return o=>n.parser.alternatives(a,[{ALT:()=>n.parser.atLeastOne(s,{DEF:()=>t(o)}),GATE:()=>i(o)},{ALT:Do(),GATE:()=>!i(o)}])}else return a=>n.parser.atLeastOne(s,{DEF:()=>t(a)})}else if(r==="?"){const s=n.optional++;return a=>n.parser.optional(s,{DEF:()=>t(a),GATE:i?()=>i(a):void 0})}else Qt(r)}function cl(n,e){const t=zp(n,e),r=n.rules.get(t);if(!r)throw new Error(`Rule "${t}" not found."`);return r}function zp(n,e){if(He(e))return e.name;if(n.ruleNames.has(e))return n.ruleNames.get(e);{let t=e,r=t.$container,i=e.$type;for(;!He(r);)(ti(r)||Gs(r)||na(r))&&(i=r.elements.indexOf(t).toString()+":"+i),t=r,r=r.$container;return i=r.name+":"+i,n.ruleNames.set(e,i),i}}function Qi(n,e){const t=n.tokens[e];if(!t)throw new Error(`Token "${e}" not found."`);return t}function Yp(n){const e=n.Grammar,t=n.parser.Lexer,r=new Dp(n);return sl(e,r,t.definition),r.finalize(),r}function Xp(n){const e=Jp(n);return e.finalize(),e}function Jp(n){const e=n.Grammar,t=n.parser.Lexer,r=new bp(n);return sl(e,r,t.definition)}class ll{buildTokens(e,t){const r=X(pa(e,!1)),i=this.buildTerminalTokens(r),s=this.buildKeywordTokens(r,i,t);return i.forEach(a=>{const o=a.PATTERN;typeof o=="object"&&o&&"test"in o&&ha(o)?s.unshift(a):s.push(a)}),s}buildTerminalTokens(e){return e.filter(Mt).filter(t=>!t.fragment).map(t=>this.buildTerminalToken(t)).toArray()}buildTerminalToken(e){const t=li(e),r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,i={name:e.name,PATTERN:r,LINE_BREAKS:!0};return e.hidden&&(i.GROUP=ha(t)?Ze.SKIPPED:"hidden"),i}requiresCustomPattern(e){return e.flags.includes("u")?!0:!!(e.source.includes("?<=")||e.source.includes("?<!"))}regexPatternFunction(e){const t=new RegExp(e,e.flags+"y");return(r,i)=>(t.lastIndex=i,t.exec(r))}buildKeywordTokens(e,t,r){return e.filter(He).flatMap(i=>Cn(i).filter(Zt)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,t,!!(r!=null&&r.caseInsensitive)))}buildKeywordToken(e,t,r){return{name:e.value,PATTERN:this.buildKeywordPattern(e,r),LONGER_ALT:this.findLongerAlt(e,t)}}buildKeywordPattern(e,t){return t?new RegExp(uu(e.value)):e.value}findLongerAlt(e,t){return t.reduce((r,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&du("^"+s.source+"$",e.value)&&r.push(i),r},[])}}class ul{convert(e,t){let r=t.grammarSource;if(ei(r)&&(r=mu(r)),Ft(r)){const i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,t)}return e}runConverter(e,t,r){var i;switch(e.name.toUpperCase()){case"INT":return mt.convertInt(t);case"STRING":return mt.convertString(t);case"ID":return mt.convertID(t)}switch((i=Ru(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return mt.convertNumber(t);case"boolean":return mt.convertBoolean(t);case"bigint":return mt.convertBigint(t);case"date":return mt.convertDate(t);default:return t}}}var mt;(function(n){function e(l){let u="";for(let d=1;d<l.length-1;d++){const h=l.charAt(d);if(h==="\\"){const f=l.charAt(++d);u+=t(f)}else u+=h}return u}n.convertString=e;function t(l){switch(l){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return l}}function r(l){return l.charAt(0)==="^"?l.substring(1):l}n.convertID=r;function i(l){return parseInt(l)}n.convertInt=i;function s(l){return BigInt(l)}n.convertBigint=s;function a(l){return new Date(l)}n.convertDate=a;function o(l){return Number(l)}n.convertNumber=o;function c(l){return l.toLowerCase()==="true"}n.convertBoolean=c})(mt||(mt={}));var ye=p(13305);function Qp(){return new Promise(n=>{typeof setImmediate=="undefined"?setTimeout(n,0):setImmediate(n)})}let qi=0,dl=10;function Lg(){return qi=Date.now(),new CancellationTokenSource}function wg(n){dl=n}const jr=Symbol("OperationCancelled");function es(n){return n===jr}function et(n){return j(this,null,function*(){if(n===ye.Ts.None)return;const e=Date.now();if(e-qi>=dl&&(qi=e,yield Qp()),n.isCancellationRequested)throw jr})}class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=r=>(e(r),this),this.reject=r=>(t(r),this)})}}class Bn{constructor(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){for(const r of e)if(Bn.isIncremental(r)){const i=pl(r.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(a,this._content.length);const o=Math.max(i.start.line,0),c=Math.max(i.end.line,0);let l=this._lineOffsets;const u=fl(r.text,!1,s);if(c-o===u.length)for(let h=0,f=u.length;h<f;h++)l[h+o+1]=u[h];else u.length<1e4?l.splice(o+1,c-o,...u):this._lineOffsets=l=l.slice(0,o+1).concat(u,l.slice(c+1));const d=r.text.length-(a-s);if(d!==0)for(let h=o+1+u.length,f=l.length;h<f;h++)l[h]=l[h]+d}else if(Bn.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=t}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=fl(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const t=this.getLineOffsets();let r=0,i=t.length;if(i===0)return{line:0,character:e};for(;r<i;){const a=Math.floor((r+i)/2);t[a]>e?i=a:r=a+1}const s=r-1;return e=this.ensureBeforeEOL(e,t[s]),{line:s,character:e-t[s]}}offsetAt(e){const t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;const r=t[e.line];if(e.character<=0)return r;const i=e.line+1<t.length?t[e.line+1]:this._content.length,s=Math.min(r+e.character,i);return this.ensureBeforeEOL(s,r)}ensureBeforeEOL(e,t){for(;e>t&&hl(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const t=e;return t!=null&&typeof t.text=="string"&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength=="number")}static isFull(e){const t=e;return t!=null&&typeof t.text=="string"&&t.range===void 0&&t.rangeLength===void 0}}var ns;(function(n){function e(i,s,a,o){return new Bn(i,s,a,o)}n.create=e;function t(i,s,a){if(i instanceof Bn)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}n.update=t;function r(i,s){const a=i.getText(),o=rs(s.map(qp),(u,d)=>{const h=u.range.start.line-d.range.start.line;return h===0?u.range.start.character-d.range.start.character:h});let c=0;const l=[];for(const u of o){const d=i.offsetAt(u.range.start);if(d<c)throw new Error("Overlapping edit");d>c&&l.push(a.substring(c,d)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end)}return l.push(a.substr(c)),l.join("")}n.applyEdits=r})(ns||(ns={}));function rs(n,e){if(n.length<=1)return n;const t=n.length/2|0,r=n.slice(0,t),i=n.slice(t);rs(r,e),rs(i,e);let s=0,a=0,o=0;for(;s<r.length&&a<i.length;)e(r[s],i[a])<=0?n[o++]=r[s++]:n[o++]=i[a++];for(;s<r.length;)n[o++]=r[s++];for(;a<i.length;)n[o++]=i[a++];return n}function fl(n,e,t=0){const r=e?[t]:[];for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);hl(s)&&(s===13&&i+1<n.length&&n.charCodeAt(i+1)===10&&i++,r.push(t+i+1))}return r}function hl(n){return n===13||n===10}function pl(n){const e=n.start,t=n.end;return e.line>t.line||e.line===t.line&&e.character>t.character?{start:t,end:e}:n}function qp(n){const e=pl(n.range);return e!==n.range?{newText:n.newText,range:e}:n}var is=p(44675),ml;(()=>{"use strict";var n={470:i=>{function s(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function a(c,l){for(var u,d="",h=0,f=-1,y=0,T=0;T<=c.length;++T){if(T<c.length)u=c.charCodeAt(T);else{if(u===47)break;u=47}if(u===47){if(!(f===T-1||y===1))if(f!==T-1&&y===2){if(d.length<2||h!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var w=d.lastIndexOf("/");if(w!==d.length-1){w===-1?(d="",h=0):h=(d=d.slice(0,w)).length-1-d.lastIndexOf("/"),f=T,y=0;continue}}else if(d.length===2||d.length===1){d="",h=0,f=T,y=0;continue}}l&&(d.length>0?d+="/..":d="..",h=2)}else d.length>0?d+="/"+c.slice(f+1,T):d=c.slice(f+1,T),h=T-f-1;f=T,y=0}else u===46&&y!==-1?++y:y=-1}return d}var o={resolve:function(){for(var c,l="",u=!1,d=arguments.length-1;d>=-1&&!u;d--){var h;d>=0?h=arguments[d]:(c===void 0&&(c=is.cwd()),h=c),s(h),h.length!==0&&(l=h+"/"+l,u=h.charCodeAt(0)===47)}return l=a(l,!u),u?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(c){if(s(c),c.length===0)return".";var l=c.charCodeAt(0)===47,u=c.charCodeAt(c.length-1)===47;return(c=a(c,!l)).length!==0||l||(c="."),c.length>0&&u&&(c+="/"),l?"/"+c:c},isAbsolute:function(c){return s(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,l=0;l<arguments.length;++l){var u=arguments[l];s(u),u.length>0&&(c===void 0?c=u:c+="/"+u)}return c===void 0?".":o.normalize(c)},relative:function(c,l){if(s(c),s(l),c===l||(c=o.resolve(c))===(l=o.resolve(l)))return"";for(var u=1;u<c.length&&c.charCodeAt(u)===47;++u);for(var d=c.length,h=d-u,f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var y=l.length-f,T=h<y?h:y,w=-1,R=0;R<=T;++R){if(R===T){if(y>T){if(l.charCodeAt(f+R)===47)return l.slice(f+R+1);if(R===0)return l.slice(f+R)}else h>T&&(c.charCodeAt(u+R)===47?w=R:R===0&&(w=0));break}var x=c.charCodeAt(u+R);if(x!==l.charCodeAt(f+R))break;x===47&&(w=R)}var A="";for(R=u+w+1;R<=d;++R)R!==d&&c.charCodeAt(R)!==47||(A.length===0?A+="..":A+="/..");return A.length>0?A+l.slice(f+w):(f+=w,l.charCodeAt(f)===47&&++f,l.slice(f))},_makeLong:function(c){return c},dirname:function(c){if(s(c),c.length===0)return".";for(var l=c.charCodeAt(0),u=l===47,d=-1,h=!0,f=c.length-1;f>=1;--f)if((l=c.charCodeAt(f))===47){if(!h){d=f;break}}else h=!1;return d===-1?u?"/":".":u&&d===1?"//":c.slice(0,d)},basename:function(c,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');s(c);var u,d=0,h=-1,f=!0;if(l!==void 0&&l.length>0&&l.length<=c.length){if(l.length===c.length&&l===c)return"";var y=l.length-1,T=-1;for(u=c.length-1;u>=0;--u){var w=c.charCodeAt(u);if(w===47){if(!f){d=u+1;break}}else T===-1&&(f=!1,T=u+1),y>=0&&(w===l.charCodeAt(y)?--y==-1&&(h=u):(y=-1,h=T))}return d===h?h=T:h===-1&&(h=c.length),c.slice(d,h)}for(u=c.length-1;u>=0;--u)if(c.charCodeAt(u)===47){if(!f){d=u+1;break}}else h===-1&&(f=!1,h=u+1);return h===-1?"":c.slice(d,h)},extname:function(c){s(c);for(var l=-1,u=0,d=-1,h=!0,f=0,y=c.length-1;y>=0;--y){var T=c.charCodeAt(y);if(T!==47)d===-1&&(h=!1,d=y+1),T===46?l===-1?l=y:f!==1&&(f=1):l!==-1&&(f=-1);else if(!h){u=y+1;break}}return l===-1||d===-1||f===0||f===1&&l===d-1&&l===u+1?"":c.slice(l,d)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(l,u){var d=u.dir||u.root,h=u.base||(u.name||"")+(u.ext||"");return d?d===u.root?d+h:d+"/"+h:h}(0,c)},parse:function(c){s(c);var l={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return l;var u,d=c.charCodeAt(0),h=d===47;h?(l.root="/",u=1):u=0;for(var f=-1,y=0,T=-1,w=!0,R=c.length-1,x=0;R>=u;--R)if((d=c.charCodeAt(R))!==47)T===-1&&(w=!1,T=R+1),d===46?f===-1?f=R:x!==1&&(x=1):f!==-1&&(x=-1);else if(!w){y=R+1;break}return f===-1||T===-1||x===0||x===1&&f===T-1&&f===y+1?T!==-1&&(l.base=l.name=y===0&&h?c.slice(1,T):c.slice(y,T)):(y===0&&h?(l.name=c.slice(1,f),l.base=c.slice(1,T)):(l.name=c.slice(y,f),l.base=c.slice(y,T)),l.ext=c.slice(f,T)),y>0?l.dir=c.slice(0,y-1):h&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,i.exports=o}},e={};function t(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return n[i](a,a.exports,t),a.exports}t.d=(i,s)=>{for(var a in s)t.o(s,a)&&!t.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},t.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),t.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{let i;t.r(r),t.d(r,{URI:()=>h,Utils:()=>gt}),typeof is=="object"?i=is.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,a=/^\//,o=/^\/\//;function c(L,E){if(!L.scheme&&E)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${L.authority}", path: "${L.path}", query: "${L.query}", fragment: "${L.fragment}"}`);if(L.scheme&&!s.test(L.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(L.path){if(L.authority){if(!a.test(L.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(L.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const l="",u="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{constructor(E,P,b,q,W,G=!1){$t(this,"scheme");$t(this,"authority");$t(this,"path");$t(this,"query");$t(this,"fragment");typeof E=="object"?(this.scheme=E.scheme||l,this.authority=E.authority||l,this.path=E.path||l,this.query=E.query||l,this.fragment=E.fragment||l):(this.scheme=function(we,Oe){return we||Oe?we:"file"}(E,G),this.authority=P||l,this.path=function(we,Oe){switch(we){case"https":case"http":case"file":Oe?Oe[0]!==u&&(Oe=u+Oe):Oe=u}return Oe}(this.scheme,b||l),this.query=q||l,this.fragment=W||l,c(this,G))}static isUri(E){return E instanceof h||!!E&&typeof E.authority=="string"&&typeof E.fragment=="string"&&typeof E.path=="string"&&typeof E.query=="string"&&typeof E.scheme=="string"&&typeof E.fsPath=="string"&&typeof E.with=="function"&&typeof E.toString=="function"}get fsPath(){return x(this,!1)}with(E){if(!E)return this;let{scheme:P,authority:b,path:q,query:W,fragment:G}=E;return P===void 0?P=this.scheme:P===null&&(P=l),b===void 0?b=this.authority:b===null&&(b=l),q===void 0?q=this.path:q===null&&(q=l),W===void 0?W=this.query:W===null&&(W=l),G===void 0?G=this.fragment:G===null&&(G=l),P===this.scheme&&b===this.authority&&q===this.path&&W===this.query&&G===this.fragment?this:new y(P,b,q,W,G)}static parse(E,P=!1){const b=d.exec(E);return b?new y(b[2]||l,Te(b[4]||l),Te(b[5]||l),Te(b[7]||l),Te(b[9]||l),P):new y(l,l,l,l,l)}static file(E){let P=l;if(i&&(E=E.replace(/\\/g,u)),E[0]===u&&E[1]===u){const b=E.indexOf(u,2);b===-1?(P=E.substring(2),E=u):(P=E.substring(2,b),E=E.substring(b)||u)}return new y("file",P,E,l,l)}static from(E){const P=new y(E.scheme,E.authority,E.path,E.query,E.fragment);return c(P,!0),P}toString(E=!1){return A(this,E)}toJSON(){return this}static revive(E){if(E){if(E instanceof h)return E;{const P=new y(E);return P._formatted=E.external,P._fsPath=E._sep===f?E.fsPath:null,P}}return E}}const f=i?1:void 0;class y extends h{constructor(){super(...arguments);$t(this,"_formatted",null);$t(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=x(this,!1)),this._fsPath}toString(P=!1){return P?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)}toJSON(){const P={$mid:1};return this._fsPath&&(P.fsPath=this._fsPath,P._sep=f),this._formatted&&(P.external=this._formatted),this.path&&(P.path=this.path),this.scheme&&(P.scheme=this.scheme),this.authority&&(P.authority=this.authority),this.query&&(P.query=this.query),this.fragment&&(P.fragment=this.fragment),P}}const T={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function w(L,E,P){let b,q=-1;for(let W=0;W<L.length;W++){const G=L.charCodeAt(W);if(G>=97&&G<=122||G>=65&&G<=90||G>=48&&G<=57||G===45||G===46||G===95||G===126||E&&G===47||P&&G===91||P&&G===93||P&&G===58)q!==-1&&(b+=encodeURIComponent(L.substring(q,W)),q=-1),b!==void 0&&(b+=L.charAt(W));else{b===void 0&&(b=L.substr(0,W));const we=T[G];we!==void 0?(q!==-1&&(b+=encodeURIComponent(L.substring(q,W)),q=-1),b+=we):q===-1&&(q=W)}}return q!==-1&&(b+=encodeURIComponent(L.substring(q))),b!==void 0?b:L}function R(L){let E;for(let P=0;P<L.length;P++){const b=L.charCodeAt(P);b===35||b===63?(E===void 0&&(E=L.substr(0,P)),E+=T[b]):E!==void 0&&(E+=L[P])}return E!==void 0?E:L}function x(L,E){let P;return P=L.authority&&L.path.length>1&&L.scheme==="file"?`//${L.authority}${L.path}`:L.path.charCodeAt(0)===47&&(L.path.charCodeAt(1)>=65&&L.path.charCodeAt(1)<=90||L.path.charCodeAt(1)>=97&&L.path.charCodeAt(1)<=122)&&L.path.charCodeAt(2)===58?E?L.path.substr(1):L.path[1].toLowerCase()+L.path.substr(2):L.path,i&&(P=P.replace(/\//g,"\\")),P}function A(L,E){const P=E?R:w;let b="",{scheme:q,authority:W,path:G,query:we,fragment:Oe}=L;if(q&&(b+=q,b+=":"),(W||q==="file")&&(b+=u,b+=u),W){let re=W.indexOf("@");if(re!==-1){const Ht=W.substr(0,re);W=W.substr(re+1),re=Ht.lastIndexOf(":"),re===-1?b+=P(Ht,!1,!1):(b+=P(Ht.substr(0,re),!1,!1),b+=":",b+=P(Ht.substr(re+1),!1,!0)),b+="@"}W=W.toLowerCase(),re=W.lastIndexOf(":"),re===-1?b+=P(W,!1,!0):(b+=P(W.substr(0,re),!1,!0),b+=W.substr(re))}if(G){if(G.length>=3&&G.charCodeAt(0)===47&&G.charCodeAt(2)===58){const re=G.charCodeAt(1);re>=65&&re<=90&&(G=`/${String.fromCharCode(re+32)}:${G.substr(3)}`)}else if(G.length>=2&&G.charCodeAt(1)===58){const re=G.charCodeAt(0);re>=65&&re<=90&&(G=`${String.fromCharCode(re+32)}:${G.substr(2)}`)}b+=P(G,!0,!1)}return we&&(b+="?",b+=P(we,!1,!1)),Oe&&(b+="#",b+=E?Oe:w(Oe,!1,!1)),b}function V(L){try{return decodeURIComponent(L)}catch(E){return L.length>3?L.substr(0,3)+V(L.substr(3)):L}}const H=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Te(L){return L.match(H)?L.replace(H,E=>V(E)):L}var yn=t(470);const Ie=yn.posix||yn,Ot="/";var gt;(function(L){L.joinPath=function(E,...P){return E.with({path:Ie.join(E.path,...P)})},L.resolvePath=function(E,...P){let b=E.path,q=!1;b[0]!==Ot&&(b=Ot+b,q=!0);let W=Ie.resolve(b,...P);return q&&W[0]===Ot&&!E.authority&&(W=W.substring(1)),E.with({path:W})},L.dirname=function(E){if(E.path.length===0||E.path===Ot)return E;let P=Ie.dirname(E.path);return P.length===1&&P.charCodeAt(0)===46&&(P=""),E.with({path:P})},L.basename=function(E){return Ie.basename(E.path)},L.extname=function(E){return Ie.extname(E.path)}})(gt||(gt={}))})(),ml=r})();const{URI:gn,Utils:Wn}=ml;var Lt;(function(n){n.basename=Wn.basename,n.dirname=Wn.dirname,n.extname=Wn.extname,n.joinPath=Wn.joinPath,n.resolvePath=Wn.resolvePath;function e(r,i){return(r==null?void 0:r.toString())===(i==null?void 0:i.toString())}n.equals=e;function t(r,i){const s=typeof r=="string"?r:r.path,a=typeof i=="string"?i:i.path,o=s.split("/").filter(h=>h.length>0),c=a.split("/").filter(h=>h.length>0);let l=0;for(;l<o.length&&o[l]===c[l];l++);const u="../".repeat(o.length-l),d=c.slice(l).join("/");return u+d}n.relative=t})(Lt||(Lt={}));var se;(function(n){n[n.Changed=0]="Changed",n[n.Parsed=1]="Parsed",n[n.IndexedContent=2]="IndexedContent",n[n.ComputedScopes=3]="ComputedScopes",n[n.Linked=4]="Linked",n[n.IndexedReferences=5]="IndexedReferences",n[n.Validated=6]="Validated"})(se||(se={}));class em{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}fromUri(r){return j(this,arguments,function*(e,t=ye.Ts.None){const i=yield this.fileSystemProvider.readFile(e);return this.createAsync(e,i,t)})}fromTextDocument(e,t,r){return t=t!=null?t:gn.parse(e.uri),r?this.createAsync(t,e,r):this.create(t,e)}fromString(e,t,r){return r?this.createAsync(t,e,r):this.create(t,e)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t){if(typeof t=="string"){const r=this.parse(e,t);return this.createLangiumDocument(r,e,void 0,t)}else if("$model"in t){const r={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}else{const r=this.parse(e,t.getText());return this.createLangiumDocument(r,e,t)}}createAsync(e,t,r){return j(this,null,function*(){if(typeof t=="string"){const i=yield this.parseAsync(e,t,r);return this.createLangiumDocument(i,e,void 0,t)}else{const i=yield this.parseAsync(e,t.getText(),r);return this.createLangiumDocument(i,e,t)}})}createLangiumDocument(e,t,r,i){let s;if(r)s={parseResult:e,uri:t,state:se.Parsed,references:[],textDocument:r};else{const a=this.createTextDocumentGetter(t,i);s={parseResult:e,uri:t,state:se.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=s,s}update(e,t){return j(this,null,function*(){var r,i;const s=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText,a=(i=this.textDocuments)===null||i===void 0?void 0:i.get(e.uri.toString()),o=a?a.getText():yield this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{const c=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:c})}return s!==o&&(e.parseResult=yield this.parseAsync(e.uri,o,t),e.parseResult.value.$document=e),e.state=se.Parsed,e})}parse(e,t){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t)}parseAsync(e,t,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,r)}createTextDocumentGetter(e,t){const r=this.serviceRegistry;let i;return()=>i!=null?i:i=ns.create(e.toString(),r.getServices(e).LanguageMetaData.languageId,0,t!=null?t:"")}}class tm{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory}get all(){return X(this.documentMap.values())}addDocument(e){const t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){const t=e.toString();return this.documentMap.get(t)}getOrCreateDocument(e,t){return j(this,null,function*(){let r=this.getDocument(e);return r||(r=yield this.langiumDocumentFactory.fromUri(e,t),this.addDocument(r),r)})}createDocument(e,t,r){if(r)return this.langiumDocumentFactory.fromString(t,e,r).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(i),i}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=se.Changed,r.precomputedScopes=void 0,r.references=[],r.diagnostics=void 0),r}deleteDocument(e){const t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=se.Changed,this.documentMap.delete(t)),r}}class nm{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}link(r){return j(this,arguments,function*(e,t=ye.Ts.None){for(const i of Ut(e.parseResult.value))yield et(t),ii(i).forEach(s=>this.doLink(s,e))})}doLink(e,t){const r=e.reference;if(r._ref===void 0)try{const i=this.getCandidate(e);if(M(i))r._ref=i;else if(r._nodeDescription=i,this.langiumDocuments().hasDocument(i.documentUri)){const s=this.loadAstNode(i);r._ref=s!=null?s:this.createLinkingError(e,i)}}catch(i){r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${i}`})}t.references.push(r)}unlink(e){for(const t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){const r=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return r!=null?r:this.createLinkingError(e)}buildReference(e,t,r,i){const s=this,a={$refNode:r,$refText:i,get ref(){var o;if(g(this._ref))return this._ref;if(S(this._nodeDescription)){const c=s.loadAstNode(this._nodeDescription);this._ref=c!=null?c:s.createLinkingError({reference:a,container:e,property:t},this._nodeDescription)}else if(this._ref===void 0){const c=s.getLinkedNode({reference:a,container:e,property:t});if(c.error&&Xe(e).state<se.ComputedScopes)return;this._ref=(o=c.node)!==null&&o!==void 0?o:c.error,this._nodeDescription=c.descr}return g(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return M(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){try{const t=this.getCandidate(e);if(M(t))return{error:t};const r=this.loadAstNode(t);return r?{node:r,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(t){return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${t}`})}}}loadAstNode(e){if(e.node)return e.node;const t=this.langiumDocuments().getDocument(e.documentUri);if(t)return this.astNodeLocator.getAstNode(t.parseResult.value,e.path)}createLinkingError(e,t){const r=Xe(e.container);r.state<se.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:t})}}function rm(n){return typeof n.name=="string"}class im{getName(e){if(rm(e))return e.name}getNameNode(e){return ga(e.$cstNode,"name")}}class sm{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const t=Eu(e),r=e.astNode;if(t&&r){const i=r[t.feature];if(k(i))return i.ref;if(Array.isArray(i)){for(const s of i)if(k(s)&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return s.ref}}if(r){const i=this.nameProvider.getNameNode(r);if(i&&(i===e||vt(e,i)))return r}}}findDeclarationNode(e){const t=this.findDeclaration(e);if(t!=null&&t.$cstNode){const r=this.nameProvider.getNameNode(t);return r!=null?r:t.$cstNode}}findReferences(e,t){const r=[];if(t.includeDeclaration){const s=this.getReferenceToSelf(e);s&&r.push(s)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(i=i.filter(s=>Lt.equals(s.sourceUri,t.documentUri))),r.push(...i),X(r)}getReferenceToSelf(e){const t=this.nameProvider.getNameNode(e);if(t){const r=Xe(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:Yt(t),local:!0}}}}class ss{constructor(e){if(this.map=new Map,e)for(const[t,r]of e)this.add(t,r)}get size(){return ue.sum(X(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,t){if(t===void 0)return this.map.delete(e);{const r=this.map.get(e);if(r){const i=r.indexOf(t);if(i>=0)return r.length===1?this.map.delete(e):r.splice(i,1),!0}return!1}}get(e){var t;return(t=this.map.get(e))!==null&&t!==void 0?t:[]}has(e,t){if(t===void 0)return this.map.has(e);{const r=this.map.get(e);return r?r.indexOf(t)>=0:!1}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach((t,r)=>t.forEach(i=>e(i,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return X(this.map.entries()).flatMap(([e,t])=>t.map(r=>[e,r]))}keys(){return X(this.map.keys())}values(){return X(this.map.values()).flat()}entriesGroupedByKey(){return X(this.map.entries())}}class gl{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[t,r]of e)this.set(t,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const t=this.map.get(e);return t!==void 0?(this.map.delete(e),this.inverse.delete(t),!0):!1}}class am{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}computeExports(r){return j(this,arguments,function*(e,t=ye.Ts.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)})}computeExportsForNode(s,a){return j(this,arguments,function*(e,t,r=ni,i=ye.Ts.None){const o=[];this.exportNode(e,o,t);for(const c of r(e))yield et(i),this.exportNode(c,o,t);return o})}exportNode(e,t,r){const i=this.nameProvider.getName(e);i&&t.push(this.descriptions.createDescription(e,i,r))}computeLocalScopes(r){return j(this,arguments,function*(e,t=ye.Ts.None){const i=e.parseResult.value,s=new ss;for(const a of Cn(i))yield et(t),this.processNode(a,e,s);return s})}processNode(e,t,r){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&r.add(i,this.descriptions.createDescription(e,s,t))}}}class yl{constructor(e,t,r){var i;this.elements=e,this.outerScope=t,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const t=this.caseInsensitive?this.elements.find(r=>r.name.toLowerCase()===e.toLowerCase()):this.elements.find(r=>r.name===e);if(t)return t;if(this.outerScope)return this.outerScope.getElement(e)}}class om{constructor(e,t,r){var i;this.elements=new Map,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1;for(const s of e){const a=this.caseInsensitive?s.name.toLowerCase():s.name;this.elements.set(a,s)}this.outerScope=t}getElement(e){const t=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(t);if(r)return r;if(this.outerScope)return this.outerScope.getElement(e)}getAllElements(){let e=X(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}const Og={getElement(){},getAllElements(){return Y}};class Tl{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class cm extends Tl{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){const r=t();return this.cache.set(e,r),r}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class lm extends Tl{constructor(e){super(),this.cache=new Map,this.converter=e!=null?e:t=>t}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed(),this.cacheForContext(e).set(t,r)}get(e,t,r){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(t))return i.get(t);if(r){const s=r();return i.set(t,s),s}else return}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){const t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){const t=this.converter(e);let r=this.cache.get(t);return r||(r=new Map,this.cache.set(t,r)),r}}class Pg extends null{constructor(e){super(t=>t.toString()),this.onDispose(e.workspace.DocumentBuilder.onUpdate((t,r)=>{const i=t.concat(r);for(const s of i)this.clear(s)}))}}class um extends cm{constructor(e){super(),this.onDispose(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class dm{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new um(e.shared)}getScope(e){const t=[],r=this.reflection.getReferenceType(e),i=Xe(e.container).precomputedScopes;if(i){let a=e.container;do{const o=i.get(a);o.length>0&&t.push(X(o).filter(c=>this.reflection.isSubtype(c.type,r))),a=a.$container}while(a)}let s=this.getGlobalScope(r,e);for(let a=t.length-1;a>=0;a--)s=this.createScope(t[a],s);return s}createScope(e,t,r){return new yl(X(e),t,r)}createScopeForNodes(e,t,r){const i=X(e).map(s=>{const a=this.nameProvider.getName(s);if(a)return this.descriptions.createDescription(s,a)}).nonNullable();return new yl(i,t,r)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new om(this.indexManager.allElements(e)))}}function fm(n){return typeof n.$comment=="string"}function El(n){return typeof n=="object"&&!!n&&("$ref"in n||"$error"in n)}class hm{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t={}){const r=t==null?void 0:t.replacer,i=(a,o)=>this.replacer(a,o,t),s=r?(a,o)=>r(a,o,i):i;try{return this.currentDocument=Xe(e),JSON.stringify(e,s,t==null?void 0:t.space)}finally{this.currentDocument=void 0}}deserialize(e,t={}){const r=JSON.parse(e);return this.linkNode(r,r,t),r}replacer(e,t,{refText:r,sourceText:i,textRegions:s,comments:a,uriConverter:o}){var c,l,u,d;if(!this.ignoreProperties.has(e))if(k(t)){const h=t.ref,f=r?t.$refText:void 0;if(h){const y=Xe(h);let T="";this.currentDocument&&this.currentDocument!==y&&(o?T=o(y.uri,t):T=y.uri.toString());const w=this.astNodeLocator.getAstNodePath(h);return{$ref:`${T}#${w}`,$refText:f}}else return{$error:(l=(c=t.error)===null||c===void 0?void 0:c.message)!==null&&l!==void 0?l:"Could not resolve reference",$refText:f}}else if(g(t)){let h;if(s&&(h=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),(!e||t.$document)&&(h!=null&&h.$textRegion)&&(h.$textRegion.documentURI=(u=this.currentDocument)===null||u===void 0?void 0:u.uri.toString())),i&&!e&&(h!=null||(h=Object.assign({},t)),h.$sourceText=(d=t.$cstNode)===null||d===void 0?void 0:d.text),a){h!=null||(h=Object.assign({},t));const f=this.commentProvider.getComment(t);f&&(h.$comment=f.replace(/\r/g,""))}return h!=null?h:t}else return t}addAstNodeRegionWithAssignmentsTo(e){const t=r=>({offset:r.offset,end:r.end,length:r.length,range:r.range});if(e.$cstNode){const r=e.$textRegion=t(e.$cstNode),i=r.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const a=yu(e.$cstNode,s).map(t);a.length!==0&&(i[s]=a)}),e}}linkNode(e,t,r,i,s,a){for(const[c,l]of Object.entries(e))if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=l[u];El(d)?l[u]=this.reviveReference(e,c,t,d,r):g(d)&&this.linkNode(d,t,r,e,c,u)}else El(l)?e[c]=this.reviveReference(e,c,t,l,r):g(l)&&this.linkNode(l,t,r,e,c);const o=e;o.$container=i,o.$containerProperty=s,o.$containerIndex=a}reviveReference(e,t,r,i,s){let a=i.$refText,o=i.$error;if(i.$ref){const c=this.getRefNode(r,i.$ref,s.uriConverter);if(g(c))return a||(a=this.nameProvider.getName(c)),{$refText:a!=null?a:"",ref:c};o=c}if(o){const c={$refText:a!=null?a:""};return c.error={container:e,property:t,message:o,reference:c},c}else return}getRefNode(e,t,r){try{const i=t.indexOf("#");if(i===0){const c=this.astNodeLocator.getAstNode(e,t.substring(1));return c||"Could not resolve path: "+t}if(i<0){const c=r?r(t):gn.parse(t),l=this.langiumDocuments.getDocument(c);return l?l.parseResult.value:"Could not find document for URI: "+t}const s=r?r(t.substring(0,i)):gn.parse(t.substring(0,i)),a=this.langiumDocuments.getDocument(s);if(!a)return"Could not find document for URI: "+t;if(i===t.length-1)return a.parseResult.value;const o=this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(i+1));return o||"Could not resolve URI: "+t}catch(i){return String(i)}}}class pm{register(e){if(!this.singleton&&!this.map){this.singleton=e;return}if(!this.map&&(this.map={},this.singleton)){for(const t of this.singleton.LanguageMetaData.fileExtensions)this.map[t]=this.singleton;this.singleton=void 0}for(const t of e.LanguageMetaData.fileExtensions)this.map[t]!==void 0&&this.map[t]!==e&&console.warn(`The file extension ${t} is used by multiple languages. It is now assigned to '${e.LanguageMetaData.languageId}'.`),this.map[t]=e}getServices(e){if(this.singleton!==void 0)return this.singleton;if(this.map===void 0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const t=Lt.extname(e),r=this.map[t];if(!r)throw new Error(`The service registry contains no services for the extension '${t}'.`);return r}get all(){return this.singleton!==void 0?[this.singleton]:this.map!==void 0?Object.values(this.map):[]}}function vl(n){return{code:n}}var Kr;(function(n){n.all=["fast","slow","built-in"]})(Kr||(Kr={}));class mm{constructor(e){this.entries=new ss,this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if(r==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,s]of Object.entries(e)){const a=s;if(Array.isArray(a))for(const o of a){const c={check:this.wrapValidationException(o,t),category:r};this.addEntry(i,c)}else if(typeof a=="function"){const o={check:this.wrapValidationException(a,t),category:r};this.addEntry(i,o)}}}wrapValidationException(e,t){return(r,i,s)=>j(this,null,function*(){try{yield e.call(t,r,i,s)}catch(a){if(es(a))throw a;console.error("An error occurred during validation:",a);const o=a instanceof Error?a.message:String(a);a instanceof Error&&a.stack&&console.error(a.stack),i("error","An error occurred during validation: "+o,{node:r})}})}addEntry(e,t){if(e==="AstNode"){this.entries.add("AstNode",t);return}for(const r of this.reflection.getAllSubTypes(e))this.entries.add(r,t)}getChecks(e,t){let r=X(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(r=r.filter(i=>t.includes(i.category))),r.map(i=>i.check)}}class gm{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}validateDocument(i){return j(this,arguments,function*(e,t={},r=ye.Ts.None){const s=e.parseResult,a=[];if(yield et(r),(!t.categories||t.categories.includes("built-in"))&&(this.processLexingErrors(s,a,t),t.stopAfterLexingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===wt.LexingError})||(this.processParsingErrors(s,a,t),t.stopAfterParsingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===wt.ParsingError}))||(this.processLinkingErrors(e,a,t),t.stopAfterLinkingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===wt.LinkingError}))))return a;try{a.push(...yield this.validateAst(s.value,t,r))}catch(o){if(es(o))throw o;console.error("An error occurred during validation:",o)}return yield et(r),a})}processLexingErrors(e,t,r){for(const i of e.lexerErrors){const s={severity:as("error"),range:{start:{line:i.line-1,character:i.column-1},end:{line:i.line-1,character:i.column+i.length-1}},message:i.message,data:vl(wt.LexingError),source:this.getSource()};t.push(s)}}processParsingErrors(e,t,r){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const a=i.previousToken;if(isNaN(a.startOffset)){const o={line:0,character:0};s={start:o,end:o}}else{const o={line:a.endLine-1,character:a.endColumn};s={start:o,end:o}}}}else s=At(i.token);if(s){const a={severity:as("error"),range:s,message:i.message,data:vl(wt.ParsingError),source:this.getSource()};t.push(a)}}}processLinkingErrors(e,t,r){for(const i of e.references){const s=i.error;if(s){const a={node:s.container,property:s.property,index:s.index,data:{code:wt.LinkingError,containerType:s.container.$type,property:s.property,refText:s.reference.$refText}};t.push(this.toDiagnostic("error",s.message,a))}}}validateAst(i,s){return j(this,arguments,function*(e,t,r=ye.Ts.None){const a=[],o=(c,l,u)=>{a.push(this.toDiagnostic(c,l,u))};return yield Promise.all(Ut(e).map(c=>j(this,null,function*(){yield et(r);const l=this.validationRegistry.getChecks(c.$type,t.categories);for(const u of l)yield u(c,o,r)}))),a})}toDiagnostic(e,t,r){return{message:t,range:ym(r),severity:as(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function ym(n){if(n.range)return n.range;let e;return typeof n.property=="string"?e=ga(n.node.$cstNode,n.property,n.index):typeof n.keyword=="string"&&(e=Tu(n.node.$cstNode,n.keyword,n.index)),e!=null||(e=n.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function as(n){switch(n){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+n)}}var wt;(function(n){n.LexingError="lexing-error",n.ParsingError="parsing-error",n.LinkingError="linking-error"})(wt||(wt={}));class Tm{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,r=Xe(e)){t!=null||(t=this.nameProvider.getName(e));const i=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${i} has no name.`);let s;const a=()=>{var o;return s!=null?s:s=Yt((o=this.nameProvider.getNameNode(e))!==null&&o!==void 0?o:e.$cstNode)};return{node:e,name:t,get nameSegment(){return a()},selectionSegment:Yt(e.$cstNode),type:e.$type,documentUri:r.uri,path:i}}}class Em{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}createDescriptions(r){return j(this,arguments,function*(e,t=ye.Ts.None){const i=[],s=e.parseResult.value;for(const a of Ut(s))yield et(t),ii(a).filter(o=>!M(o)).forEach(o=>{const c=this.createDescription(o);c&&i.push(c)});return i})}createDescription(e){const t=e.reference.$nodeDescription,r=e.reference.$refNode;if(!t||!r)return;const i=Xe(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:Yt(r),local:Lt.equals(t.documentUri,i)}}}class vm{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const t=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return t+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return t!==void 0?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce((i,s)=>{if(!i||s.length===0)return i;const a=s.indexOf(this.indexSeparator);if(a>0){const o=s.substring(0,a),c=parseInt(s.substring(a+1)),l=i[o];return l==null?void 0:l[c]}return i[s]},e)}}class Am{constructor(e){this._ready=new ts,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=(r=(t=e.capabilities.workspace)===null||t===void 0?void 0:t.configuration)!==null&&r!==void 0?r:!1}initialized(e){return j(this,null,function*(){if(this.workspaceConfig){if(e.register){const t=this.serviceRegistry.all;e.register({section:t.map(r=>this.toSectionName(r.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const t=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),r=yield e.fetchConfiguration(t);t.forEach((i,s)=>{this.updateSectionConfiguration(i.section,r[s])})}}this._ready.resolve()})}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(t=>{this.updateSectionConfiguration(t,e.settings[t])})}updateSectionConfiguration(e,t){this.settings[e]=t}getConfiguration(e,t){return j(this,null,function*(){yield this.ready;const r=this.toSectionName(e);if(this.settings[r])return this.settings[r][t]})}toSectionName(e){return`${e}`}}var Vr;(function(n){function e(t){return{dispose:()=>j(this,null,function*(){return yield t()})}}n.create=e})(Vr||(Vr={}));class Rm{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new ss,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=se.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}build(i){return j(this,arguments,function*(e,t={},r=ye.Ts.None){var s,a;for(const o of e){const c=o.uri.toString();if(o.state===se.Validated){if(typeof t.validation=="boolean"&&t.validation)o.state=se.IndexedReferences,o.diagnostics=void 0,this.buildState.delete(c);else if(typeof t.validation=="object"){const l=this.buildState.get(c),u=(s=l==null?void 0:l.result)===null||s===void 0?void 0:s.validationChecks;if(u){const h=((a=t.validation.categories)!==null&&a!==void 0?a:Kr.all).filter(f=>!u.includes(f));h.length>0&&(this.buildState.set(c,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:h})},result:l.result}),o.state=se.IndexedReferences)}}}else this.buildState.delete(c)}this.currentState=se.Changed,yield this.emitUpdate(e.map(o=>o.uri),[]),yield this.buildDocuments(e,t,r)})}update(i,s){return j(this,arguments,function*(e,t,r=ye.Ts.None){this.currentState=se.Changed;for(const c of t)this.langiumDocuments.deleteDocument(c),this.buildState.delete(c.toString()),this.indexManager.remove(c);for(const c of e){if(!this.langiumDocuments.invalidateDocument(c)){const u=this.langiumDocumentFactory.fromModel({$type:"INVALID"},c);u.state=se.Changed,this.langiumDocuments.addDocument(u)}this.buildState.delete(c.toString())}const a=X(e).concat(t).map(c=>c.toString()).toSet();this.langiumDocuments.all.filter(c=>!a.has(c.uri.toString())&&this.shouldRelink(c,a)).forEach(c=>{this.serviceRegistry.getServices(c.uri).references.Linker.unlink(c),c.state=Math.min(c.state,se.ComputedScopes),c.diagnostics=void 0}),yield this.emitUpdate(e,t),yield et(r);const o=this.langiumDocuments.all.filter(c=>{var l;return c.state<se.Linked||!(!((l=this.buildState.get(c.uri.toString()))===null||l===void 0)&&l.completed)}).toArray();yield this.buildDocuments(o,this.updateBuildOptions,r)})}emitUpdate(e,t){return j(this,null,function*(){yield Promise.all(this.updateListeners.map(r=>r(e,t)))})}shouldRelink(e,t){return e.references.some(r=>r.error!==void 0)?!0:this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),Vr.create(()=>{const t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}buildDocuments(e,t,r){return j(this,null,function*(){this.prepareBuild(e,t),yield this.runCancelable(e,se.Parsed,r,s=>this.langiumDocumentFactory.update(s,r)),yield this.runCancelable(e,se.IndexedContent,r,s=>this.indexManager.updateContent(s,r)),yield this.runCancelable(e,se.ComputedScopes,r,s=>j(this,null,function*(){const a=this.serviceRegistry.getServices(s.uri).references.ScopeComputation;s.precomputedScopes=yield a.computeLocalScopes(s,r)})),yield this.runCancelable(e,se.Linked,r,s=>this.serviceRegistry.getServices(s.uri).references.Linker.link(s,r)),yield this.runCancelable(e,se.IndexedReferences,r,s=>this.indexManager.updateReferences(s,r));const i=e.filter(s=>this.shouldValidate(s));yield this.runCancelable(i,se.Validated,r,s=>this.validate(s,r));for(const s of e){const a=this.buildState.get(s.uri.toString());a&&(a.completed=!0)}})}prepareBuild(e,t){for(const r of e){const i=r.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:t,result:s==null?void 0:s.result})}}runCancelable(e,t,r,i){return j(this,null,function*(){const s=e.filter(a=>a.state<t);for(const a of s)yield et(r),yield i(a),a.state=t;yield this.notifyBuildPhase(s,t,r),this.currentState=t})}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),Vr.create(()=>{this.buildPhaseListeners.delete(e,t)})}waitUntil(e,t,r){let i;if(t&&"path"in t?i=t:r=t,r!=null||(r=ye.Ts.None),i){const s=this.langiumDocuments.getDocument(i);if(s&&s.state>e)return Promise.resolve(i)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(jr):new Promise((s,a)=>{const o=this.onBuildPhase(e,()=>{if(o.dispose(),c.dispose(),i){const l=this.langiumDocuments.getDocument(i);s(l==null?void 0:l.uri)}else s(void 0)}),c=r.onCancellationRequested(()=>{o.dispose(),c.dispose(),a(jr)})})}notifyBuildPhase(e,t,r){return j(this,null,function*(){if(e.length===0)return;const i=this.buildPhaseListeners.get(t);for(const s of i)yield et(r),yield s(e,r)})}shouldValidate(e){return!!this.getBuildOptions(e).validation}validate(e,t){return j(this,null,function*(){var r,i;const s=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,o=typeof a=="object"?a:void 0,c=yield s.validateDocument(e,o,t);e.diagnostics?e.diagnostics.push(...c):e.diagnostics=c;const l=this.buildState.get(e.uri.toString());if(l){(r=l.result)!==null&&r!==void 0||(l.result={});const u=(i=o==null?void 0:o.categories)!==null&&i!==void 0?i:Kr.all;l.result.validationChecks?l.result.validationChecks.push(...u):l.result.validationChecks=[...u]}})}getBuildOptions(e){var t,r;return(r=(t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.options)!==null&&r!==void 0?r:{}}}class km{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new lm,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){const r=Xe(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(a=>{Lt.equals(a.targetUri,r)&&a.targetPath===t&&i.push(a)})}),X(i)}allElements(e,t){let r=X(this.symbolIndex.keys());return t&&(r=r.filter(i=>!t||t.has(i))),r.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,t){var r;return t?this.symbolByTypeIndex.get(e,t,()=>{var s;return((s=this.symbolIndex.get(e))!==null&&s!==void 0?s:[]).filter(o=>this.astReflection.isSubtype(o.type,t))}):(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}remove(e){const t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}updateContent(r){return j(this,arguments,function*(e,t=ye.Ts.None){const s=yield this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,t),a=e.uri.toString();this.symbolIndex.set(a,s),this.symbolByTypeIndex.clear(a)})}updateReferences(r){return j(this,arguments,function*(e,t=ye.Ts.None){const s=yield this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),s)})}isAffected(e,t){const r=this.referenceIndex.get(e.uri.toString());return r?r.some(i=>!i.local&&t.has(i.targetUri.toString())):!1}}class Im{constructor(e){this.initialBuildOptions={},this._ready=new ts,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}initialize(e){var t;this.folders=(t=e.workspaceFolders)!==null&&t!==void 0?t:void 0}initialized(e){return this.mutex.write(t=>{var r;return this.initializeWorkspace((r=this.folders)!==null&&r!==void 0?r:[],t)})}initializeWorkspace(r){return j(this,arguments,function*(e,t=ye.Ts.None){const i=yield this.performStartup(e);yield et(t),yield this.documentBuilder.build(i,this.initialBuildOptions,t)})}performStartup(e){return j(this,null,function*(){const t=this.serviceRegistry.all.flatMap(s=>s.LanguageMetaData.fileExtensions),r=[],i=s=>{r.push(s),this.langiumDocuments.hasDocument(s.uri)||this.langiumDocuments.addDocument(s)};return yield this.loadAdditionalDocuments(e,i),yield Promise.all(e.map(s=>[s,this.getRootFolder(s)]).map(s=>j(this,null,function*(){return this.traverseFolder(...s,t,i)}))),this._ready.resolve(),r})}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return gn.parse(e.uri)}traverseFolder(e,t,r,i){return j(this,null,function*(){const s=yield this.fileSystemProvider.readDirectory(t);yield Promise.all(s.map(a=>j(this,null,function*(){if(this.includeEntry(e,a,r)){if(a.isDirectory)yield this.traverseFolder(e,a.uri,r,i);else if(a.isFile){const o=yield this.langiumDocuments.getOrCreateDocument(a.uri);i(o)}}})))})}includeEntry(e,t,r){const i=Lt.basename(t.uri);if(i.startsWith("."))return!1;if(t.isDirectory)return i!=="node_modules"&&i!=="out";if(t.isFile){const s=Lt.extname(t.uri);return r.includes(s)}return!1}}class Cm{constructor(e){const t=e.parser.TokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);const r=Rl(t)?Object.values(t):t;this.chevrotainLexer=new Ze(r,{positionTracking:"full"})}get definition(){return this.tokenTypes}tokenize(e){var t;const r=this.chevrotainLexer.tokenize(e);return{tokens:r.tokens,errors:r.errors,hidden:(t=r.groups.hidden)!==null&&t!==void 0?t:[]}}toTokenTypeDictionary(e){if(Rl(e))return e;const t=Al(e)?Object.values(e.modes).flat():e,r={};return t.forEach(i=>r[i.name]=i),r}}function Sm(n){return Array.isArray(n)&&(n.length===0||"name"in n[0])}function Al(n){return n&&"modes"in n&&"defaultMode"in n}function Rl(n){return!Sm(n)&&!Al(n)}function _m(n,e,t){let r,i;typeof n=="string"?(i=e,r=t):(i=n.range.start,r=e),i||(i=ee.create(0,0));const s=kl(n),a=cs(r),o=Lm({lines:s,position:i,options:a});return bm({index:0,tokens:o,position:i})}function Nm(n,e){const t=cs(e),r=kl(n);if(r.length===0)return!1;const i=r[0],s=r[r.length-1],a=t.start,o=t.end;return!!(a!=null&&a.exec(i))&&!!(o!=null&&o.exec(s))}function kl(n){let e="";return typeof n=="string"?e=n:e=n.text,e.split(ou)}const Il=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,xm=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function Lm(n){var e,t,r;const i=[];let s=n.position.line,a=n.position.character;for(let o=0;o<n.lines.length;o++){const c=o===0,l=o===n.lines.length-1;let u=n.lines[o],d=0;if(c&&n.options.start){const f=(e=n.options.start)===null||e===void 0?void 0:e.exec(u);f&&(d=f.index+f[0].length)}else{const f=(t=n.options.line)===null||t===void 0?void 0:t.exec(u);f&&(d=f.index+f[0].length)}if(l){const f=(r=n.options.end)===null||r===void 0?void 0:r.exec(u);f&&(u=u.substring(0,f.index))}if(u=u.substring(0,$m(u)),os(u,d)>=u.length){if(i.length>0){const f=ee.create(s,a);i.push({type:"break",content:"",range:J.create(f,f)})}}else{Il.lastIndex=d;const f=Il.exec(u);if(f){const y=f[0],T=f[1],w=ee.create(s,a+d),R=ee.create(s,a+d+y.length);i.push({type:"tag",content:T,range:J.create(w,R)}),d+=y.length,d=os(u,d)}if(d<u.length){const y=u.substring(d),T=Array.from(y.matchAll(xm));i.push(...wm(T,y,s,a+d))}}s++,a=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function wm(n,e,t,r){const i=[];if(n.length===0){const s=ee.create(t,r),a=ee.create(t,r+e.length);i.push({type:"text",content:e,range:J.create(s,a)})}else{let s=0;for(const o of n){const c=o.index,l=e.substring(s,c);l.length>0&&i.push({type:"text",content:e.substring(s,c),range:J.create(ee.create(t,s+r),ee.create(t,c+r))});let u=l.length+1;const d=o[1];if(i.push({type:"inline-tag",content:d,range:J.create(ee.create(t,s+u+r),ee.create(t,s+u+d.length+r))}),u+=d.length,o.length===4){u+=o[2].length;const h=o[3];i.push({type:"text",content:h,range:J.create(ee.create(t,s+u+r),ee.create(t,s+u+h.length+r))})}else i.push({type:"text",content:"",range:J.create(ee.create(t,s+u+r),ee.create(t,s+u+r))});s=c+o[0].length}const a=e.substring(s);a.length>0&&i.push({type:"text",content:a,range:J.create(ee.create(t,s+r),ee.create(t,s+r+a.length))})}return i}const Om=/\S/,Pm=/\s*$/;function os(n,e){const t=n.substring(e).match(Om);return t?e+t.index:n.length}function $m(n){const e=n.match(Pm);if(e&&typeof e.index=="number")return e.index}function bm(n){var e,t,r,i;const s=ee.create(n.position.line,n.position.character);if(n.tokens.length===0)return new Nl([],J.create(s,s));const a=[];for(;n.index<n.tokens.length;){const l=Mm(n,a[a.length-1]);l&&a.push(l)}const o=(t=(e=a[0])===null||e===void 0?void 0:e.range.start)!==null&&t!==void 0?t:s,c=(i=(r=a[a.length-1])===null||r===void 0?void 0:r.range.end)!==null&&i!==void 0?i:s;return new Nl(a,J.create(o,c))}function Mm(n,e){const t=n.tokens[n.index];if(t.type==="tag")return Sl(n,!1);if(t.type==="text"||t.type==="inline-tag")return Cl(n);Dm(t,e),n.index++}function Dm(n,e){if(e){const t=new xl("",n.range);"inlines"in e?e.inlines.push(t):e.content.inlines.push(t)}}function Cl(n){let e=n.tokens[n.index];const t=e;let r=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(Zm(n)),r=e,e=n.tokens[n.index];return new ds(i,J.create(t.range.start,r.range.end))}function Zm(n){return n.tokens[n.index].type==="inline-tag"?Sl(n,!0):_l(n)}function Sl(n,e){const t=n.tokens[n.index++],r=t.content.substring(1),i=n.tokens[n.index];if((i==null?void 0:i.type)==="text")if(e){const s=_l(n);return new us(r,new ds([s],s.range),e,J.create(t.range.start,s.range.end))}else{const s=Cl(n);return new us(r,s,e,J.create(t.range.start,s.range.end))}else{const s=t.range;return new us(r,new ds([],s),e,s)}}function _l(n){const e=n.tokens[n.index++];return new xl(e.content,e.range)}function cs(n){if(!n)return cs({start:"/**",end:"*/",line:"*"});const{start:e,end:t,line:r}=n;return{start:ls(e,!0),end:ls(t,!1),line:ls(r,!0)}}function ls(n,e){if(typeof n=="string"||typeof n=="object"){const t=typeof n=="string"?sr(n):n.source;return e?new RegExp(`^\\s*${t}`):new RegExp(`\\s*${t}\\s*$`)}else return n}class Nl{constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const t of this.elements)if(e.length===0)e=t.toString();else{const r=t.toString();e+=Ll(e)+r}return e.trim()}toMarkdown(e){let t="";for(const r of this.elements)if(t.length===0)t=r.toMarkdown(e);else{const i=r.toMarkdown(e);t+=Ll(t)+i}return t.trim()}}class us{constructor(e,t,r,i){this.name=e,this.content=t,this.inline=r,this.range=i}toString(){let e=`@${this.name}`;const t=this.content.toString();return this.content.inlines.length===1?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}
${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,r;return(r=(t=e==null?void 0:e.renderTag)===null||t===void 0?void 0:t.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){const t=this.content.toMarkdown(e);if(this.inline){const s=Fm(this.name,t,e!=null?e:{});if(typeof s=="string")return s}let r="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?r="*":(e==null?void 0:e.tag)==="bold"?r="**":(e==null?void 0:e.tag)==="bold-italic"&&(r="***");let i=`${r}@${this.name}${r}`;return this.content.inlines.length===1?i=`${i} \u2014 ${t}`:this.content.inlines.length>1&&(i=`${i}
${t}`),this.inline?`{${i}}`:i}}function Fm(n,e,t){var r,i;if(n==="linkplain"||n==="linkcode"||n==="link"){const s=e.indexOf(" ");let a=e;if(s>0){const c=os(e,s);a=e.substring(c),e=e.substring(0,s)}return(n==="linkcode"||n==="link"&&t.link==="code")&&(a=`\`${a}\``),(i=(r=t.renderLink)===null||r===void 0?void 0:r.call(t,e,a))!==null&&i!==void 0?i:Um(e,a)}}function Um(n,e){try{return gn.parse(n,!0),`[${e}](${n})`}catch(t){return n}}class ds{constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){const r=this.inlines[t],i=this.inlines[t+1];e+=r.toString(),i&&i.range.start.line>r.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){const i=this.inlines[r],s=this.inlines[r+1];t+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(t+=`
`)}return t}}class xl{constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}}function Ll(n){return n.endsWith(`
`)?`
`:`

`}class Gm{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const t=this.commentProvider.getComment(e);if(t&&Nm(t))return _m(t).toMarkdown({renderLink:(i,s)=>this.documentationLinkRenderer(e,i,s),renderTag:i=>this.documentationTagRenderer(e,i)})}documentationLinkRenderer(e,t,r){var i;const s=(i=this.findNameInPrecomputedScopes(e,t))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,t);if(s&&s.nameSegment){const a=s.nameSegment.range.start.line+1,o=s.nameSegment.range.start.character+1,c=s.documentUri.with({fragment:`L${a},${o}`});return`[${r}](${c.toString()})`}else return}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){const i=Xe(e).precomputedScopes;if(!i)return;let s=e;do{const o=i.get(s).find(c=>c.name===t);if(o)return o;s=s.$container}while(s)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find(i=>i.name===t)}}class Bm{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return fm(e)?e.$comment:(t=Xr(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||t===void 0?void 0:t.text}}var $g=p(18254);class Wm{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e){return Promise.resolve(this.syncParser.parse(e))}}class bg{constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){const e=this.createWorker();e.onReady(()=>{if(this.queue.length>0){const t=this.queue.shift();t&&(e.lock(),t.resolve(e))}}),this.workerPool.push(e)}}parse(e,t){return j(this,null,function*(){const r=yield this.acquireParserWorker(t),i=new Deferred;let s;const a=t.onCancellationRequested(()=>{s=setTimeout(()=>{this.terminateWorker(r)},this.terminationDelay)});return r.parse(e).then(o=>{const c=this.hydrator.hydrate(o);i.resolve(c)}).catch(o=>{i.reject(o)}).finally(()=>{a.dispose(),clearTimeout(s)}),i.promise})}terminateWorker(e){e.terminate();const t=this.workerPool.indexOf(e);t>=0&&this.workerPool.splice(t,1)}acquireParserWorker(e){return j(this,null,function*(){this.initializeWorkers();for(const r of this.workerPool)if(r.ready)return r.lock(),r;const t=new Deferred;return e.onCancellationRequested(()=>{const r=this.queue.indexOf(t);r>=0&&this.queue.splice(r,1),t.reject(OperationCancelled)}),this.queue.push(t),t.promise})}}class Mg{get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,t,r,i){this.onReadyEmitter=new Emitter,this.deferred=new Deferred,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=i,t(s=>{const a=s;this.deferred.resolve(a),this.unlock()}),r(s=>{this.deferred.reject(s),this.unlock()})}terminate(){this.deferred.reject(OperationCancelled),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Deferred,this.sendMessage(e),this.deferred.promise}}class jm{constructor(){this.previousTokenSource=new ye.AU,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const t=new ye.AU;return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r){const i=new ts,s={action:t,deferred:i,cancellationToken:r!=null?r:ye.Ts.None};return e.push(s),this.performNextOperation(),i.promise}performNextOperation(){return j(this,null,function*(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,yield Promise.all(e.map(s=>j(this,[s],function*({action:t,deferred:r,cancellationToken:i}){try{const a=yield Promise.resolve().then(()=>t(i));r.resolve(a)}catch(a){es(a)?r.resolve(void 0):r.reject(a)}}))),this.done=!0,this.performNextOperation()})}cancelWrite(){this.previousTokenSource.cancel()}}class Km{constructor(e){this.grammarElementIdMap=new gl,this.tokenTypeIdMap=new gl,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors.map(t=>Object.assign({},t)),parserErrors:e.parserErrors.map(t=>Object.assign({},t)),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}createDehyrationContext(e){const t=new Map,r=new Map;for(const i of Ut(e))t.set(i,{});if(e.$cstNode)for(const i of de(e.$cstNode))r.set(i,{});return{astNodes:t,cstNodes:r}}dehydrateAstNode(e,t){const r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)g(o)?a.push(this.dehydrateAstNode(o,t)):k(o)?a.push(this.dehydrateReference(o,t)):a.push(o)}else g(s)?r[i]=this.dehydrateAstNode(s,t):k(s)?r[i]=this.dehydrateReference(s,t):s!==void 0&&(r[i]=s);return r}dehydrateReference(e,t){const r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,t){const r=t.cstNodes.get(e);return N(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=t.astNodes.get(e.astNode),v(e)?r.content=e.content.map(i=>this.dehydrateCstNode(i,t)):I(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){const t=e.value,r=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r),{lexerErrors:e.lexerErrors,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){const t=new Map,r=new Map;for(const s of Ut(e))t.set(s,{});let i;if(e.$cstNode)for(const s of de(e.$cstNode)){let a;"fullText"in s?(a=new el(s.fullText),i=a):"content"in s?a=new zi:"tokenType"in s&&(a=this.hydrateCstLeafNode(s)),a&&(r.set(s,a),a.root=i)}return{astNodes:t,cstNodes:r}}hydrateAstNode(e,t){const r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=t.cstNodes.get(e.$cstNode));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)g(o)?a.push(this.setParent(this.hydrateAstNode(o,t),r)):k(o)?a.push(this.hydrateReference(o,r,i,t)):a.push(o)}else g(s)?r[i]=this.setParent(this.hydrateAstNode(s,t),r):k(s)?r[i]=this.hydrateReference(s,r,i,t):s!==void 0&&(r[i]=s);return r}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,r,i){return this.linker.buildReference(t,r,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){const i=t.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=t.astNodes.get(e.astNode),v(i))for(const s of e.content){const a=this.hydrateCstNode(s,t,r++);i.content.push(a)}return i}hydrateCstLeafNode(e){const t=this.getTokenType(e.tokenType),r=e.offset,i=e.length,s=e.startLine,a=e.startColumn,o=e.endLine,c=e.endColumn,l=e.hidden;return new Hi(r,i,{start:{line:s,character:a},end:{line:o,character:c}},t,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();const t=this.grammarElementIdMap.getKey(e);if(t)return t;throw new Error("Invalid grammar element id: "+e)}createGrammarElementIdMap(){let e=0;for(const t of Ut(this.grammar))Qr(t)&&this.grammarElementIdMap.set(t,e++)}}function wl(n){return{documentation:{CommentProvider:e=>new Bm(e),DocumentationProvider:e=>new Gm(e)},parser:{AsyncParser:e=>new Wm(e),GrammarConfig:e=>Nu(e),LangiumParser:e=>Xp(e),CompletionParser:e=>Yp(e),ValueConverter:()=>new ul,TokenBuilder:()=>new ll,Lexer:e=>new Cm(e),ParserErrorMessageProvider:()=>new il},workspace:{AstNodeLocator:()=>new vm,AstNodeDescriptionProvider:e=>new Tm(e),ReferenceDescriptionProvider:e=>new Em(e)},references:{Linker:e=>new nm(e),NameProvider:()=>new im,ScopeProvider:e=>new dm(e),ScopeComputation:e=>new am(e),References:e=>new sm(e)},serializer:{Hydrator:e=>new Km(e),JsonSerializer:e=>new hm(e)},validation:{DocumentValidator:e=>new gm(e),ValidationRegistry:e=>new mm(e)},shared:()=>n.shared}}function Ol(n){return{ServiceRegistry:()=>new pm,workspace:{LangiumDocuments:e=>new tm(e),LangiumDocumentFactory:e=>new em(e),DocumentBuilder:e=>new Rm(e),IndexManager:e=>new km(e),WorkspaceManager:e=>new Im(e),FileSystemProvider:e=>n.fileSystemProvider(e),WorkspaceLock:()=>new jm,ConfigurationProvider:e=>new Am(e)}}}var Pl;(function(n){n.merge=(e,t)=>Hr(Hr({},e),t)})(Pl||(Pl={}));function fs(n,e,t,r,i,s,a,o,c){const l=[n,e,t,r,i,s,a,o,c].reduce(Hr,{});return $l(l)}const hs=Symbol("isProxy");function Vm(n){if(n&&n[hs])for(const e of Object.values(n))Vm(e);return n}function $l(n,e){const t=new Proxy({},{deleteProperty:()=>!1,get:(r,i)=>Ml(r,i,n,e||t),getOwnPropertyDescriptor:(r,i)=>(Ml(r,i,n,e||t),Object.getOwnPropertyDescriptor(r,i)),has:(r,i)=>i in n,ownKeys:()=>[...Reflect.ownKeys(n),hs]});return t[hs]=!0,t}const bl=Symbol();function Ml(n,e,t,r){if(e in n){if(n[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:n[e]});if(n[e]===bl)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. See https://langium.org/docs/configuration-services/#resolving-cyclic-dependencies');return n[e]}else if(e in t){const i=t[e];n[e]=bl;try{n[e]=typeof i=="function"?i(r):$l(i,r)}catch(s){throw n[e]=s instanceof Error?s:void 0,s}return n[e]}else return}function Hr(n,e){if(e){for(const[t,r]of Object.entries(e))if(r!==void 0){const i=n[t];i!==null&&r!==null&&typeof i=="object"&&typeof r=="object"?n[t]=Hr(i,r):n[t]=r}}return n}class Hm{readFile(){throw new Error("No file system is available.")}readDirectory(){return j(this,null,function*(){return[]})}}const Dl={fileSystemProvider:()=>new Hm},zm={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Ym={AstReflection:()=>new sa};function Xm(){const n=fs(Ol(Dl),Ym),e=fs(wl({shared:n}),zm);return n.ServiceRegistry.register(e),e}function Jm(n){var e;const t=Xm(),r=t.serializer.JsonSerializer.deserialize(n);return t.shared.workspace.LangiumDocumentFactory.fromModel(r,gn.parse(`memory://${(e=r.name)!==null&&e!==void 0?e:"grammar"}.langium`)),r}},23939:function(Q,C,p){var g=p(59298);function k(S,M,O){for(var v=-1,I=S.length;++v<I;){var N=S[v],_=M(N);if(_!=null&&(K===void 0?_===_&&!(0,g.Z)(_):O(_,K)))var K=_,B=N}return B}C.Z=k},33856:function(Q,C){function p(g,k){return g<k}C.Z=p},12749:function(Q,C,p){var g=p(70363),k=p(66059);function S(M,O){var v=-1,I=(0,k.Z)(M)?Array(M.length):[];return(0,g.Z)(M,function(N,_,K){I[++v]=O(N,_,K)}),I}C.Z=S},5669:function(Q,C,p){var g=p(24042),k=p(15894),S=p(59238);function M(O,v,I){for(var N=-1,_=v.length,K={};++N<_;){var B=v[N],Y=(0,g.Z)(O,B);I(Y,B)&&(0,k.Z)(K,(0,S.Z)(B,O),Y)}return K}C.Z=M},81263:function(Q,C,p){var g=p(94185),k=4;function S(M){return(0,g.Z)(M,k)}C.Z=S},47509:function(Q,C,p){var g=p(70290),k=p(58346),S=p(16160),M=p(54433),O=Object.prototype,v=O.hasOwnProperty,I=(0,g.Z)(function(N,_){N=Object(N);var K=-1,B=_.length,Y=B>2?_[2]:void 0;for(Y&&(0,S.Z)(_[0],_[1],Y)&&(B=1);++K<B;)for(var z=_[K],X=(0,M.Z)(z),fe=-1,ue=X.length;++fe<ue;){var de=X[fe],Et=N[de];(Et===void 0||(0,k.Z)(Et,O[de])&&!v.call(N,de))&&(N[de]=z[de])}return N});C.Z=I},25013:function(Q,C,p){p.d(C,{Z:function(){return Y}});var g=p(44065),k=p(66059),S=p(13127);function M(z){return function(X,fe,ue){var de=Object(X);if(!(0,k.Z)(X)){var Et=(0,g.Z)(fe,3);X=(0,S.Z)(X),fe=function(At){return Et(de[At],At,de)}}var vt=z(X,fe,ue);return vt>-1?de[Et?X[vt]:vt]:void 0}}var O=M,v=p(60412),I=p(43119),N=Math.max;function _(z,X,fe){var ue=z==null?0:z.length;if(!ue)return-1;var de=fe==null?0:(0,I.Z)(fe);return de<0&&(de=N(ue+de,0)),(0,v.Z)(z,(0,g.Z)(X,3),de)}var K=_,B=O(K),Y=B},57879:function(Q,C,p){p.d(C,{Z:function(){return I}});var g=Object.prototype,k=g.hasOwnProperty;function S(N,_){return N!=null&&k.call(N,_)}var M=S,O=p(19394);function v(N,_){return N!=null&&(0,O.Z)(N,_,M)}var I=v},63479:function(Q,C){function p(g){var k=g==null?0:g.length;return k?g[k-1]:void 0}C.Z=p},72725:function(Q,C,p){var g=p(70731),k=p(44065),S=p(12749),M=p(49069);function O(v,I){var N=(0,M.Z)(v)?g.Z:S.Z;return N(v,(0,k.Z)(I,3))}C.Z=O},81282:function(Q,C,p){var g=p(23939),k=p(33856),S=p(13211);function M(O){return O&&O.length?(0,g.Z)(O,S.Z,k.Z):void 0}C.Z=M},6415:function(Q,C,p){var g=p(83054),k=1/0,S=17976931348623157e292;function M(O){if(!O)return O===0?O:0;if(O=(0,g.Z)(O),O===k||O===-k){var v=O<0?-1:1;return v*S}return O===O?O:0}C.Z=M},43119:function(Q,C,p){var g=p(6415);function k(S){var M=(0,g.Z)(S),O=M%1;return M===M?O?M-O:M:0}C.Z=k},92450:function(Q,C,p){var g=p(4903);function k(S){return S&&S.length?(0,g.Z)(S):[]}C.Z=k}}]);
}());